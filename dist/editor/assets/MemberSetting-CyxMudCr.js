import{a as I,o as b,j as e}from"./index--hJz74lv.js";import{a as v}from"./pageMember-BRyn_9zP.js";const R=window.React.useImperativeHandle,l=window.React.useState,F=window.React.forwardRef,M=window.antd.Modal,n=window.antd.Form,i=window.antd.Radio,C=window.antd.Input,S=(s,u)=>{const[m,d]=l(!1),[p,o]=l(!1),[r,w]=l(1),{pageId:f}=I(t=>({pageId:t.page.pageId})),[a]=n.useForm(),g=b().id;R(u,()=>({open(t){w(t),d(!0)}}));const x=async()=>{if(!await a.validateFields())return;const{role:h,user_name:j}=a.getFieldsValue();try{o(!0),await v.addPageMember({type:r,page_id:r==1?parseInt(g):f,role:h,user_name:j}),o(!1),c(),s==null||s.update()}catch{o(!1)}},c=()=>{a.resetFields(),d(!1)};return e.jsx(M,{title:r===1?"添加开发者":"添加页面成员",open:m,confirmLoading:p,onOk:x,onCancel:c,okText:"提交",cancelText:"取消",children:e.jsxs(n,{form:a,labelCol:{span:6},wrapperCol:{span:16},initialValues:{role:1},children:[e.jsx(n.Item,{label:"用户",name:"user_name",rules:[{required:!0,message:"请输入用户邮箱"}],children:e.jsx(C,{placeholder:"请输入用户邮箱"})}),e.jsx(n.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],children:e.jsxs(i.Group,{children:[e.jsx(i,{value:1,children:"开发者"}),e.jsx(i,{value:2,children:"体验者"})]})})]})})},T=F(S);export{T as M};
