import{x as bn,i as Be,y as Fr,z as $i,A as Pr,B as kr,D as Fi,E as Pi,F as ki,G as Mi,H as Mr,I as Ai,J as zi,K as Sn,N as Li,O as Bi,Q as Yi,R as _n,S as Xi,T as Vi,U as Hi,j as r,a as N,V as Wi,P as G,W as qi,X as Ui,m as ee,Y as Gi,u as Zi,C as Ji,M as Ki,e as Qi,o as Me,Z as eo,$ as to,a0 as En,a1 as no,a2 as ro,p as io,a3 as oo,a4 as so,a5 as ao}from"./index-BUDzuEi4.js";import{S as lo,H as Xe}from"./SetterRender-DZKEwArS.js";import{M as Bt}from"./ColorPicker-Cbw1dTpO.js";import{B as Ar,a as zr,C as K,A as co,b as uo,c as ho,M as Lr,I as Br,S as Yr,d as fo,e as Xr,U as po,f as go,g as mo,P as vo,h as wo,i as xo}from"./index-CiahCvJx.js";import{V as Q,a as U,l as Vr,F as Hr}from"./VariableBind-DYzXrXYY.js";import{i as Wr,a as I,D as yo,C as Yt,P as jo,u as bo}from"./index-0boag5iG.js";import{Q as So,F as _o}from"./index-DDgr68Wa.js";import{E as qr}from"./SaveOutlined-COLA7pJr.js";import{D as rn}from"./DeleteOutlined-DoN5LWLP.js";import{C as Eo}from"./SendOutlined-DGsRBZGt.js";import{a as Xt}from"./pageMember-WV3TZeqE.js";import{M as To}from"./MemberSetting-Bt74ABYU.js";import{U as Io}from"./UserOutlined-0njV2p4U.js";import{C as Co}from"./CodeOutlined-C4hKqeoW.js";import"./LinkOutlined-BQm0JJH-.js";import"./LockOutlined-T2vQ5h3X.js";import"./TeamOutlined-DEHwGJJm.js";function Ur(n,e,i){switch(i.length){case 0:return n.call(e);case 1:return n.call(e,i[0]);case 2:return n.call(e,i[0],i[1]);case 3:return n.call(e,i[0],i[1],i[2])}return n.apply(e,i)}var Do=800,Oo=16,Ro=Date.now;function No(n){var e=0,i=0;return function(){var o=Ro(),t=Oo-(o-i);if(i=o,t>0){if(++e>=Do)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function $o(n){return function(){return n}}var Fo=bn?function(n,e){return bn(n,"toString",{configurable:!0,enumerable:!1,value:$o(e),writable:!0})}:Wr;const Po=Fo;var ko=No(Po),Tn=Math.max;function Mo(n,e,i){return e=Tn(e===void 0?n.length-1:e,0),function(){for(var o=arguments,t=-1,s=Tn(o.length-e,0),a=Array(s);++t<s;)a[t]=o[e+t];t=-1;for(var l=Array(e+1);++t<e;)l[t]=o[t];return l[e]=i(a),Ur(n,this,l)}}function Gr(n,e){return ko(Mo(n,e,Wr),n+"")}function Ao(n,e,i){if(!Be(i))return!1;var o=typeof e;return(o=="number"?Fr(i)&&$i(e,i.length):o=="string"&&e in i)?Pr(i[e],n):!1}function zo(n){return Gr(function(e,i){var o=-1,t=i.length,s=t>1?i[t-1]:void 0,a=t>2?i[2]:void 0;for(s=n.length>3&&typeof s=="function"?(t--,s):void 0,a&&Ao(i[0],i[1],a)&&(s=t<3?void 0:s,t=1),e=Object(e);++o<t;){var l=i[o];l&&n(e,l,o,s)}return e})}var Lo="[object Object]",Bo=Function.prototype,Yo=Object.prototype,Zr=Bo.toString,Xo=Yo.hasOwnProperty,Vo=Zr.call(Object);function Ho(n){if(!kr(n)||Fi(n)!=Lo)return!1;var e=Pi(n);if(e===null)return!0;var i=Xo.call(e,"constructor")&&e.constructor;return typeof i=="function"&&i instanceof i&&Zr.call(i)==Vo}function Wo(n){return function(e,i,o){for(var t=-1,s=Object(e),a=o(e),l=a.length;l--;){var c=a[n?l:++t];if(i(s[c],c,s)===!1)break}return e}}var qo=Wo();function Vt(n,e,i){(i!==void 0&&!Pr(n[e],i)||i===void 0&&!(e in n))&&ki(n,e,i)}function Uo(n){return kr(n)&&Fr(n)}function Ht(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function Go(n){return Mi(n,Mr(n))}function Zo(n,e,i,o,t,s,a){var l=Ht(n,i),c=Ht(e,i),u=a.get(c);if(u){Vt(n,i,u);return}var h=s?s(l,c,i+"",n,e,a):void 0,p=h===void 0;if(p){var d=Sn(c),m=!d&&Ai(c),v=!d&&!m&&zi(c);h=c,d||m||v?Sn(l)?h=l:Uo(l)?h=Li(l):m?(p=!1,h=Bi(c,!0)):v?(p=!1,h=Yi(c,!0)):h=[]:Ho(c)||_n(c)?(h=l,_n(l)?h=Go(l):(!Be(l)||Xi(l))&&(h=Vi(c))):p=!1}p&&(a.set(c,h),t(h,c,o,s,a),a.delete(c)),Vt(n,i,h)}function on(n,e,i,o,t){n!==e&&qo(e,function(s,a){if(t||(t=new Hi),Be(s))Zo(n,e,a,i,on,o,t);else{var l=o?o(Ht(n,a),s,a+"",n,e,t):void 0;l===void 0&&(l=s),Vt(n,a,l)}},Mr)}function Jr(n,e,i,o,t,s){return Be(n)&&Be(e)&&(s.set(e,n),on(n,e,void 0,Jr,s),s.delete(e)),n}var Jo=zo(function(n,e,i,o){on(n,e,i,o)});const Ko=Jo;var Qo=Gr(function(n){return n.push(void 0,Jr),Ur(Ko,void 0,n)});function Y(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var In=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gt=function(){return Math.random().toString(36).substring(7).split("").join(".")},Cn={INIT:"@@redux/INIT"+gt(),REPLACE:"@@redux/REPLACE"+gt(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+gt()}};function es(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Kr(n,e,i){var o;if(typeof e=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Y(0));if(typeof e=="function"&&typeof i>"u"&&(i=e,e=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Y(1));return i(Kr)(n,e)}if(typeof n!="function")throw new Error(Y(2));var t=n,s=e,a=[],l=a,c=!1;function u(){l===a&&(l=a.slice())}function h(){if(c)throw new Error(Y(3));return s}function p(f){if(typeof f!="function")throw new Error(Y(4));if(c)throw new Error(Y(5));var g=!0;return u(),l.push(f),function(){if(g){if(c)throw new Error(Y(6));g=!1,u();var w=l.indexOf(f);l.splice(w,1),a=null}}}function d(f){if(!es(f))throw new Error(Y(7));if(typeof f.type>"u")throw new Error(Y(8));if(c)throw new Error(Y(9));try{c=!0,s=t(s,f)}finally{c=!1}for(var g=a=l,y=0;y<g.length;y++){var w=g[y];w()}return f}function m(f){if(typeof f!="function")throw new Error(Y(10));t=f,d({type:Cn.REPLACE})}function v(){var f,g=p;return f={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Y(11));function x(){w.next&&w.next(h())}x();var j=g(x);return{unsubscribe:j}}},f[In]=function(){return this},f}return d({type:Cn.INIT}),o={dispatch:d,subscribe:p,getState:h,replaceReducer:m},o[In]=v,o}function ts(n,e,i){return e.split(".").reduce((o,t)=>o&&o[t]?o[t]:i||null,n)}function ns(n,e){return n.filter(i=>i!==e)}function Qr(n){return typeof n=="object"}function rs(n,e){const i=new Map,o=s=>{i.set(s,i.has(s)?i.get(s)+1:1)};n.forEach(o),e.forEach(o);const t=[];return i.forEach((s,a)=>{s===1&&t.push(a)}),t}function is(n,e){return n.filter(i=>e.indexOf(i)>-1)}const sn="dnd-core/INIT_COORDS",at="dnd-core/BEGIN_DRAG",an="dnd-core/PUBLISH_DRAG_SOURCE",lt="dnd-core/HOVER",ct="dnd-core/DROP",ut="dnd-core/END_DRAG";function Dn(n,e){return{type:sn,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const os={type:sn,payload:{clientOffset:null,sourceClientOffset:null}};function ss(n){return function(i=[],o={publishSource:!0}){const{publishSource:t=!0,clientOffset:s,getSourceClientOffset:a}=o,l=n.getMonitor(),c=n.getRegistry();n.dispatch(Dn(s)),as(i,l,c);const u=us(i,l);if(u==null){n.dispatch(os);return}let h=null;if(s){if(!a)throw new Error("getSourceClientOffset must be defined");ls(a),h=a(u)}n.dispatch(Dn(s,h));const d=c.getSource(u).beginDrag(l,u);if(d==null)return;cs(d),c.pinSource(u);const m=c.getSourceType(u);return{type:at,payload:{itemType:m,item:d,sourceId:u,clientOffset:s||null,sourceClientOffset:h||null,isSourcePublic:!!t}}}}function as(n,e,i){I(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(o){I(i.getSource(o),"Expected sourceIds to be registered.")})}function ls(n){I(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function cs(n){I(Qr(n),"Item must be an object.")}function us(n,e){let i=null;for(let o=n.length-1;o>=0;o--)if(e.canDragSource(n[o])){i=n[o];break}return i}function ds(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function hs(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(t){ds(n,t,i[t])})}return n}function fs(n){return function(i={}){const o=n.getMonitor(),t=n.getRegistry();ps(o),vs(o).forEach((a,l)=>{const c=gs(a,l,t,o),u={type:ct,payload:{dropResult:hs({},i,c)}};n.dispatch(u)})}}function ps(n){I(n.isDragging(),"Cannot call drop while not dragging."),I(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function gs(n,e,i,o){const t=i.getTarget(n);let s=t?t.drop(o,n):void 0;return ms(s),typeof s>"u"&&(s=e===0?{}:o.getDropResult()),s}function ms(n){I(typeof n>"u"||Qr(n),"Drop result must either be an object or undefined.")}function vs(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function ws(n){return function(){const i=n.getMonitor(),o=n.getRegistry();xs(i);const t=i.getSourceId();return t!=null&&(o.getSource(t,!0).endDrag(i,t),o.unpinSource()),{type:ut}}}function xs(n){I(n.isDragging(),"Cannot call endDrag while not dragging.")}function Wt(n,e){return e===null?n===null:Array.isArray(n)?n.some(i=>i===e):n===e}function ys(n){return function(i,{clientOffset:o}={}){js(i);const t=i.slice(0),s=n.getMonitor(),a=n.getRegistry(),l=s.getItemType();return Ss(t,a,l),bs(t,s,a),_s(t,s,a),{type:lt,payload:{targetIds:t,clientOffset:o||null}}}}function js(n){I(Array.isArray(n),"Expected targetIds to be an array.")}function bs(n,e,i){I(e.isDragging(),"Cannot call hover while not dragging."),I(!e.didDrop(),"Cannot call hover after drop.");for(let o=0;o<n.length;o++){const t=n[o];I(n.lastIndexOf(t)===o,"Expected targetIds to be unique in the passed array.");const s=i.getTarget(t);I(s,"Expected targetIds to be registered.")}}function Ss(n,e,i){for(let o=n.length-1;o>=0;o--){const t=n[o],s=e.getTargetType(t);Wt(s,i)||n.splice(o,1)}}function _s(n,e,i){n.forEach(function(o){i.getTarget(o).hover(e,o)})}function Es(n){return function(){if(n.getMonitor().isDragging())return{type:an}}}function Ts(n){return{beginDrag:ss(n),publishDragSource:Es(n),hover:ys(n),drop:fs(n),endDrag:ws(n)}}class Is{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:i}=this.store;function o(s){return(...a)=>{const l=s.apply(e,a);typeof l<"u"&&i(l)}}const t=Ts(this);return Object.keys(t).reduce((s,a)=>{const l=t[a];return s[a]=o(l),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,i){this.isSetUp=!1,this.handleRefCountChange=()=>{const o=this.store.getState().refCount>0;this.backend&&(o&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!o&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=i,e.subscribe(this.handleRefCountChange)}}function Cs(n,e){return{x:n.x+e.x,y:n.y+e.y}}function ei(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Ds(n){const{clientOffset:e,initialClientOffset:i,initialSourceClientOffset:o}=n;return!e||!i||!o?null:ei(Cs(e,o),i)}function Os(n){const{clientOffset:e,initialClientOffset:i}=n;return!e||!i?null:ei(e,i)}const ze=[],ln=[];ze.__IS_NONE__=!0;ln.__IS_ALL__=!0;function Rs(n,e){return n===ze?!1:n===ln||typeof e>"u"?!0:is(e,n).length>0}class Ns{subscribeToStateChange(e,i={}){const{handlerIds:o}=i;I(typeof e=="function","listener must be a function."),I(typeof o>"u"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");let t=this.store.getState().stateId;const s=()=>{const a=this.store.getState(),l=a.stateId;try{l===t||l===t+1&&!Rs(a.dirtyHandlerIds,o)||e()}finally{t=l}};return this.store.subscribe(s)}subscribeToOffsetChange(e){I(typeof e=="function","listener must be a function.");let i=this.store.getState().dragOffset;const o=()=>{const t=this.store.getState().dragOffset;t!==i&&(i=t,e())};return this.store.subscribe(o)}canDragSource(e){if(!e)return!1;const i=this.registry.getSource(e);return I(i,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:i.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const i=this.registry.getTarget(e);if(I(i,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const o=this.registry.getTargetType(e),t=this.getItemType();return Wt(o,t)&&i.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const i=this.registry.getSource(e,!0);if(I(i,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const o=this.registry.getSourceType(e),t=this.getItemType();return o!==t?!1:i.isDragging(this,e)}isOverTarget(e,i={shallow:!1}){if(!e)return!1;const{shallow:o}=i;if(!this.isDragging())return!1;const t=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Wt(t,s))return!1;const a=this.getTargetIds();if(!a.length)return!1;const l=a.indexOf(e);return o?l===a.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ds(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Os(this.store.getState().dragOffset)}constructor(e,i){this.store=e,this.registry=i}}const On=typeof global<"u"?global:self,ti=On.MutationObserver||On.WebKitMutationObserver;function ni(n){return function(){const i=setTimeout(t,0),o=setInterval(t,50);function t(){clearTimeout(i),clearInterval(o),n()}}}function $s(n){let e=1;const i=new ti(n),o=document.createTextNode("");return i.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}const Fs=typeof ti=="function"?$s:ni;class Ps{enqueueTask(e){const{queue:i,requestFlush:o}=this;i.length||(o(),this.flushing=!0),i[i.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const i=this.index;if(this.index++,e[i].call(),this.index>this.capacity){for(let o=0,t=e.length-this.index;o<t;o++)e[o]=e[o+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Fs(this.flush),this.requestErrorThrow=ni(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class ks{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,i){this.onError=e,this.release=i,this.task=null}}class Ms{create(e){const i=this.freeTasks,o=i.length?i.pop():new ks(this.onError,t=>i[i.length]=t);return o.task=e,o}constructor(e){this.onError=e,this.freeTasks=[]}}const ri=new Ps,As=new Ms(ri.registerPendingError);function zs(n){ri.enqueueTask(As.create(n))}const cn="dnd-core/ADD_SOURCE",un="dnd-core/ADD_TARGET",dn="dnd-core/REMOVE_SOURCE",dt="dnd-core/REMOVE_TARGET";function Ls(n){return{type:cn,payload:{sourceId:n}}}function Bs(n){return{type:un,payload:{targetId:n}}}function Ys(n){return{type:dn,payload:{sourceId:n}}}function Xs(n){return{type:dt,payload:{targetId:n}}}function Vs(n){I(typeof n.canDrag=="function","Expected canDrag to be a function."),I(typeof n.beginDrag=="function","Expected beginDrag to be a function."),I(typeof n.endDrag=="function","Expected endDrag to be a function.")}function Hs(n){I(typeof n.canDrop=="function","Expected canDrop to be a function."),I(typeof n.hover=="function","Expected hover to be a function."),I(typeof n.drop=="function","Expected beginDrag to be a function.")}function qt(n,e){if(e&&Array.isArray(n)){n.forEach(i=>qt(i,!1));return}I(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var V;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(V||(V={}));let Ws=0;function qs(){return Ws++}function Us(n){const e=qs().toString();switch(n){case V.SOURCE:return`S${e}`;case V.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function Rn(n){switch(n[0]){case"S":return V.SOURCE;case"T":return V.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Nn(n,e){const i=n.entries();let o=!1;do{const{done:t,value:[,s]}=i.next();if(s===e)return!0;o=!!t}while(!o);return!1}class Gs{addSource(e,i){qt(e),Vs(i);const o=this.addHandler(V.SOURCE,e,i);return this.store.dispatch(Ls(o)),o}addTarget(e,i){qt(e,!0),Hs(i);const o=this.addHandler(V.TARGET,e,i);return this.store.dispatch(Bs(o)),o}containsHandler(e){return Nn(this.dragSources,e)||Nn(this.dropTargets,e)}getSource(e,i=!1){return I(this.isSourceId(e),"Expected a valid source ID."),i&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return I(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return I(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return I(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Rn(e)===V.SOURCE}isTargetId(e){return Rn(e)===V.TARGET}removeSource(e){I(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ys(e)),zs(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){I(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Xs(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const i=this.getSource(e);I(i,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=i}unpinSource(){I(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,i,o){const t=Us(e);return this.types.set(t,i),e===V.SOURCE?this.dragSources.set(t,o):e===V.TARGET&&this.dropTargets.set(t,o),t}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Zs=(n,e)=>n===e;function Js(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function Ks(n,e,i=Zs){if(n.length!==e.length)return!1;for(let o=0;o<n.length;++o)if(!i(n[o],e[o]))return!1;return!0}function Qs(n=ze,e){switch(e.type){case lt:break;case cn:case un:case dt:case dn:return ze;case at:case an:case ut:case ct:default:return ln}const{targetIds:i=[],prevTargetIds:o=[]}=e.payload,t=rs(i,o);if(!(t.length>0||!Ks(i,o)))return ze;const a=o[o.length-1],l=i[i.length-1];return a!==l&&(a&&t.push(a),l&&t.push(l)),t}function ea(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function ta(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(t){ea(n,t,i[t])})}return n}const $n={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function na(n=$n,e){const{payload:i}=e;switch(e.type){case sn:case at:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case lt:return Js(n.clientOffset,i.clientOffset)?n:ta({},n,{clientOffset:i.clientOffset});case ut:case ct:return $n;default:return n}}function ra(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function ce(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(t){ra(n,t,i[t])})}return n}const ia={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function oa(n=ia,e){const{payload:i}=e;switch(e.type){case at:return ce({},n,{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case an:return ce({},n,{isSourcePublic:!0});case lt:return ce({},n,{targetIds:i.targetIds});case dt:return n.targetIds.indexOf(i.targetId)===-1?n:ce({},n,{targetIds:ns(n.targetIds,i.targetId)});case ct:return ce({},n,{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case ut:return ce({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function sa(n=0,e){switch(e.type){case cn:case un:return n+1;case dn:case dt:return n-1;default:return n}}function aa(n=0){return n+1}function la(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function ca(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(t){la(n,t,i[t])})}return n}function ua(n={},e){return{dirtyHandlerIds:Qs(n.dirtyHandlerIds,{type:e.type,payload:ca({},e.payload,{prevTargetIds:ts(n,"dragOperation.targetIds",[])})}),dragOffset:na(n.dragOffset,e),refCount:sa(n.refCount,e),dragOperation:oa(n.dragOperation,e),stateId:aa(n.stateId)}}function da(n,e=void 0,i={},o=!1){const t=ha(o),s=new Ns(t,new Gs(t)),a=new Is(t,s),l=n(a,e,i);return a.receiveBackend(l),a}function ha(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Kr(ua,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function fa(n,e){if(n==null)return{};var i=pa(n,e),o,t;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(t=0;t<s.length;t++)o=s[t],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(i[o]=n[o])}return i}function pa(n,e){if(n==null)return{};var i={},o=Object.keys(n),t,s;for(s=0;s<o.length;s++)t=o[s],!(e.indexOf(t)>=0)&&(i[t]=n[t]);return i}const ga=window.React.memo,ma=window.React.useEffect;let Fn=0;const ot=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var va=ga(function(e){var{children:i}=e,o=fa(e,["children"]);const[t,s]=wa(o);return ma(()=>{if(s){const a=ii();return++Fn,()=>{--Fn===0&&(a[ot]=null)}}},[]),r.jsx(yo.Provider,{value:t,children:i})});function wa(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=xa(n.backend,n.context,n.options,n.debugMode),i=!n.context;return[e,i]}function xa(n,e=ii(),i,o){const t=e;return t[ot]||(t[ot]={dragDropManager:da(n,e,i,o)}),t[ot]}function ii(){return typeof global<"u"?global:window}function oi(n){let e=null;return()=>(e==null&&(e=n()),e)}function ya(n,e){return n.filter(i=>i!==e)}function ja(n,e){const i=new Set,o=s=>i.add(s);n.forEach(o),e.forEach(o);const t=[];return i.forEach(s=>t.push(s)),t}class ba{enter(e){const i=this.entered.length,o=t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e));return this.entered=ja(this.entered.filter(o),[e]),i===0&&this.entered.length>0}leave(e){const i=this.entered.length;return this.entered=ya(this.entered.filter(this.isNodeInDocument),e),i>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Sa{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const i={};Object.keys(this.config.exposeProperties).forEach(o=>{const t=this.config.exposeProperties[o];t!=null&&(i[o]={value:t(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,i)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,i){return i===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const si="__NATIVE_FILE__",ai="__NATIVE_URL__",li="__NATIVE_TEXT__",ci="__NATIVE_HTML__",Pn=Object.freeze(Object.defineProperty({__proto__:null,FILE:si,HTML:ci,TEXT:li,URL:ai},Symbol.toStringTag,{value:"Module"}));function mt(n,e,i){const o=e.reduce((t,s)=>t||n.getData(s),"");return o??i}const Ut={[si]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[ci]:{exposeProperties:{html:(n,e)=>mt(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[ai]:{exposeProperties:{urls:(n,e)=>mt(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[li]:{exposeProperties:{text:(n,e)=>mt(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function _a(n,e){const i=Ut[n];if(!i)throw new Error(`native type ${n} has no configuration`);const o=new Sa(i);return o.loadDataTransfer(e),o}function vt(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(Ut).filter(i=>{const o=Ut[i];return o!=null&&o.matchesTypes?o.matchesTypes.some(t=>e.indexOf(t)>-1):!1})[0]||null}const Ea=oi(()=>/firefox/i.test(navigator.userAgent)),ui=oi(()=>!!window.safari);class kn{interpolate(e){const{xs:i,ys:o,c1s:t,c2s:s,c3s:a}=this;let l=i.length-1;if(e===i[l])return o[l];let c=0,u=a.length-1,h;for(;c<=u;){h=Math.floor(.5*(c+u));const m=i[h];if(m<e)c=h+1;else if(m>e)u=h-1;else return o[h]}l=Math.max(0,u);const p=e-i[l],d=p*p;return o[l]+t[l]*p+s[l]*d+a[l]*p*d}constructor(e,i){const{length:o}=e,t=[];for(let m=0;m<o;m++)t.push(m);t.sort((m,v)=>e[m]<e[v]?-1:1);const s=[],a=[];let l,c;for(let m=0;m<o-1;m++)l=e[m+1]-e[m],c=i[m+1]-i[m],s.push(l),a.push(c/l);const u=[a[0]];for(let m=0;m<s.length-1;m++){const v=a[m],f=a[m+1];if(v*f<=0)u.push(0);else{l=s[m];const g=s[m+1],y=l+g;u.push(3*y/((y+g)/v+(y+l)/f))}}u.push(a[a.length-1]);const h=[],p=[];let d;for(let m=0;m<u.length-1;m++){d=a[m];const v=u[m],f=1/s[m],g=v+u[m+1]-d-d;h.push((d-v-g)*f),p.push(g*f*f)}this.xs=e,this.ys=i,this.c1s=u,this.c2s=h,this.c3s=p}}const Ta=1;function di(n){const e=n.nodeType===Ta?n:n.parentElement;if(!e)return null;const{top:i,left:o}=e.getBoundingClientRect();return{x:o,y:i}}function Ve(n){return{x:n.clientX,y:n.clientY}}function Ia(n){var e;return n.nodeName==="IMG"&&(Ea()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function Ca(n,e,i,o){let t=n?e.width:i,s=n?e.height:o;return ui()&&n&&(s/=window.devicePixelRatio,t/=window.devicePixelRatio),{dragPreviewWidth:t,dragPreviewHeight:s}}function Da(n,e,i,o,t){const s=Ia(e),l=di(s?n:e),c={x:i.x-l.x,y:i.y-l.y},{offsetWidth:u,offsetHeight:h}=n,{anchorX:p,anchorY:d}=o,{dragPreviewWidth:m,dragPreviewHeight:v}=Ca(s,e,u,h),f=()=>{let T=new kn([0,.5,1],[c.y,c.y/h*v,c.y+v-h]).interpolate(d);return ui()&&s&&(T+=(window.devicePixelRatio-1)*v),T},g=()=>new kn([0,.5,1],[c.x,c.x/u*m,c.x+m-u]).interpolate(p),{offsetX:y,offsetY:w}=t,x=y===0||y,j=w===0||w;return{x:x?y:g(),y:j?w:f()}}class Oa{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,i){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=i}}function Ra(n,e,i){return e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function Mn(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},o=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(t){Ra(n,t,i[t])})}return n}class Na{profile(){var e,i;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((i=this.dragOverTargetIds)===null||i===void 0?void 0:i.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var i;(i=this.window)===null||i===void 0||i.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,i,o){return this.sourcePreviewNodeOptions.set(e,o),this.sourcePreviewNodes.set(e,i),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,i,o){this.sourceNodes.set(e,i),this.sourceNodeOptions.set(e,o);const t=a=>this.handleDragStart(a,e),s=a=>this.handleSelectStart(a);return i.setAttribute("draggable","true"),i.addEventListener("dragstart",t),i.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),i.removeEventListener("dragstart",t),i.removeEventListener("selectstart",s),i.setAttribute("draggable","false")}}connectDropTarget(e,i){const o=a=>this.handleDragEnter(a,e),t=a=>this.handleDragOver(a,e),s=a=>this.handleDrop(a,e);return i.addEventListener("dragenter",o),i.addEventListener("dragover",t),i.addEventListener("drop",s),()=>{i.removeEventListener("dragenter",o),i.removeEventListener("dragover",t),i.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),i=this.sourceNodeOptions.get(e);return Mn({dropEffect:this.altKeyPressed?"copy":"move"},i||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),i=this.sourcePreviewNodeOptions.get(e);return Mn({anchorX:.5,anchorY:.5,captureDraggingState:!1},i||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Pn).some(i=>Pn[i]===e)}beginDragNativeItem(e,i){this.clearCurrentDragSourceNode(),this.currentNativeSource=_a(e,i),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const i=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var o;return(o=this.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},i)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,i){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(i))}handleDragEnter(e,i){this.dragEnterTargetIds.unshift(i)}handleDragOver(e,i){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(i)}handleDrop(e,i){this.dropTargetIds.unshift(i)}constructor(e,i,o){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=t=>{const s=this.sourceNodes.get(t);return s&&di(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=t=>!!(t&&this.document&&this.document.body&&this.document.body.contains(t)),this.endDragIfSourceWasRemovedFromDOM=()=>{const t=this.currentDragSourceNode;t==null||this.isNodeInDocument(t)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=t=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(t||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=t=>{if(t.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const a=Ve(t);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:l}=t,c=vt(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const h=this.monitor.getSourceId(),p=this.sourceNodes.get(h),d=this.sourcePreviewNodes.get(h)||p;if(d){const{anchorX:m,anchorY:v,offsetX:f,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),x=Da(p,d,a,{anchorX:m,anchorY:v},{offsetX:f,offsetY:g});l.setDragImage(d,x.x,x.y)}}try{l==null||l.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(t.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(t.target&&!t.target.hasAttribute||!t.target.hasAttribute("draggable")))return;t.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=t=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(t.dataTransfer)}if(!this.enterLeaveCounter.enter(t.target)||this.monitor.isDragging())return;const{dataTransfer:l}=t,c=vt(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=t=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=t.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Ve(t)}),s.some(l=>this.monitor.canDropOnTarget(l))&&(t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=t=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(t.dataTransfer)}},this.handleTopDragOver=t=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="none");return}this.altKeyPressed=t.altKey,this.lastClientOffset=Ve(t),this.scheduleHover(s),(s||[]).some(l=>this.monitor.canDropOnTarget(l))?(t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?t.preventDefault():(t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=t=>{this.isDraggingNativeItem()&&t.preventDefault(),this.enterLeaveCounter.leave(t.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=t=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;t.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(t.dataTransfer)}else vt(t.dataTransfer)&&t.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=t=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Ve(t)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=t=>{const s=t.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(t.preventDefault(),s.dragDrop()))},this.options=new Oa(i,o),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new ba(this.isNodeInDocument)}}const $a=function(e,i,o){return new Na(e,i,o)},Fa=window.antd.Input,Pa=window.React.useEffect,ka=window.React.useState,Ma=n=>{const[e,i]=ka("");Pa(()=>{var t;(t=n.value)!=null&&t.startsWith("url")&&i(n.value.replace("url(","").replace(")",""))},[]);const o=t=>{if(t===""){i(""),n.onChange("");return}t.startsWith("http")?(i(t),n.onChange(`url(${t})`)):(i(`${t}`),n.onChange(t))};return r.jsx(Fa,{value:e,onChange:t=>o(t.target.value)})},Aa=window.React.useEffect,za=window.React.useState,La=window.antd.InputNumber,F=({value:n,onChange:e,...i})=>{const[o,t]=za("");Aa(()=>{const a=n==null?void 0:n.toString().replace("px","");a&&t(a)},[n]);const s=a=>{a?(t(a),e(a+"px")):(t(null),e(""))};return r.jsx(La,{placeholder:"输入尺寸: 10",...i,addonAfter:"px",value:o,onChange:a=>s(a)})},Ba=window.antd.Flex,Ya=window.antd.Select,Xa=window.React.memo,Va=window.React.useEffect,wt=window.React.useState,Ha=n=>{const[e,i]=wt("auto"),[o,t]=wt(""),[s,a]=wt(!1);Va(()=>{n.value==="contain"||n.value==="cover"?(a(!1),t(""),i(n.value)):(a(!0),t(n.value),i("auto"))},[]);const l=u=>{u==="auto"?a(!0):(a(!1),t("")),i(u),n.onChange(u)},c=u=>{t(u),n.onChange(u)};return r.jsxs(Ba,{gap:5,children:[r.jsx(Ya,{placeholder:"请选择",value:e,onChange:l,options:[{label:"默认",value:"auto"},{label:"等比填充",value:"contain"},{label:"等比覆盖",value:"cover"}]}),s&&r.jsx(F,{value:o,placeholder:"大小",onChange:u=>c(u)})]})},Wa=Xa(Ha),qa=window.React.useEffect,Ua=window.React.useState,An=window.antd.Flex,te=window.antd.Form,Ga=window.antd.Input,xt=window.antd.Radio,Za=({form:n})=>{const[e,i]=Ua("all");qa(()=>{const t=n.getFieldValue(["scopeStyle","margin"]);i(t?"all":"single")},[n.getFieldValue(["scopeStyle","margin"])]);const o=t=>{i(t)};return r.jsx(r.Fragment,{children:r.jsxs(te.Item,{label:"边距",children:[r.jsxs(xt.Group,{optionType:"button",value:e,buttonStyle:"solid",onChange:t=>o(t.target.value),children:[r.jsx(xt.Button,{value:"all",children:r.jsx(Ar,{})}),r.jsx(xt.Button,{value:"single",children:r.jsx(zr,{})})]}),e==="all"&&r.jsx(te.Item,{name:["scopeStyle","margin"],noStyle:!0,children:r.jsx(Ga,{style:{marginTop:10},placeholder:"边距: 10px"})}),e==="single"&&r.jsxs(r.Fragment,{children:[r.jsxs(An,{gap:10,style:{marginTop:10},children:[r.jsx(te.Item,{name:["scopeStyle","margin"],hidden:!0,children:r.jsx(F,{})}),r.jsx(te.Item,{name:["scopeStyle","marginTop"],noStyle:!0,children:r.jsx(F,{placeholder:"T: 10"})}),r.jsx(te.Item,{name:["scopeStyle","marginRight"],noStyle:!0,children:r.jsx(F,{placeholder:"R: 10"})})]}),r.jsxs(An,{gap:10,style:{marginTop:10},children:[r.jsx(te.Item,{name:["scopeStyle","marginBottom"],noStyle:!0,children:r.jsx(F,{placeholder:"B: 10"})}),r.jsx(te.Item,{name:["scopeStyle","marginLeft"],noStyle:!0,children:r.jsx(F,{placeholder:"L: 10"})})]})]})]})})},Ja=window.React.useEffect,Ka=window.React.useState,zn=window.antd.Flex,ne=window.antd.Form,Qa=window.antd.Input,yt=window.antd.Radio,el=({form:n})=>{const[e,i]=Ka("all");Ja(()=>{const t=n.getFieldValue(["scopeStyle","padding"]);i(t?"all":"single")},[n.getFieldValue(["scopeStyle","padding"])]);const o=t=>{i(t)};return r.jsx(r.Fragment,{children:r.jsxs(ne.Item,{label:"填充",children:[r.jsxs(yt.Group,{optionType:"button",value:e,buttonStyle:"solid",onChange:t=>o(t.target.value),children:[r.jsx(yt.Button,{value:"all",children:r.jsx(Ar,{})}),r.jsx(yt.Button,{value:"single",children:r.jsx(zr,{})})]}),e==="all"&&r.jsx(ne.Item,{name:["scopeStyle","padding"],noStyle:!0,children:r.jsx(Qa,{style:{marginTop:10},placeholder:"填充: 10px"})}),e==="single"&&r.jsxs(r.Fragment,{children:[r.jsxs(zn,{gap:10,style:{marginTop:10},children:[r.jsx(ne.Item,{name:["scopeStyle","padding"],hidden:!0,children:r.jsx(F,{placeholder:"M"})}),r.jsx(ne.Item,{name:["scopeStyle","paddingTop"],noStyle:!0,children:r.jsx(F,{placeholder:"T: 10"})}),r.jsx(ne.Item,{name:["scopeStyle","paddingRight"],noStyle:!0,children:r.jsx(F,{placeholder:"R: 10"})})]}),r.jsxs(zn,{gap:10,style:{marginTop:10},children:[r.jsx(ne.Item,{name:["scopeStyle","paddingBottom"],noStyle:!0,children:r.jsx(F,{placeholder:"B: 10"})}),r.jsx(ne.Item,{name:["scopeStyle","paddingLeft"],noStyle:!0,children:r.jsx(F,{placeholder:"L: 10"})})]})]})]})})},ue=window.antd.Form,tl=window.antd.Input,He=window.antd.Select,We=window.antd.Radio,nl=({form:n})=>r.jsxs(r.Fragment,{children:[r.jsx(ue.Item,{name:["scopeStyle","display"],label:"布局模式",children:r.jsx(He,{options:[{label:"内联布局 inline",value:"inline"},{label:"块级布局 block",value:"block"},{label:"内联块布局 inline-block",value:"inline-block"},{label:"内联弹性布局 inline-flex",value:"inline-flex"},{label:"块级弹性布局 flex",value:"flex"},{label:"隐藏 none",value:"none"}],suffixIcon:r.jsx(K,{})})}),["inline-flex","flex"].includes(n.getFieldValue(["scopeStyle","display"]))&&r.jsxs(r.Fragment,{children:[r.jsx(ue.Item,{name:["scopeStyle","flexDirection"],label:"主轴方向",children:r.jsx(He,{options:[{label:"水平",value:"row"},{label:"垂直",value:"column"},{label:"水平反转",value:"row-reverse"},{label:"垂直反转",value:"column-reverse"}],suffixIcon:r.jsx(K,{})})}),r.jsx(ue.Item,{name:["scopeStyle","justifyContent"],label:"主轴对齐",children:r.jsx(He,{options:[{label:"起点对齐",value:"flex-start"},{label:"终点对齐",value:"flex-right"},{label:"居中对齐",value:"center"},{label:"两端对齐",value:"space-between"},{label:"环绕对齐",value:"space-around"}],suffixIcon:r.jsx(K,{})})}),r.jsx(ue.Item,{name:["scopeStyle","alignItems"],label:"副轴对齐",children:r.jsx(He,{options:[{label:"起点对齐",value:"flex-start"},{label:"终点对齐",value:"flex-end"},{label:"居中对齐",value:"center"},{label:"文字基线对齐",value:"baseline"},{label:"拉伸对齐",value:"stretch"}],suffixIcon:r.jsx(K,{})})}),r.jsx(ue.Item,{name:["scopeStyle","flexWrap"],label:"换行方式",children:r.jsxs(We.Group,{buttonStyle:"solid",optionType:"button",children:[r.jsx(We,{value:"nowrap",children:"不换"}),r.jsx(We,{value:"wrap",children:"换行"}),r.jsx(We,{value:"wrap-reverse",children:"逆换行"})]})}),r.jsx(ue.Item,{name:["scopeStyle","gap"],label:"间隙",children:r.jsx(tl,{placeholder:"eg: 10px"})})]})]}),rl="_monacoEditor_afu8c_1",il="_ui_afu8c_4",ol="_title_afu8c_7",hi={monacoEditor:rl,ui:il,title:ol},re=n=>r.jsx("h2",{className:hi.title,children:n.children}),Ln=window.antd.Flex,de=window.antd.Form,qe=window.antd.Input,Ue=window.antd.Radio,sl=window.React.useEffect,he=window.React.useState,al=n=>{const[e,i]=he("none"),[o,t]=he("#000"),[s,a]=he("0"),[l,c]=he("0"),[u,h]=he("0"),[p,d]=he("0");sl(()=>{var g;const f=(g=n.value)==null?void 0:g.split(" ");f&&f.length>0&&(t(f[0]||"#000"),a(f[1]||"0px"),c(f[2]||"0px"),h(f[3]||"0px"),d(f[4]||"0px"),i(f[5]||""))},[]);const m=f=>{i(f),f==="none"?n.onChange("none"):n.onChange(`${o} ${s} ${l} ${u} ${p} ${f}`)},v=(f,g)=>{f==="color"?(t(g),n.onChange(`${g} ${s} ${l} ${u} ${p} ${e}`)):f==="x"?(g===""&&(g="0px"),a(g),n.onChange(`${o} ${g} ${l} ${u} ${p} ${e}`)):f==="y"?(g===""&&(g="0px"),c(g),n.onChange(`${o} ${s} ${g} ${u} ${p} ${e}`)):f==="blur"?(g===""&&(g="0px"),h(g),n.onChange(`${o} ${s} ${l} ${g} ${p} ${e}`)):f==="spread"&&(g===""&&(g="0px"),d(g),n.onChange(`${o} ${s} ${l} ${u} ${g} ${e}`))};return r.jsxs(r.Fragment,{children:[r.jsx(de.Item,{noStyle:!0,children:r.jsxs(Ue.Group,{buttonStyle:"solid",optionType:"button",value:e,onChange:f=>m(f.target.value),children:[r.jsx(Ue,{value:"none",children:"无"}),r.jsx(Ue,{value:"",children:"外阴影"}),r.jsx(Ue,{value:"Inset",children:"内阴影"})]})}),r.jsx(de.Item,{label:"颜色",style:{marginBlock:14},children:r.jsx(Bt,{showText:!0,allowClear:!0,value:o,onChange:f=>v("color",f)})}),r.jsxs(Ln,{gap:10,children:[r.jsx(de.Item,{label:"X轴",children:r.jsx(qe,{value:s,onChange:f=>v("x",f.target.value)})}),r.jsx(de.Item,{label:"Y轴",children:r.jsx(qe,{value:l,onChange:f=>v("y",f.target.value)})})]}),r.jsxs(Ln,{gap:10,style:{marginTop:-10,marginBottom:-24},children:[r.jsx(de.Item,{label:"模糊",children:r.jsx(qe,{value:u,onChange:f=>v("blur",f.target.value)})}),r.jsx(de.Item,{label:"扩展",children:r.jsx(qe,{value:p,onChange:f=>v("spread",f.target.value)})})]})]})},ll=window.React.useEffect,cl=window.React.useState,Ge=window.antd.Select,D=window.antd.Form,ul=window.antd.Input,dl=window.antd.Slider,Ze=window.antd.Radio,jt=window.antd.Tooltip,Bn=window.antd.Flex,hl=window.antd.InputNumber,fl=window.ahooks.useDebounceFn,pl=()=>{const[n,e]=cl(!1),i=N(),[o]=D.useForm();ll(()=>{var l;if(o.resetFields(),!i.selectedElement)o.setFieldValue("scopeCss",i.page.config.scopeCss||`/* 请在此处添加样式*/
.marsview{

}`),o.setFieldValue("scopeStyle",i.page.config.scopeStyle);else{const c=((l=i.page.elementsMap[i.selectedElement.id])==null?void 0:l.config)||{};o.setFieldValue("scopeCss",c.scopeCss||`/* 请在此处添加样式*/
.marsview{

}`),o.setFieldValue("scopeStyle",c.scopeStyle||c.style),e(!n)}},[i.selectedElement]);const{run:t}=fl(()=>{s(o.getFieldsValue())},{wait:500}),s=l=>{const c=Wi(l.scopeCss);i.selectedElement?i.editElement({id:i.selectedElement.id,type:"style",scopeCss:l.scopeCss,scopeStyle:l.scopeStyle,style:{...l.scopeStyle,...c}}):i.savePageInfo({type:"style",scopeCss:l.scopeCss,scopeStyle:l.scopeStyle,style:{...l.scopeStyle,...c}})},a={labelCol:{span:7},wrapperCol:{span:16}};return r.jsxs(D,{className:hi.ui,...a,form:o,layout:"horizontal",labelAlign:"right",onValuesChange:t,children:[r.jsx(re,{children:"自定义样式"}),r.jsx(D.Item,{name:"scopeCss",noStyle:!0,children:r.jsx(Q,{language:"css"})}),r.jsx(re,{children:"基础"}),r.jsx(D.Item,{name:["scopeStyle","width"],label:"宽度",children:r.jsx(F,{})}),r.jsx(D.Item,{name:["scopeStyle","height"],label:"高度",children:r.jsx(F,{})}),r.jsx(Za,{form:o}),r.jsx(el,{form:o}),r.jsx(D.Item,{name:["scopeStyle","opacity"],label:"透明度",children:r.jsx(dl,{min:0,max:1,step:.1})},"opacity"),r.jsx(re,{children:"布局"}),r.jsx(nl,{form:o}),r.jsx(re,{children:"文字"}),r.jsx(D.Item,{name:["scopeStyle","fontSize"],label:"字号",children:r.jsx(F,{placeholder:"eg: 14"})}),r.jsx(D.Item,{name:["scopeStyle","lineHeight"],label:"行高",children:r.jsx(F,{placeholder:"eg: 30"})}),r.jsx(D.Item,{name:["scopeStyle","fontWeight"],label:"字重",children:r.jsx(Ge,{placeholder:"eg: 400",options:[{value:100,label:"100 Thin"},{value:200,label:"200 Extra Light"},{value:300,label:"300 Light"},{value:400,label:"400 Normal"},{value:500,label:"500 Medium"},{value:600,label:"600 Semi Bold"},{value:700,label:"700 Bold"},{value:800,label:"800 Extra Bold"},{value:900,label:"900 Black Bold"}],suffixIcon:r.jsx(K,{})},"fontWeight")}),r.jsx(D.Item,{name:["scopeStyle","color"],label:"颜色",children:r.jsx(Bt,{showText:!0,allowClear:!0})}),r.jsx(D.Item,{name:["scopeStyle","textAlign"],label:"对齐",children:r.jsxs(Ze.Group,{buttonStyle:"solid",optionType:"button",children:[r.jsx(jt,{title:"左对齐",children:r.jsx(Ze,{value:"left",children:r.jsx(co,{})})}),r.jsx(jt,{title:"居中对齐",children:r.jsx(Ze,{value:"center",children:r.jsx(uo,{})})}),r.jsx(jt,{title:"右对齐",children:r.jsx(Ze,{value:"right",children:r.jsx(ho,{})})})]})}),r.jsx(re,{children:"背景"}),r.jsx(D.Item,{name:["scopeStyle","backgroundColor"],label:"颜色",children:r.jsx(Bt,{})}),r.jsx(D.Item,{name:["scopeStyle","backgroundImage"],label:"图片",tooltip:"支持渐变色。图片使用时，直接输入远程地址：http(s)://xxx.png",children:r.jsx(Ma,{})}),r.jsx(D.Item,{name:["scopeStyle","backgroundSize"],label:"尺寸",tooltip:"默认的时候，可以手动输入尺寸",children:r.jsx(Wa,{})}),r.jsx(D.Item,{name:["scopeStyle","backgroundRepeat"],label:"平铺",children:r.jsx(Ge,{options:[{label:"不平铺",value:"no-repeat"},{label:"平铺",value:"repeat"},{label:"水平平铺",value:"repeat-x"},{label:"垂直平铺",value:"repeat-y"}],suffixIcon:r.jsx(K,{})})}),r.jsx(D.Item,{name:["scopeStyle","backgroundPosition"],label:"位置",children:r.jsx(Ge,{options:[{label:"top",value:"top"},{label:"bottom",value:"bottom"},{label:"left",value:"left"},{label:"right",value:"right"},{label:"center",value:"center"}],suffixIcon:r.jsx(K,{})})}),r.jsx(re,{children:"定位"}),r.jsx(D.Item,{name:["scopeStyle","position"],label:"定位",children:r.jsx(Ge,{placeholder:"请选择",options:[{label:"static",value:"static"},{label:"relative",value:"relative"},{label:"absolute",value:"absolute"},{label:"fixed",value:"fixed"},{label:"sticky",value:"sticky"}],suffixIcon:r.jsx(K,{})})},"position"),r.jsx(D.Item,{name:["scopeStyle","zIndex"],label:"zIndex",children:r.jsx(hl,{})},"zIndex"),!["",void 0,"static"].includes(o.getFieldValue(["scopeStyle","position"]))&&r.jsxs(D.Item,{label:"位置",children:[r.jsxs(Bn,{gap:10,children:[r.jsx(D.Item,{name:"top",noStyle:!0,children:r.jsx(F,{placeholder:"T: 10"})}),r.jsx(D.Item,{name:"right",noStyle:!0,children:r.jsx(F,{placeholder:"R: 10"})})]}),r.jsxs(Bn,{gap:10,style:{marginTop:10},children:[r.jsx(D.Item,{name:"bottom",noStyle:!0,children:r.jsx(F,{placeholder:"B: 10"})}),r.jsx(D.Item,{name:"left",noStyle:!0,children:r.jsx(F,{placeholder:"L: 10"})})]})]}),r.jsx(re,{children:"边框"}),r.jsx(D.Item,{name:["scopeStyle","borderRadius"],label:"圆角",children:r.jsx(F,{placeholder:"eg：5"})}),r.jsx(D.Item,{name:["scopeStyle","border"],label:"边框",children:r.jsx(ul,{placeholder:"eg：1px solid #fff"})}),r.jsx(D.Item,{label:"阴影",name:["scopeStyle","boxShadow"],children:r.jsx(al,{})})]})},L=window.antd.Form,B=window.antd.Radio,fe=window.antd.Input,gl=window.antd.Switch,Yn=window.antd.Space,ml=function(){return r.jsxs(r.Fragment,{children:[r.jsx(L.Item,{label:"接口ID",name:"id",hidden:!0,children:r.jsx(fe,{})}),r.jsx(L.Item,{label:"接口名称",name:"name",rules:[{required:!0}],children:r.jsx(fe,{placeholder:"请输入接口中文名称，eg: 用户列表"})}),r.jsx(L.Item,{label:"请求方式",name:"method",children:r.jsxs(B.Group,{buttonStyle:"solid",children:[r.jsx(B.Button,{value:"GET",children:"GET"}),r.jsx(B.Button,{value:"POST",children:"POST"}),r.jsx(B.Button,{value:"PUT",children:"PUT"}),r.jsx(B.Button,{value:"DELETE",children:"DELETE"})]})}),r.jsx(L.Item,{label:"接口地址",extra:"支持模板语法：${id}，前提是事件流中有该字段。",children:r.jsxs(Yn,{direction:"vertical",style:{width:"100%"},children:[r.jsx(L.Item,{label:"STG地址",name:"stgApi",noStyle:!0,rules:[{required:!0}],children:r.jsx(fe,{prefix:"STG：",placeholder:"http://mars-api.marsview.cc/api/user"})}),r.jsx(L.Item,{label:"PRE地址",name:"preApi",noStyle:!0,rules:[{required:!0}],children:r.jsx(fe,{prefix:"PRE：",placeholder:"http://mars-api.marsview.cc/api/user"})}),r.jsx(L.Item,{label:"PRD地址",name:"prdApi",noStyle:!0,rules:[{required:!0}],children:r.jsx(fe,{prefix:"PRD：",placeholder:"http://mars-api.marsview.cc/api/user"})})]})}),r.jsx(L.Item,{label:"数据格式",name:"contentType",children:r.jsxs(B.Group,{buttonStyle:"solid",children:[r.jsx(B.Button,{value:"application/json",children:"JSON"}),r.jsx(B.Button,{value:"multipart/form-data",children:"FormData"}),r.jsx(B.Button,{value:"application/x-www-form-urlencoded",children:"Form"})]})}),r.jsx(L.Item,{label:"发送参数",children:r.jsx(L.List,{name:"params",children:(n,{add:e,remove:i})=>r.jsx(r.Fragment,{children:n.map(({name:o},t)=>r.jsxs(Yn,{align:"baseline",style:{marginBottom:n.length===t+1?0:10,alignItems:"center"},children:[r.jsx(L.Item,{name:[o,"key"],noStyle:!0,children:r.jsx(fe,{placeholder:"请输入参数名"})}),r.jsx(L.Item,{name:[o,"value"],noStyle:!0,children:r.jsx(U,{placeholder:"请输入参数值"})}),r.jsx(G,{onClick:()=>e({key:"",value:""})}),t>0&&r.jsx(Lr,{onClick:()=>{i(o)}})]},`header-${t}`))})})}),r.jsx(L.Item,{label:"参数替换",extra:"默认会把事件流参数和当前参数合并；保留参数为只取当前参数，参数支持模板语法：${id}。",name:"replaceData",children:r.jsxs(B.Group,{buttonStyle:"solid",children:[r.jsx(B.Button,{value:"merge",children:"合并参数"}),r.jsx(B.Button,{value:"cover",children:"覆盖参数"}),r.jsx(B.Button,{value:"reserve",children:"保留参数"})]})}),r.jsx(L.Item,{label:"开启代理",name:"isCors",extra:"开启接口代理对解决跨域问题很有用",children:r.jsx(gl,{})})]})},Je=window.antd.Form,bt=window.antd.Input,vl=window.antd.InputNumber,wl=function(){return r.jsxs(r.Fragment,{children:[r.jsxs("p",{style:{lineHeight:"35px",color:"#5c5c5c",marginLeft:"70px",marginBottom:"10px"},children:[r.jsx(Br,{}),r.jsxs("span",{style:{marginLeft:5},children:["用来定义接口返回结构，推荐结构：","{ ret: 0, data: {}, msg: '' }"]})]}),r.jsx(Je.Item,{label:"业务码",extra:"接口返回业务状态码，默认是：ret",name:["result","code"],children:r.jsx(bt,{placeholder:"默认为：ret"})}),r.jsx(Je.Item,{label:"成功值",extra:"接口返回成功时对应的状态码值，默认是：0",name:["result","codeValue"],children:r.jsx(vl,{placeholder:"默认为：0"})}),r.jsx(Je.Item,{label:"结果字段",extra:"接口返回结果字段，默认是：data",name:["result","data"],children:r.jsx(bt,{placeholder:"默认为：data"})}),r.jsx(Je.Item,{label:"报错字段",extra:"接口返回报错字段，默认是：msg",name:["result","msg"],children:r.jsx(bt,{placeholder:"默认为：msg"})})]})},St=window.antd.Form,Xn=window.antd.Input,xl=window.antd.Switch,yl=function(){return r.jsxs(r.Fragment,{children:[r.jsxs("p",{style:{lineHeight:"35px",color:"#5c5c5c",marginLeft:"56px",marginBottom:"10px"},children:[r.jsx(Br,{}),r.jsx("span",{style:{marginLeft:5},children:"用来定义成功或者失败时，系统显示提示文案"})]}),r.jsx(St.Item,{label:"成功提示",name:["tips","success"],children:r.jsx(Xn,{placeholder:"默认不提示"})}),r.jsx(St.Item,{label:"失败提示",name:["tips","fail"],children:r.jsx(Xn,{placeholder:"默认不提示"})}),r.jsx(St.Item,{label:"系统报错",name:["tips","isError"],valuePropName:"checked",extra:"开启系统报错后，会优先使用接口返回错误信息。",children:r.jsx(xl,{})})]})},jl=window.React.forwardRef,bl=window.React.useImperativeHandle,Sl=window.React.useState,Vn=window.antd.Form,_l=window.antd.Modal,El=window.antd.Tabs,Tl=({update:n},e)=>{const{apis:i,addApi:o,updateApi:t}=N(d=>({apis:d.page.apis,addApi:d.addApi,updateApi:d.updateApi})),[s]=Vn.useForm(),[a,l]=Sl(!1),c={method:"GET",url:"",sourceType:"json",params:[{key:"",value:""}],contentType:"application/json",replaceData:"merge",isCors:!0,result:{code:"ret",data:"data",msg:"msg",codeValue:0},tips:{success:"请求成功",fail:"请求失败",isError:!0}};bl(e,()=>({showModal:d=>{const m=d?i[d]:{};d?s.setFieldsValue({...m}):s.setFieldsValue({...c,...m}),l(!0)}}));const u=[{key:"base-set",label:"接口设置",forceRender:!0,children:r.jsx(ml,{})},{key:"structure",label:"返回结构设置",forceRender:!0,children:r.jsx(wl,{})},{key:"tips",label:"消息提示设置",forceRender:!0,children:r.jsx(yl,{})}];async function h(){if(!await s.validateFields())return;const m=s.getFieldsValue();if(m.id)t(s.getFieldsValue());else{const v=qi();o({...c,...s.getFieldsValue(),id:v})}n==null||n(m.id),p()}function p(){l(!1),s.resetFields()}return r.jsx(_l,{width:"800px",okText:"确认",cancelText:"取消",title:"接口配置",open:a,onOk:h,onCancel:p,children:r.jsx(Vn,{form:s,labelCol:{span:4},wrapperCol:{span:19},style:{maxWidth:800},autoComplete:"off",children:r.jsx(El,{defaultActiveKey:"1",items:u})})})},hn=jl(Tl),Il="_title_1mew4_1",Cl={title:Il},Dl=window.React.useEffect,Ol=window.React.useRef,Rl=window.React.useState,Nl=window.ahooks.useDebounceFn,$l=window.antd.Button,W=window.antd.Form,Se=window.antd.Select,Fl=window.antd.Tooltip,Pl=()=>{const n=N(),[e]=W.useForm(),[i,o]=Rl("json"),t=Ol();Dl(()=>{var p;e.resetFields();let u;n.selectedElement?u=((p=n.page.elementsMap[n.selectedElement.id])==null?void 0:p.config.api)||{}:u=n.page.config.api||{},o((u==null?void 0:u.sourceType)||"json");const h=JSON.stringify((u==null?void 0:u.source)||"",null,2);e.setFieldsValue({sourceType:"json",id:"",sourceField:"",...u,source:h})},[n.selectedElement]);const s=u=>{o(u)};function a(){var u;(u=t.current)==null||u.showModal(e.getFieldValue("id"))}const{run:l}=Nl(()=>{c(e.getFieldValue("id"))},{wait:500}),c=u=>{var d,m;const h=e.getFieldsValue();let p=[];try{p=JSON.parse(h.source)}catch(v){console.error(v),p=[]}if((d=n.selectedElement)!=null&&d.id){const v={id:(m=n.selectedElement)==null?void 0:m.id,type:"api",api:{...h,id:u,source:p}};n.editElement(v)}else{const v={type:"api",api:{...h,id:u,source:p}};n.savePageInfo(v)}u&&e.setFieldValue("id",u)};return r.jsxs(W,{form:e,labelCol:{span:8},wrapperCol:{span:15},labelAlign:"right",onValuesChange:l,autoComplete:"off",children:[r.jsxs("h2",{className:Cl.title,children:[r.jsx("span",{children:"数据源配置"}),r.jsx(Fl,{title:"接口配置",children:r.jsx(So,{style:{marginLeft:5}})})]}),r.jsx(W.Item,{label:"数据来源",name:"sourceType",children:r.jsxs(Se,{onChange:u=>s(u),children:[r.jsx(Se.Option,{value:"json",children:"静态数据"}),r.jsx(Se.Option,{value:"api",children:"接口请求"}),r.jsx(Se.Option,{value:"variable",children:"动态变量"})]})}),r.jsx(W.Item,{noStyle:!0,shouldUpdate:!0,children:u=>{const h=u.getFieldValue("sourceType");if(h==="json")return r.jsx(W.Item,{name:"source",noStyle:!0,children:r.jsx(Q,{height:"calc(100vh - 300px)",language:"json"})});if(h==="api")return r.jsxs(r.Fragment,{children:[r.jsx(W.Item,{label:"请求地址",name:"id",children:r.jsx(kl,{showModal:a})}),r.jsx(W.Item,{label:"数据处理",name:"sourceField",children:r.jsx(U,{placeholder:"数据源所对应的接口字段"})}),r.jsx(W.Item,{name:"source",hidden:!0,children:r.jsx(Q,{height:"350px",language:"json"})})]});if(h==="variable")return r.jsxs(r.Fragment,{children:[r.jsx(W.Item,{label:"绑定变量",name:"name",children:r.jsx(U,{readOnly:!0,placeholder:"数据源所对应的接口字段"})}),r.jsx(W.Item,{name:"source",hidden:!0,children:r.jsx(Q,{height:"350px",language:"json"})})]})}}),r.jsx(hn,{update:c,ref:t})]})};function kl({value:n,onChange:e,showModal:i}){const o=N();return r.jsxs(r.Fragment,{children:[r.jsx(Se,{placeholder:"请选择接口",showSearch:!0,allowClear:!0,style:{width:"82%"},value:n,onChange:t=>e(t),children:Object.values(o.page.apis).map(t=>r.jsx(Se.Option,{value:t.id,children:t.name},t.id))}),r.jsx($l,{type:"link",onClick:i,icon:r.jsx(qr,{})})]})}var Ml="function",Al="object",zl="string",Ll="undefined",Bl=typeof document!==Ll&&document,Yl=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],Ke={cm:function(n){return n*96/2.54},mm:function(n){return n*96/254},in:function(n){return n*96},pt:function(n){return n*96/72},pc:function(n){return n*96/6},"%":function(n,e){return n*e/100},vw:function(n,e){return e===void 0&&(e=window.innerWidth),n/100*e},vh:function(n,e){return e===void 0&&(e=window.innerHeight),n/100*e},vmax:function(n,e){return e===void 0&&(e=Math.max(window.innerWidth,window.innerHeight)),n/100*e},vmin:function(n,e){return e===void 0&&(e=Math.min(window.innerWidth,window.innerHeight)),n/100*e}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Xl(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var o=Array(n),t=0,e=0;e<i;e++)for(var s=arguments[e],a=0,l=s.length;a<l;a++,t++)o[t]=s[a];return o}function Te(n){return n&&typeof n===Al}function Ie(n){return Array.isArray(n)}function fi(n){return typeof n===zl}function Vl(n){return typeof n===Ml}function Hl(n,e){var i=n===""||n==" ",o=e===""||e==" ";return o&&i||n===e}function pi(n,e,i,o,t){var s=fn(n,e,i);return s?i:Wl(n,e,i+1,o,t)}function fn(n,e,i){if(!n.ignore)return null;var o=e.slice(Math.max(i-3,0),i+3).join("");return new RegExp(n.ignore).exec(o)}function Wl(n,e,i,o,t){for(var s=function(u){var h=e[u].trim();if(h===n.close&&!fn(n,e,u))return{value:u};var p=u,d=Gt(t,function(m){var v=m.open;return v===h});if(d&&(p=pi(d,e,u,o,t)),p===-1)return a=u,"break";u=p,a=u},a,l=i;l<o;++l){var c=s(l);if(l=a,typeof c=="object")return c.value;if(c==="break")break}return-1}function gi(n,e){var i=fi(e)?{separator:e}:e,o=i.separator,t=o===void 0?",":o,s=i.isSeparateFirst,a=i.isSeparateOnlyOpenClose,l=i.isSeparateOpenClose,c=l===void 0?a:l,u=i.openCloseCharacters,h=u===void 0?Yl:u,p=h.map(function(_){var E=_.open,C=_.close;return E===C?E:E+"|"+C}).join("|"),d="(\\s*"+t+"\\s*|"+p+"|\\s+)",m=new RegExp(d,"g"),v=n.split(m).filter(function(_){return _&&_!=="undefined"}),f=v.length,g=[],y=[];function w(){return y.length?(g.push(y.join("")),y=[],!0):!1}for(var x=function(_){var E=v[_].trim(),C=_,A=Gt(h,function(P){var H=P.open;return H===E}),z=Gt(h,function(P){var H=P.close;return H===E});if(A){if(C=pi(A,v,_,f,h),C!==-1&&c)return w()&&s||(g.push(v.slice(_,C+1).join("")),_=C,s)?(j=_,"break"):(j=_,"continue")}else if(z&&!fn(z,v,_)){var k=Xl(h);return k.splice(h.indexOf(z),1),{value:gi(n,{separator:t,isSeparateFirst:s,isSeparateOnlyOpenClose:a,isSeparateOpenClose:c,openCloseCharacters:k})}}else if(Hl(E,t)&&!a)return w(),s?(j=_,"break"):(j=_,"continue");C===-1&&(C=f-1),y.push(v.slice(_,C+1).join("")),_=C,j=_},j,S=0;S<f;++S){var T=x(S);if(S=j,typeof T=="object")return T.value;if(T==="break")break}return y.length&&g.push(y.join("")),g}function ql(n){return gi(n,",")}function Ul(n){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(n);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],o=e[2],t=e[3];return{prefix:i,unit:t,value:parseFloat(o)}}function mi(n){return n.replace(/[\s-_]+([^\s-_])/g,function(e,i){return i.toUpperCase()})}function Hn(){return Date.now?Date.now():new Date().getTime()}function vi(n,e,i){i===void 0&&(i=-1);for(var o=n.length,t=0;t<o;++t)if(e(n[t],t,n))return t;return i}function Gt(n,e,i){var o=vi(n,e);return o>-1?n[o]:i}function Z(n,e){var i=Ul(n),o=i.value,t=i.unit;if(Te(e)){var s=e[t];if(s){if(Vl(s))return s(o);if(Ke[t])return Ke[t](o,s)}}else if(t==="%")return o*e/100;return Ke[t]?Ke[t](o):o}function ie(n,e,i){return Math.max(e,Math.min(n,i))}function Gl(n,e){if(!e)return n;var i=1/e;return Math.round(n/e)/i}function _e(n,e){n.classList?n.classList.add(e):n.className+=" "+e}function R(n,e,i,o){n.addEventListener(e,i,o)}function O(n,e,i,o){n.removeEventListener(e,i,o)}function pn(n){return(n==null?void 0:n.ownerDocument)||Bl}function Ee(n){var e;return((e=n==null?void 0:n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||window}function Zl(n){return n&&"postMessage"in n&&"blur"in n&&"self"in n}function Wn(n){return Te(n)&&n.nodeName&&n.nodeType&&"ownerDocument"in n}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zt=function(){return Zt=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Zt.apply(this,arguments)};function Jl(){for(var n=0,e=0,i=arguments.length;e<i;e++)n+=arguments[e].length;for(var o=Array(n),t=0,e=0;e<i;e++)for(var s=arguments[e],a=0,l=s.length;a<l;a++,t++)o[t]=s[a];return o}var Kl=function(){function n(){this._events={}}var e=n.prototype;return e.on=function(i,o){if(Te(i))for(var t in i)this.on(t,i[t]);else this._addEvent(i,o,{});return this},e.off=function(i,o){if(!i)this._events={};else if(Te(i))for(var t in i)this.off(t);else if(!o)this._events[i]=[];else{var s=this._events[i];if(s){var a=vi(s,function(l){return l.listener===o});a>-1&&s.splice(a,1)}}return this},e.once=function(i,o){var t=this;return o&&this._addEvent(i,o,{once:!0}),new Promise(function(s){t._addEvent(i,s,{once:!0})})},e.emit=function(i,o){var t=this;o===void 0&&(o={});var s=this._events[i];if(!i||!s)return!0;var a=!1;return o.eventType=i,o.stop=function(){a=!0},o.currentTarget=this,Jl(s).forEach(function(l){l.listener(o),l.once&&t.off(i,l.listener)}),!a},e.trigger=function(i,o){return o===void 0&&(o={}),this.emit(i,o)},e._addEvent=function(i,o,t){var s=this._events;s[i]=s[i]||[];var a=s[i];a.push(Zt({listener:o},t))},n}();const gn=Kl;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Jt=function(n,e){return Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)o.hasOwnProperty(t)&&(i[t]=o[t])},Jt(n,e)};function Ql(n,e){Jt(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var $=function(){return $=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},$.apply(this,arguments)};function ec(n,e){var i=e[0]-n[0],o=e[1]-n[1],t=Math.atan2(o,i);return t>=0?t:t+Math.PI*2}function _t(n){return ec([n[0].clientX,n[0].clientY],[n[1].clientX,n[1].clientY])/Math.PI*180}function tc(n){return n.touches&&n.touches.length>=2}function Qe(n){return n?n.touches?rc(n.touches):[wi(n)]:[]}function nc(n){return n&&(n.type.indexOf("mouse")>-1||"button"in n)}function qn(n,e,i){var o=i.length,t=Le(n,o),s=t.clientX,a=t.clientY,l=t.originalClientX,c=t.originalClientY,u=Le(e,o),h=u.clientX,p=u.clientY,d=Le(i,o),m=d.clientX,v=d.clientY,f=s-h,g=a-p,y=s-m,w=a-v;return{clientX:l,clientY:c,deltaX:f,deltaY:g,distX:y,distY:w}}function Et(n){return Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2))}function rc(n){for(var e=Math.min(n.length,2),i=[],o=0;o<e;++o)i.push(wi(n[o]));return i}function wi(n){return{clientX:n.clientX,clientY:n.clientY}}function Le(n,e){e===void 0&&(e=n.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},o=Math.min(n.length,e),t=0;t<o;++t){var s=n[t];i.originalClientX+="originalClientX"in s?s.originalClientX:s.clientX,i.originalClientY+="originalClientY"in s?s.originalClientY:s.clientY,i.clientX+=s.clientX,i.clientY+=s.clientY}return e?{clientX:i.clientX/e,clientY:i.clientY/e,originalClientX:i.originalClientX/e,originalClientY:i.originalClientY/e}:i}var Tt=function(){function n(e){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=e,this.prevClients=e,this.length=e.length}return n.prototype.getAngle=function(e){return e===void 0&&(e=this.prevClients),_t(e)},n.prototype.getRotation=function(e){return e===void 0&&(e=this.prevClients),_t(e)-_t(this.startClients)},n.prototype.getPosition=function(e,i){e===void 0&&(e=this.prevClients);var o=qn(e||this.prevClients,this.prevClients,this.startClients),t=o.deltaX,s=o.deltaY;return this.movement+=Math.sqrt(t*t+s*s),this.prevClients=e,o},n.prototype.getPositions=function(e){e===void 0&&(e=this.prevClients);for(var i=this.prevClients,o=this.startClients,t=Math.min(this.length,i.length),s=[],a=0;a<t;++a)s[a]=qn([e[a]],[i[a]],[o[a]]);return s},n.prototype.getMovement=function(e){var i=this.movement;if(!e)return i;var o=Le(e,this.length),t=Le(this.prevClients,this.length),s=o.clientX-t.clientX,a=o.clientY-t.clientY;return Math.sqrt(s*s+a*a)+i},n.prototype.getDistance=function(e){return e===void 0&&(e=this.prevClients),Et(e)},n.prototype.getScale=function(e){return e===void 0&&(e=this.prevClients),Et(e)/Et(this.startClients)},n.prototype.move=function(e,i){this.startClients.forEach(function(o){o.clientX-=e,o.clientY-=i}),this.prevClients.forEach(function(o){o.clientX-=e,o.clientY-=i})},n}(),Un=["textarea","input"],xi=function(n){Ql(e,n);function e(i,o){o===void 0&&(o={});var t=n.call(this)||this;t.options={},t.flag=!1,t.pinchFlag=!1,t.data={},t.isDrag=!1,t.isPinch=!1,t.clientStores=[],t.targets=[],t.prevTime=0,t.doubleFlag=!1,t._useMouse=!1,t._useTouch=!1,t._useDrag=!1,t._dragFlag=!1,t._isTrusted=!1,t._isMouseEvent=!1,t._isSecondaryButton=!1,t._preventMouseEvent=!1,t._prevInputEvent=null,t._isDragAPI=!1,t._isIdle=!0,t._preventMouseEventId=0,t._window=window,t.onDragStart=function(d,m){if(m===void 0&&(m=!0),!(!t.flag&&d.cancelable===!1)){var v=d.type.indexOf("drag")>=-1;if(!(t.flag&&v)){t._isDragAPI=!0;var f=t.options,g=f.container,y=f.pinchOutside,w=f.preventWheelClick,x=f.preventRightClick,j=f.preventDefault,S=f.checkInput,T=f.dragFocusedInput,_=f.preventClickEventOnDragStart,E=f.preventClickEventOnDrag,C=f.preventClickEventByCondition,A=t._useTouch,z=!t.flag;if(t._isSecondaryButton=d.which===3||d.button===2,w&&(d.which===2||d.button===1)||x&&(d.which===3||d.button===2))return t.stop(),!1;if(z){var k=t._window.document.activeElement,P=d.target;if(P){var H=P.tagName.toLowerCase(),ht=Un.indexOf(H)>-1,Ye=P.isContentEditable;if(ht||Ye){if(S||!T&&k===P)return!1;if(k&&(k===P||Ye&&k.isContentEditable&&k.contains(P)))if(T)P.blur();else return!1}else if((j||d.type==="touchstart")&&k){var ft=k.tagName.toLowerCase();(k.isContentEditable||Un.indexOf(ft)>-1)&&k.blur()}(_||E||C)&&R(t._window,"click",t._onClick,!0)}t.clientStores=[new Tt(Qe(d))],t._isIdle=!1,t.flag=!0,t.isDrag=!1,t._isTrusted=m,t._dragFlag=!0,t._prevInputEvent=d,t.data={},t.doubleFlag=Hn()-t.prevTime<200,t._isMouseEvent=nc(d),!t._isMouseEvent&&t._preventMouseEvent&&t._allowMouseEvent();var pt=t._preventMouseEvent||t.emit("dragStart",$($({data:t.data,datas:t.data,inputEvent:d,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,isTrusted:m,isDouble:t.doubleFlag},t.getCurrentStore().getPosition()),{preventDefault:function(){d.preventDefault()},preventDrag:function(){t._dragFlag=!1}}));pt===!1&&t.stop(),t._isMouseEvent&&t.flag&&j&&d.preventDefault()}if(!t.flag)return!1;var jn=0;if(z?(t._attchDragEvent(),A&&y&&(jn=setTimeout(function(){R(g,"touchstart",t.onDragStart,{passive:!1})}))):A&&y&&O(g,"touchstart",t.onDragStart),t.flag&&tc(d)){if(clearTimeout(jn),z&&d.touches.length!==d.changedTouches.length)return;t.pinchFlag||t.onPinchStart(d)}}}},t.onDrag=function(d,m){if(t.flag){var v=t.options.preventDefault;!t._isMouseEvent&&v&&d.preventDefault(),t._prevInputEvent=d;var f=Qe(d),g=t.moveClients(f,d,!1);if(t._dragFlag){if(t.pinchFlag||g.deltaX||g.deltaY){var y=t._preventMouseEvent||t.emit("drag",$($({},g),{isScroll:!!m,inputEvent:d}));if(y===!1){t.stop();return}}t.pinchFlag&&t.onPinch(d,f)}t.getCurrentStore().getPosition(f,!0)}},t.onDragEnd=function(d){if(t.flag){var m=t.options,v=m.pinchOutside,f=m.container,g=m.preventClickEventOnDrag,y=m.preventClickEventOnDragStart,w=m.preventClickEventByCondition,x=t.isDrag;(g||y||w)&&requestAnimationFrame(function(){t._allowClickEvent()}),!w&&!y&&g&&!x&&t._allowClickEvent(),t._useTouch&&v&&O(f,"touchstart",t.onDragStart),t.pinchFlag&&t.onPinchEnd(d);var j=d!=null&&d.touches?Qe(d):[],S=j.length;S===0||!t.options.keepDragging?t.flag=!1:t._addStore(new Tt(j));var T=t._getPosition(),_=Hn(),E=!x&&t.doubleFlag;t._prevInputEvent=null,t.prevTime=x||E?0:_,t.flag||(t._dettachDragEvent(),t._preventMouseEvent||t.emit("dragEnd",$({data:t.data,datas:t.data,isDouble:E,isDrag:x,isClick:!x,isMouseEvent:t._isMouseEvent,isSecondaryButton:t._isSecondaryButton,inputEvent:d,isTrusted:t._isTrusted},T)),t.clientStores=[],t._isMouseEvent||(t._preventMouseEvent=!0,clearTimeout(t._preventMouseEventId),t._preventMouseEventId=setTimeout(function(){t._preventMouseEvent=!1},200)),t._isIdle=!0)}},t.onBlur=function(){t.onDragEnd()},t._allowClickEvent=function(){O(t._window,"click",t._onClick,!0)},t._onClick=function(d){t._allowClickEvent(),t._allowMouseEvent();var m=t.options.preventClickEventByCondition;m!=null&&m(d)||(d.stopPropagation(),d.preventDefault())},t._onContextMenu=function(d){var m=t.options;m.preventRightClick?t.onDragEnd(d):d.preventDefault()},t._passCallback=function(){};var s=[].concat(i),a=s[0];t._window=Zl(a)?a:Ee(a),t.options=$({checkInput:!1,container:a&&!("document"in a)?Ee(a):a,preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},o);var l=t.options,c=l.container,u=l.events,h=l.checkWindowBlur;if(t._useDrag=u.indexOf("drag")>-1,t._useTouch=u.indexOf("touch")>-1,t._useMouse=u.indexOf("mouse")>-1,t.targets=s,t._useDrag&&s.forEach(function(d){R(d,"dragstart",t.onDragStart)}),t._useMouse&&(s.forEach(function(d){R(d,"mousedown",t.onDragStart),R(d,"mousemove",t._passCallback)}),R(c,"contextmenu",t._onContextMenu)),h&&R(Ee(),"blur",t.onBlur),t._useTouch){var p={passive:!1};s.forEach(function(d){R(d,"touchstart",t.onDragStart,p),R(d,"touchmove",t._passCallback,p)})}return t}return e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},e.prototype.getMovement=function(i){return this.getCurrentStore().getMovement(i)+this.clientStores.slice(1).reduce(function(o,t){return o+t.movement},0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isIdle=function(){return this._isIdle},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(i,o,t,s){s===void 0&&(s=!0),this.flag&&(this.clientStores[0].move(i,o),s&&this.onDrag(t,!0))},e.prototype.move=function(i,o){var t=i[0],s=i[1],a=this.getCurrentStore(),l=a.prevClients;return this.moveClients(l.map(function(c){var u=c.clientX,h=c.clientY;return{clientX:u+t,clientY:h+s,originalClientX:u,originalClientY:h}}),o,!0)},e.prototype.triggerDragStart=function(i){this.onDragStart(i,!1)},e.prototype.setEventData=function(i){var o=this.data;for(var t in i)o[t]=i[t];return this},e.prototype.setEventDatas=function(i){return this.setEventData(i)},e.prototype.getCurrentEvent=function(i){return i===void 0&&(i=this._prevInputEvent),$($({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:i})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var i=this,o=this.targets,t=this.options.container;this.off(),O(this._window,"blur",this.onBlur),this._useDrag&&o.forEach(function(s){O(s,"dragstart",i.onDragStart)}),this._useMouse&&(o.forEach(function(s){O(s,"mousedown",i.onDragStart)}),O(t,"contextmenu",this._onContextMenu)),this._useTouch&&(o.forEach(function(s){O(s,"touchstart",i.onDragStart)}),O(t,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(i){var o=this,t=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>t)){var s=new Tt(Qe(i));this.pinchFlag=!0,this._addStore(s);var a=this.emit("pinchStart",$($({data:this.data,datas:this.data,angle:s.getAngle(),touches:this.getCurrentStore().getPositions()},s.getPosition()),{inputEvent:i,isTrusted:this._isTrusted,preventDefault:function(){i.preventDefault()},preventDrag:function(){o._dragFlag=!1}}));a===!1&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(i,o){if(!(!this.flag||!this.pinchFlag||o.length<2)){var t=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",$($({data:this.data,datas:this.data,movement:this.getMovement(o),angle:t.getAngle(o),rotation:t.getRotation(o),touches:t.getPositions(o),scale:t.getScale(o),distance:t.getDistance(o)},t.getPosition(o)),{inputEvent:i,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(i){if(this.pinchFlag){var o=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var t=this.getCurrentStore();this.emit("pinchEnd",$($({data:this.data,datas:this.data,isPinch:o,touches:t.getPositions()},t.getPosition()),{inputEvent:i}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(i,o,t){var s=this._getPosition(i,t),a=this.isDrag;(s.deltaX||s.deltaY)&&(this.isDrag=!0);var l=!1;return!a&&this.isDrag&&(l=!0),$($({data:this.data,datas:this.data},s),{movement:this.getMovement(i),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:o,isTrusted:this._isTrusted,isFirstDrag:l})},e.prototype._addStore=function(i){this.clientStores.splice(0,0,i)},e.prototype._getPosition=function(i,o){var t=this.getCurrentStore(),s=t.getPosition(i,o),a=this.clientStores.slice(1).reduce(function(u,h){var p=h.getPosition();return u.distX+=p.distX,u.distY+=p.distY,u},s),l=a.distX,c=a.distY;return $($({},s),{distX:l,distY:c})},e.prototype._attchDragEvent=function(){var i=this._window,o=this.options.container,t={passive:!1};this._isDragAPI&&(R(o,"dragover",this.onDrag,t),R(i,"dragend",this.onDragEnd)),this._useMouse&&(R(o,"mousemove",this.onDrag),R(i,"mouseup",this.onDragEnd)),this._useTouch&&(R(o,"touchmove",this.onDrag,t),R(i,"touchend",this.onDragEnd,t),R(i,"touchcancel",this.onDragEnd,t))},e.prototype._dettachDragEvent=function(){var i=this._window,o=this.options.container;this._isDragAPI&&(O(o,"dragover",this.onDrag),O(i,"dragend",this.onDragEnd)),this._useMouse&&(O(o,"mousemove",this.onDrag),O(i,"mouseup",this.onDragEnd)),this._useTouch&&(O(o,"touchstart",this.onDragStart),O(o,"touchmove",this.onDrag),O(i,"touchend",this.onDragEnd),O(i,"touchcancel",this.onDragEnd))},e.prototype._allowMouseEvent=function(){this._preventMouseEvent=!1,clearTimeout(this._preventMouseEventId)},e}(gn);function ic(n,e){return e.replace(/([^}{]*){/gm,function(i,o){return o.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})}function Ce(n,e){return function(i){i&&(n[e]=i)}}function oc(n,e){return function(i){var o=i.prototype;n.forEach(function(t){e(o,t)})}}function sc(n,e){return e===void 0&&(e={}),function(i,o){n.forEach(function(t){var s=e[t]||t;s in i||(i[s]=function(){for(var a,l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var u=(a=this[o])[t].apply(a,l);return u===this[o]?this:u})})}}function ac(n){for(var e=5381,i=n.length;i;)e=e*33^n.charCodeAt(--i);return e>>>0}var lc=ac;function cc(n){return lc(n).toString(36)}function uc(n){if(n&&n.getRootNode){var e=n.getRootNode();if(e.nodeType===11)return e}}function dc(n,e,i){return i.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/mg,function(o,t){var s=t.trim();return(s?ql(s):[""]).map(function(a){var l=a.trim();return l.indexOf("@")===0?l:l.indexOf(":global")>-1?l.replace(/\:global/g,""):l.indexOf(":host")>-1?"".concat(l.replace(/\:host/g,".".concat(n))):l?".".concat(n," ").concat(l):".".concat(n)}).join(", ")+" {"})}function hc(n,e,i,o,t){var s=pn(o),a=s.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("data-styled-id",n),a.setAttribute("data-styled-count","1"),i.nonce&&a.setAttribute("nonce",i.nonce),a.innerHTML=dc(n,e,i),(t||s.head||s.body).appendChild(a),a}function fc(n){var e="rCS"+cc(n);return{className:e,inject:function(i,o){o===void 0&&(o={});var t=uc(i),s=(t||i.ownerDocument||document).querySelector('style[data-styled-id="'.concat(e,'"]'));if(!s)s=hc(e,n,o,i,t);else{var a=parseFloat(s.getAttribute("data-styled-count"))||0;s.setAttribute("data-styled-count","".concat(a+1))}return{destroy:function(){var l,c=parseFloat(s.getAttribute("data-styled-count"))||0;c<=1?(s.remove?s.remove():(l=s.parentNode)===null||l===void 0||l.removeChild(s),s=null):s.setAttribute("data-styled-count","".concat(c-1))}}}}}function mn(n,e){for(var i=n.length,o=0;o<i;++o)if(e(n[o],o))return!0;return!1}function yi(n,e){for(var i=n.length,o=0;o<i;++o)if(e(n[o],o))return n[o];return null}function ji(n){var e=n;if(typeof e>"u"){if(typeof navigator>"u"||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function vn(n,e){try{return new RegExp(n,"g").exec(e)}catch{return null}}function pc(){if(typeof navigator>"u"||!navigator||!navigator.userAgentData)return!1;var n=navigator.userAgentData,e=n.brands||n.uaList;return!!(e&&e.length)}function gc(n,e){var i=vn("("+n+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return i?i[3]:""}function Kt(n){return n.replace(/_/g,".")}function Ae(n,e){var i=null,o="-1";return mn(n,function(t){var s=vn("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!s||t.brand?!1:(i=t,o=s[3]||"-1",t.versionAlias?o=t.versionAlias:t.versionTest&&(o=gc(t.versionTest.toLowerCase(),e)||o),o=Kt(o),!0)}),{preset:i,version:o}}function De(n,e){var i={brand:"",version:"-1"};return mn(n,function(o){var t=bi(e,o);return t?(i.brand=o.id,i.version=o.versionAlias||t.version,i.version!=="-1"):!1}),i}function bi(n,e){return yi(n,function(i){var o=i.brand;return vn(""+e.test,o.toLowerCase())})}var Qt=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],Si=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],en=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],_i=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],Ei=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function Ti(n){return!!Ae(_i,n).preset}function mc(n){var e=ji(n),i=!!/mobi/g.exec(e),o={name:"unknown",version:"-1",majorVersion:-1,webview:Ti(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},t={name:"unknown",version:"-1",majorVersion:-1},s=Ae(Qt,e),a=s.preset,l=s.version,c=Ae(Ei,e),u=c.preset,h=c.version,p=Ae(Si,e);if(o.chromium=!!p.preset,o.chromiumVersion=p.version,!o.chromium){var d=Ae(en,e);o.webkit=!!d.preset,o.webkitVersion=d.version}return u&&(t.name=u.id,t.version=h,t.majorVersion=parseInt(h,10)),a&&(o.name=a.id,o.version=l,o.webview&&t.name==="ios"&&o.name!=="safari"&&(o.webview=!1)),o.majorVersion=parseInt(o.version,10),{browser:o,os:t,isMobile:i,isHints:!1}}function vc(n){var e=navigator.userAgentData,i=(e.uaList||e.brands).slice(),o=n&&n.fullVersionList,t=e.mobile||!1,s=i[0],a=(n&&n.platform||e.platform||navigator.platform).toLowerCase(),l={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!De(_i,i).brand||Ti(ji())},c={name:"unknown",version:"-1",majorVersion:-1};l.webkit=!l.chromium&&mn(en,function(v){return bi(i,v)});var u=De(Si,i);if(l.chromium=!!u.brand,l.chromiumVersion=u.version,!l.chromium){var h=De(en,i);l.webkit=!!h.brand,l.webkitVersion=h.version}var p=yi(Ei,function(v){return new RegExp(""+v.test,"g").exec(a)});if(c.name=p?p.id:"",n&&(c.version=n.platformVersion),o&&o.length){var d=De(Qt,o);l.name=d.brand||l.name,l.version=d.version||l.version}else{var m=De(Qt,i);l.name=m.brand||l.name,l.version=m.brand&&n?n.uaFullVersion:m.version}return l.webkit&&(c.name=t?"ios":"mac"),c.name==="ios"&&l.webview&&(l.version="-1"),c.version=Kt(c.version),l.version=Kt(l.version),c.majorVersion=parseInt(c.version,10),l.majorVersion=parseInt(l.version,10),{browser:l,os:c,isMobile:t,isHints:!0}}function wc(n){return typeof n>"u"&&pc()?vc():mc(n)}var tn=function(n,e){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])},tn(n,e)};function wn(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");tn(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var X=function(){return X=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},X.apply(this,arguments)};function xc(n,e,i,o){var t=arguments.length,s=t<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,i,o);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(s=(t<3?a(s):t>3?a(e,i,s):a(e,i))||s);return t>3&&s&&Object.defineProperty(e,i,s),s}function Gn(n,e,i){if(i||arguments.length===2)for(var o=0,t=e.length,s;o<t;o++)(s||!(o in e))&&(s||(s=Array.prototype.slice.call(e,0,o)),s[o]=e[o]);return n.concat(s||Array.prototype.slice.call(e))}var yc=wc(),jc=yc.browser.name==="safari",le="infinite-viewer-",Zn="".concat(le,"wrapper"),Jn="".concat(le,"scroll-area"),bc="".concat(le,"scroll-bar"),Ii="".concat(le,"horizontal-scroll-bar"),Ci="".concat(le,"vertical-scroll-bar"),Kn="".concat(le,"scroll-thumb"),Di=fc(ic(le,`
{
    position: relative;
    overscroll-behavior: none;
}
.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: auto;
    scrollbar-width: none;
    top: 0;
    left: 0;
    will-change: scroll-position;
}
.restrict-wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
}
.wrapper::-webkit-scrollbar {
    display: none;
}
.scroll-area {
    position:absolute;
    top:0;
    left:0;
    transform-origin: 0 0;
}
.scroll-bar {
    position:absolute;
    width: 10px;
    height: 10px;
    box-sizing: border-box;
    right: 0;
    bottom: 0;
    overflow: hidden;
}
.horizontal-scroll-bar {
    width: calc(100% - 20px);
    right: 10px;
    height: 14px;
}
.vertical-scroll-bar {
    height: calc(100% - 20px);
    bottom: 10px;
    width: 14px;
}
.scroll-thumb {
    position:relative;
    opacity: 0.7;
    background: #333;
    border-radius: 3px;
    left: 0px;
    top: 0px;
    z-index: 10;
    width: 6px;
    height: 6px;
    transition: all ease 0.2s;
    opacity: 0;
}
.scroll-bar:hover .scroll-thumb {
    border-radius: 5px;
    opacity: 1;
}
.horizontal-scroll-bar .scroll-thumb {
    margin: 4px 0px;
    transition-property: opacity, margin, height, border-radius;
}
.vertical-scroll-bar .scroll-thumb {
    margin: 0px 4px;
    transition-property: opacity, margin, width, border-radius;
}
.horizontal-scroll-bar:hover .scroll-thumb {
    height: 10px;
    margin: 2px 0px;
}
.vertical-scroll-bar:hover .scroll-thumb {
    width: 10px;
    margin: 0px 2px;
}
`)),M={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:jc,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0,useBounceScrollBar:!1,useOverflowScroll:!1},Qn=function(n){return 1-Math.pow(1-n,3)},er={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},Oi=Di.className,xn=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","zoomRangeX","zoomRangeY","pinchDirection","useOverflowScroll"],Sc=Gn(Gn([],xn,!0),["preventWheelClick","useWheelPinch","useWheelScroll","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer","useBounceScrollBar"],!1),Ri=["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],_c=["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer","setTo","setBy"],Ec=1e-6;function Tc(n){var e=n.deltaX,i=n.deltaY,o=n.datas,t=Date.now(),s=o.speed;if(!s){o.speed=[0,0],o.time=t;return}var a=t-o.time;o.speed=[s[0]/2+e/a,s[1]/2+i/a]}function Ni(n,e){var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.abs(i/e)}function Ic(n,e){var i=Ni(n,e);return[-n[0]/2*i,-n[1]/2*i]}function q(n){return Math.abs(n)}function Cc(n,e,i,o,t){var s=t||isFinite(i[0])?i[0]:Math.min(-1,Math.floor(n/e))*e-o,a=t||isFinite(i[1])?i[1]:Math.max(1,Math.ceil(n/e))*e+o;return[s,a]}function tr(n,e){return n??e}function nr(n,e,i){var o=i.duration,t=i.easing||function(c){return 1-Math.pow(1-c,3)},s=Date.now(),a=s,l=function(){var c=Date.now(),u=c-s;o<u&&(u=o);var h=t(u/o),p=t((a-s)/o);a=c,n(h-p),!(u>=o)&&e(l)};e(l)}var rr=function(n){wn(e,n);function e(o,t,s){var a=n.call(this)||this;a.type=t,a.isAppend=!1,a.size=0,a.scrollSize=0,a.isHorizontal=!1,a._onDragStart=function(p){var d=a.isHorizontal,m=p.inputEvent.target,v=p.datas,f=a.thumbElement===m;f||setTimeout(function(){requestAnimationFrame(function(){var g=a.thumbElement.getBoundingClientRect(),y=g[d?"left":"top"],w=g[d?"width":"height"],x=y+w,j=p[d?"clientX":"clientY"];if(!(y<=j&&j<=x)){var S=a.size,T=S*S/a.scrollSize;a.scrollBy(y<j?T:-T)}})},100),v.isThumb=f,p.inputEvent.stopPropagation(),p.inputEvent.preventDefault()},a._onDrag=function(p){p.datas.isThumb&&a.scrollBy(a.isHorizontal?p.deltaX:p.deltaY)},a._onWheel=function(p){var d=a.isHorizontal?p.deltaX:p.deltaY;d&&p.preventDefault(),a.trigger("scroll",{delta:d})};var l=t==="horizontal",c=pn(o),u,h=s;return s?u=s.querySelector(".".concat(Kn)):(h=c.createElement("div"),u=c.createElement("div"),h.insertBefore(u,null),a.isAppend=!0),_e(h,l?Ii:Ci),_e(h,bc),_e(u,Kn),a.thumbElement=u,a.barElement=h,a.isHorizontal=l,a.gesto=new xi(h,{container:Ee(c)}).on("dragStart",function(p){return a._onDragStart(p)}).on("drag",function(p){return a._onDrag(p)}),R(a.barElement,"wheel",a._onWheel,{passive:!1}),a}var i=e.prototype;return i.scrollBy=function(o,t){var s=o/this.size;this.trigger("scroll",{delta:t?o:this.scrollSize*s})},i.render=function(o,t,s,a){this.size=s,this.scrollSize=a;var l=o&&Gl(a-s,.001)>0?1:0,c=this.isHorizontal?["X","width"]:["Y","height"],u=c[0],h=c[1],p=s/a*100,d=Math.max(0,t)/a*100;this.thumbElement.style.cssText+="".concat(h,": ").concat(p,"%;opacity: ").concat(l,";")+"transform: translate".concat(u,"(").concat(100/p*d,"%)")},i.destroy=function(){O(this.barElement,"wheel",this._onWheel),this.gesto.off(),this.off()},e}(gn),Dc=function(n){wn(e,n);function e(o,t,s){t===void 0&&(t={}),s===void 0&&(s={});var a=n.call(this)||this;return a._containerElement=o,a.offsetX=0,a.offsetY=0,a.containerWidth=0,a.containerHeight=0,a.viewportWidth=0,a.viewportHeight=0,a.viewportScrollWidth=0,a.viewportScrollHeight=0,a.scrollLeft=0,a.scrollTop=0,a._scrollTimer=0,a._zoomTimer=0,a._viewportElement=null,a._wheelContainerElement=null,a.dragFlag=!1,a.isLoop=!1,a._tempScale=[1,1],a._tempRect=null,a._tempRectTimer=null,a._onDestroys=[],a._asLeft=0,a._asTop=0,a.resize=function(){var l=a._containerElement,c=l.offsetWidth,u=l.offsetHeight,h=a._viewportElement,p=h.offsetWidth,d=h.offsetHeight,m=h.scrollWidth,v=h.scrollHeight;a.containerWidth=c,a.containerHeight=u,a.viewportWidth=p,a.viewportHeight=d,a.viewportScrollWidth=Math.max(p,m),a.viewportScrollHeight=Math.max(d,v),a.render(),a._scrollBy(0,0)},a._onScroll=function(){var l=a.wrapperElement,c=l.scrollLeft,u=l.scrollTop,h=a.zoom,p=h===void 0?M.zoom:h,d=c-a.scrollLeft,m=u-a.scrollTop,v=a.getScrollLeft(),f=a.getScrollTop();a.isLoop&&(a.isLoop=!1),a.scrollLeft=c,a.scrollTop=u,a.scrollTo(v+d/p,f+m/p)},a.onWheel=function(l){var c=a.options,u=c.pinchDirection,h=c.maxPinchWheel||1/0,p=l["".concat(a.wheelPinchKey,"Key")]||l.ctrlKey;if(c.useWheelPinch&&p){var d=l.deltaY,m=d>=0?1:-1,v=Math.min(h,Math.abs(d));d=m*v;var f=-d,g=Math.max(1+f*(c.wheelScale||.01),Ec);clearTimeout(a._tempRectTimer),a._tempRectTimer=window.setTimeout(function(){a._tempRect=null},100),a._triggerPinch({distance:v,scale:g,rotation:0,zoom:a.zoom*g,zoomX:a.zoomX*(u==="vertical"?1:g),zoomY:a.zoomY*(u==="horizontal"?1:g),inputEvent:l,isWheel:!0,clientX:l.clientX,clientY:l.clientY,ratioX:0,ratioY:0})}else if(c.useWheelScroll){var y=l.deltaX,d=l.deltaY;l.shiftKey&&!y&&(y=d,d=0),a.scrollBy(y/a.zoomX,d/a.zoomY)}else return;l.preventDefault()},a.onGestureStart=function(l){a._tempScale=[a.zoomX,a.zoomY],a._setClientRect(),l.preventDefault()},a.onGestureChange=function(l){if(l.preventDefault(),a.gesto.isFlag()||!a._tempScale){a._tempScale=[1,1];return}var c=l.scale,u=a._tempScale[0],h=a._tempScale[1],p=a.options.pinchDirection;a._triggerPinch({distance:0,scale:c,rotation:l.rotation,inputEvent:l,isWheel:!0,zoom:(u+h)*c/2,zoomX:u*(p==="vertical"?1:c),zoomY:h*(p==="horizontal"?1:c),clientX:l.clientX,clientY:l.clientY,ratioX:0,ratioY:0})},a.onGestureEnd=function(){},Wn(t)?(a._viewportElement=t,a.options=X(X({},M),s)):(a._viewportElement=o.children[0],a.options=X(X({},M),t)),a.init(),a}var i=e.prototype;return i.getContainer=function(){return this._containerElement},i.getWheelContainer=function(){return this._wheelContainerElement},i.getViewport=function(){return this._viewportElement},i.getWrapper=function(){return this.wrapperElement},i.geScrollArea=function(){return this.scrollAreaElement},i.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var o=this._containerElement;this._onDestroys.forEach(function(t){t()}),O(this.wrapperElement,"scroll",this._onScroll),O(this._wheelContainerElement,"wheel",this.onWheel),O(o,"gesturestart",this.onGestureStart),O(o,"gesturechange",this.onGestureChange),O(o,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},i.getScrollTop=function(o){o===void 0&&(o={});var t=!1,s=!1;Te(o)?(t=o.range,s=o.absolute):t=o;var a=this.zoomY,l=this.scrollTop/a+this.offsetY+(t?q(this.getRangeY()[0]):0);return s?l*a:l},i.getScrollLeft=function(o){o===void 0&&(o={});var t=!1,s=!1;Te(o)?(t=o.range,s=o.absolute):t=o;var a=this.zoomX,l=this.scrollLeft/a+this.offsetX+(t?q(this.getRangeX()[0]):0);return s?l*a:l},i.getScrollWidth=function(o){var t=this._getScrollRangeX(),s=this.zoomX,a=this.containerWidth/s+q(t[0])+t[1];return o?a:a*s},i.getScrollHeight=function(o){var t=this._getScrollRangeY(),s=this.zoomY,a=this.containerHeight/s+q(t[0])+t[1];return o?a:a*s},i.scrollCenter=function(o){o===void 0&&(o={}),this.resize();var t=this.zoomX,s=this.zoomY,a=-(this.containerWidth/t-this.viewportWidth)/2,l=-(this.containerHeight/s-this.viewportHeight)/2;return o.absolute&&(a*=t,l*=s),o.horizontal===!1&&(a=this.getScrollLeft()),o.vertical===!1&&(l=this.getScrollTop()),this.scrollTo(a,l,o)},i.setTo=function(o){var t=o.x,s=t===void 0?this.getScrollLeft():t,a=o.y,l=a===void 0?this.getScrollTop():a,c=o.zoom,u=c===void 0?[this.getZoomX(),this.getZoomY()]:c,h=o.duration,p=this,d=p.zoomX,m=p.zoomY,v=p.zoomRange,f=this,g=f.zoomOffsetX,y=g===void 0?M.zoomOffsetX:g,w=f.zoomOffsetY,x=w===void 0?M.zoomOffsetY:w;"zoomOffsetX"in o&&(y=o.zoomOffsetX),"zoomOffsetY"in o&&(x=o.zoomOffsetY);var j=Ie(u)?u:[u,u],S=j[0],T=j[1],_=this.zoomRangeX||v,E=this.zoomRangeY||v,C=ie(S,_[0],_[1]),A=ie(T,E[0],E[1]),z=Z("".concat(y),this.viewportWidth)*(1/d-1/C),k=Z("".concat(x),this.viewportHeight)*(1/m-1/A);this.scrollTo(s-z,l-k,{duration:h}),this.setZoom(u,{zoomOffsetX:y,zoomOffsetY:x,duration:h,zoomBase:"fixed"})},i.setBy=function(o){var t=o.x,s=t===void 0?0:t,a=o.y,l=a===void 0?0:a,c=o.zoom,u=c===void 0?[0,0]:c,h=Ie(u)?u:[u,u],p=h[0],d=h[1];this.setTo(X(X({},o),{x:this.getScrollLeft()+s,y:this.getScrollTop()+l,zoom:[this.zoomX+p,this.zoomY+d]}))},i.scrollBy=function(o,t,s){if(this._pauseScrollAnimation(),!s||!s.duration){var a=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(a*=this.zoomX,l*=this.zoomY),this._scrollTo(a+o,l+t,s)}else return this._startScrollAnimation([o,t],s),!0},i.scrollTo=function(o,t,s){if(this._pauseScrollAnimation(),!s||!s.duration)return this._scrollTo(o,t,s);var a=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(a*=this.zoomX,l*=this.zoomY),this.scrollBy(o-a,t-l,s)},i.zoomBy=function(o,t){this._pauseZoomAnimation();var s=Ie(o)?o:[o,o],a=s[0],l=s[1];!t||!t.duration?this._setZoom([this.zoomX+a,this.zoomY+l],t):this._startZoomAnimation([a,l],t)},i.setZoom=function(o,t){if(this._pauseZoomAnimation(),!t||!t.duration)this._setZoom(o,t);else{var s=Ie(o)?o:[o,o],a=s[0],l=s[1];this._startZoomAnimation([a-this.zoomX,l-this.zoomY],t)}},i.getViewportWidth=function(){return this.viewportWidth},i.getViewportHeight=function(){return this.viewportWidth},i.getViewportScrollWidth=function(){return this.viewportScrollWidth},i.getViewportScrollHeight=function(){return this.viewportScrollHeight},i.getContainerWidth=function(){return this.containerWidth},i.getContainerHeight=function(){return this.containerHeight},i.getZoom=function(){return(this.zoomX+this.zoomY)/2},i.getZoomX=function(){return this.zoomX},i.getZoomY=function(){return this.zoomY},i.getRangeX=function(o,t){return this._getRangeCoord("horizontal",o,t)},i.getRangeY=function(o,t){return this._getRangeCoord("vertical",o,t)},i.init=function(){var o=this,t,s=this._containerElement,a=this.options,l=pn(s),c=Ee(s),u=a.wrapperElement||s.querySelector(".".concat(Zn)),h=a.scrollAreaElement||s.querySelector(".".concat(Jn)),p=a.horizontalScrollElement||s.querySelector(".".concat(Ii)),d=a.verticalScrollElement||s.querySelector(".".concat(Ci));u||(u=l.createElement("div"),u.insertBefore(this._viewportElement,null),s.insertBefore(u,null)),this.wrapperElement=u,h||(h=l.createElement("div"),u.insertBefore(h,u.firstChild)),this.scrollAreaElement=h,_e(s,Oi),_e(u,Zn),_e(h,Jn);var m=new rr(s,"horizontal",p),v=new rr(s,"vertical",d);this.horizontalScrollbar=m,this.verticalScrollbar=v,m.on("scroll",function(w){o.scrollBy(w.delta/o.zoomX,0)}),v.on("scroll",function(w){o.scrollBy(0,w.delta/o.zoomY)}),m.isAppend&&s.insertBefore(m.barElement,null),v.isAppend&&s.insertBefore(v.barElement,null),this.injectResult=Di.inject(s,{nonce:this.options.cspNonce});var f=a.wheelContainer,g=null;if(f&&(fi(f)?g=l.querySelector(f):Wn(f)?g=f:("value"in f||"current"in f)&&(g=f.current||f.value)),g||(g=s),this._wheelContainerElement=g,this.gesto=new xi(s,{container:Ee(s),events:["touch","mouse"],preventWheelClick:(t=this.options.preventWheelClick)!==null&&t!==void 0?t:!0}).on("dragStart",function(w){var x=w.inputEvent,j=w.stop,S=w.datas;if(!o.useMouseDrag&&w.isMouseEvent){j();return}o._pauseScrollAnimation(),o.dragFlag=!1;var T=o.trigger("dragStart",w);if(T===!1){j();return}x.preventDefault(),S.startEvent=x}).on("drag",function(w){!o.options.usePinch||w.isPinch||o.useMouseDrag&&w.isMouseEvent?(o.trigger("drag",X(X({},w),{inputEvent:w.inputEvent})),Tc(w),o.scrollBy(-w.deltaX/o.zoomX,-w.deltaY/o.zoomY)):!o.dragFlag&&w.movement>a.pinchThreshold&&(o.dragFlag=!0,o.trigger("abortPinch",{inputEvent:w.datas.startEvent||w.inputEvent}))}).on("dragEnd",function(w){o.trigger("dragEnd",{isDrag:w.isDrag,isDouble:w.isDouble,inputEvent:w.inputEvent}),o._startScrollAnimationBySpeed(w.datas.speed)}).on("pinchStart",function(w){var x=w.inputEvent,j=w.datas,S=w.stop;x.preventDefault(),o._pauseScrollAnimation(),j.startZoom=[o.zoomX,o.zoomY];var T=o.trigger("pinchStart",{inputEvent:x});T===!1&&S(),o._setClientRect()}).on("pinch",function(w){var x=w.scale,j=o.options.pinchDirection;o._triggerPinch({rotation:w.rotation,distance:w.distance,scale:w.scale,inputEvent:w.inputEvent,isWheel:!1,zoom:w.datas.startZoom*x,zoomX:o.zoomX*(j==="vertical"?1:x),zoomY:o.zoomY*(j==="horizontal"?1:x),clientX:w.clientX,clientY:w.clientY,ratioX:0,ratioY:0})}).on("pinchEnd",function(){o._tempRect=null}),R(u,"scroll",this._onScroll),a.useResizeObserver){var y=new c.ResizeObserver(function(){o.resize()});y.observe(this._viewportElement),y.observe(this._containerElement),this._onDestroys.push(function(){y.disconnect()})}else R(c,"resize",this.resize),this._onDestroys.push(function(){O(c,"resize",o.resize)});(a.useWheelPinch||a.useWheelScroll)&&R(g,"wheel",this.onWheel,{passive:!1}),a.useGesture&&(R(s,"gesturestart",this.onGestureStart,{passive:!1}),R(s,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},i.render=function(){var o=this,t=o.offsetX,s=o.offsetY,a=o.zoomX,l=a===void 0?M.zoomX:a,c=o.zoomY,u=c===void 0?M.zoomY:c,h=o.translateZ,p=h===void 0?0:h;o.rangeX,o.rangeY,o.containerWidth,o.containerHeight;var d=this.options.useTransform,m=d===void 0?M.useTransform:d,v=-t*l,f=-s*u;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var g=this._viewportElement.style;m===!1?g.cssText+="position: relative; left: ".concat(v,"px; top: ").concat(f,"px; "):g.cssText+="transform-origin: 0 0;"+"transform:translate3d(".concat(v,"px, ").concat(f,"px, ").concat(p,"px) scale(").concat(l,", ").concat(u,");"),this.renderScroll()},i.renderScroll=function(){var o=this,t=o.zoomX,s=o.zoomY,a=o.containerWidth,l=o.containerHeight,c=this.horizontalScrollbar,u=this.verticalScrollbar;if(this.options.useBounceScrollBar){var h=this.getScrollLeft(!0)*t,p=this.getRangeX(!0),d=a+q(p[0])+q(p[1]),m=this.getScrollTop(!0)*s,v=this.getRangeY(!0),f=l+q(v[0])+q(v[1]);c.render(this.displayHorizontalScroll,h,a,d),u.render(this.displayVerticalScroll,m,l,f)}else{var g=this._getScrollRangeX(),y=this._getScrollRangeY(),h=this.getScrollLeft(),m=this.getScrollTop(),d=this.containerWidth+q(g[0])+g[1],f=this.containerHeight+q(y[0])+y[1];c.render(this.displayHorizontalScroll,h-g[0],a,d),u.render(this.displayVerticalScroll,m-y[0],l,f)}},i.move=function(o,t){var s=this.wrapperElement;s.scrollLeft=o,s.scrollTop=t},i.setDisplayVerticalScroll=function(o){this.options.displayVerticalScroll=o,this.renderScroll()},i.setDisplayHorizontalScroll=function(o){this.options.displayHorizontalScroll=o,this.renderScroll()},i._startZoomAnimation=function(o,t){var s=this;if(o){var a=t.duration,l=t.easing||Qn;nr(function(c){return s._setZoom([s.zoomX+o[0]*c,s.zoomY+o[1]*c],t)},function(c){s._zoomTimer=requestAnimationFrame(c)},{easing:l,duration:a})}},i._startScrollAnimation=function(o,t){var s=this;if(!(!o[0]&&!o[1])){var a=t.duration,l=t.easing||Qn;nr(function(c){return s._scrollBy(o[0]*c,o[1]*c,t)},function(c){s._scrollTimer=requestAnimationFrame(c)},{easing:l,duration:a})}},i._startScrollAnimationBySpeed=function(o){if(!(!o||!o[0]&&!o[1])){var t=-6e-4,s=Ni(o,t),a=Ic(o,t);return this._startScrollAnimation(a,{duration:s})}},i._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},i._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},i.getScrollAreaWidth=function(){var o=this.getRangeX(!0),t=o[0],s=o[1];return t||s?this.margin*2:0},i.getScrollAreaHeight=function(){var o=this.getRangeY(!0),t=o[0],s=o[1];return t||s?this.margin*2:0},i._triggerPinch=function(o){var t=o.clientX,s=o.clientY,a=o.zoomX,l=o.zoomY;this.useAutoZoom&&this._zoomByClient([a,l],t,s),this._tempRect||this._setClientRect();var c=this.zoomRange,u=this.zoomRangeX||c,h=this.zoomRangeY||c,p=this._tempRect,d=p.left,m=p.top,v=p.width,f=p.height,g=(t-d)/v*100,y=(s-m)/f*100;this.trigger("pinch",X(X({},o),{zoom:ie((a+l)/2,c[0],c[1]),zoomX:ie(a,u[0],u[1]),zoomY:ie(l,h[0],h[1]),ratioX:g,ratioY:y}))},i._setClientRect=function(){var o=this.getContainer().getBoundingClientRect();this._tempRect={left:o.left,top:o.top,width:o.width,height:o.height}},i._zoomByClient=function(o,t,s){this._tempRect||this._setClientRect();var a=this._tempRect,l=a.left,c=a.top,u=a.width,h=a.height,p=this.options,d=p.zoomOffsetX,m=p.zoomOffsetY;p.zoomOffsetX="".concat((t-l)/u*100,"%"),p.zoomOffsetY="".concat((s-c)/h*100,"%"),this._setZoom(o,{zoomBase:"screen"}),p.zoomOffsetX=d,p.zoomOffsetY=m},i._setZoom=function(o,t){t===void 0&&(t={});var s=t.zoomBase,a=this,l=a.containerWidth,c=a.containerHeight,u=a.zoomX,h=a.zoomY,p=a.zoomRange,d=this,m=d.zoomOffsetX,v=m===void 0?M.zoomOffsetX:m,f=d.zoomOffsetY,g=f===void 0?M.zoomOffsetY:f;"zoomOffsetX"in t&&(v=t.zoomOffsetX),"zoomOffsetY"in t&&(g=t.zoomOffsetY);var y=this.getScrollLeft(),w=this.getScrollTop(),x=Ie(o)?o:[o,o],j=x[0],S=x[1],T=this.zoomRangeX||p,_=this.zoomRangeY||p,E=ie(j,T[0],T[1]),C=ie(S,_[0],_[1]),A=this.options;A.zoomX=E,A.zoomY=C,A.zoom=(E+C)/2;var z=this.getScrollLeft(),k=this.getScrollTop(),P=0,H=0;s==="fixed"?(P=Z("".concat(v),this.viewportWidth),H=Z("".concat(g),this.viewportHeight)):s==="viewport"?(P=(-y+Z("".concat(v),this.viewportWidth))*u,H=(-w+Z("".concat(g),this.viewportHeight))*h):(P=Z("".concat(v),l),H=Z("".concat(g),c));var ht=y+P/u,Ye=w+H/h,ft=z+P/E,pt=k+H/C;this._scrollBy(ht-ft,Ye-pt,{zoom:!!(E-u||C-h)}),this.render()},i._scrollBy=function(o,t,s){var a=this.getScrollLeft(),l=this.getScrollTop();return s!=null&&s.absolute&&(a*=this.zoomX,l*=this.zoomY),this._scrollTo(a+o,l+t,s)},i._scrollTo=function(o,t,s){var a=this,l=this,c=l.scrollLeft,u=l.scrollTop,h=s==null?void 0:s.absolute;this._scrollToType("horizontal",o,h),this._scrollToType("vertical",t,h);var p=this.scrollLeft,d=this.scrollTop;this.render();var m=this.getScrollLeft(),v=this.getScrollTop();return this._emitScrollEvent(m,v,s==null?void 0:s.zoom),Math.round(c)!==p||Math.round(u)!==d?(this.isLoop=!0,this.move(p,d),requestAnimationFrame(function(){if(a.isLoop){a.isLoop=!1;var f=a.wrapperElement,g=f.scrollLeft,y=f.scrollTop;a.scrollLeft=g,a.scrollTop=y,(p!==Math.round(g)||d!==Math.round(y))&&a._scrollTo(m,v)}}),!1):!0},i._scrollToType=function(o,t,s){var a=er[o],l=this,c=l.margin,u=c===void 0?M.margin:c,h=l.threshold,p=h===void 0?M.threshold:h,d=this["scroll".concat(a.pos)],m=this["getRange".concat(a.coord)](!0,!0),v=m[0],f=m[1],g=Math.round(d),y=this["getScrollArea".concat(a.size)](),w=this["zoom".concat(a.coord)];s&&(t=t/w);var x=t*w;if(v===f)g=v,t=v/w;else if(x-p<=v){var j=Math.max(0,x-v);g=j,t=(v+j)/w}else if(x+p>=f){var S=Math.max(0,f-x);g=y-S,t=(f-S)/w}else g<p?g+=u:g>y-p&&(g-=u);g=Math.round(g),this["scroll".concat(a.pos)]=g,this["offset".concat(a.coord)]=t-g/w},i._getRangeCoord=function(o,t,s){var a=this,l=a.margin,c=l===void 0?M.margin:l,u=a.threshold,h=er[o],p=tr(this["range".concat(h.coord)],M["range".concat(h.coord)]),d=tr(this["rangeOffset".concat(h.coord)],M["rangeOffset".concat(h.coord)]),m=this["zoom".concat(h.coord)],v=Cc(this["getScroll".concat(h.pos)](),c,p,u,s);return t?[v[0]*m+d[0],this.options.useOverflowScroll?Math.max(this["viewport".concat(h.size)]*m-this["container".concat(h.size)],v[1]*m+d[1]):v[1]*m+d[1]]:[v[0]+d[0],v[1]+d[1]]},i._emitScrollEvent=function(o,t,s){var a=this._asLeft,l=this._asTop;!s&&a===o&&l===t||(this._asLeft=o,this._asTop=t,this.trigger("scroll",{scrollLeft:o,scrollTop:t,zoomX:this.zoomX,zoomY:this.zoomY}))},i._getScrollRangeX=function(){var o=this.getScrollLeft(),t=this.rangeX,s=t[0],a=t[1];this.useOverflowScroll&&isFinite(a)&&(a=Math.max(a,this.viewportWidth-this.containerWidth/this.zoomX));var l=Math.min(0,isFinite(s)?Math.min(s,o):o),c=Math.max(0,isFinite(a)?Math.max(a,o):o),u=this.viewportScrollWidth,h=Math.max(this.containerWidth/this.zoomX,u)-u,p=Math.min(0,h+l);return[p,c]},i._getScrollRangeY=function(){var o=this.getScrollTop(),t=this.rangeY,s=t[0],a=t[1];this.useOverflowScroll&&isFinite(a)&&(a=Math.max(a,this.viewportHeight-this.containerHeight/this.zoomY));var l=Math.min(0,isFinite(s)?Math.min(s,o):o),c=Math.max(0,isFinite(a)?Math.max(a,o):o),u=this.viewportScrollHeight,h=Math.max(this.containerHeight/this.zoomY,u)-u,p=Math.min(0,h+l);return[p,c]},e=xc([oc(xn,function(o,t){var s={enumerable:!0,configurable:!0,get:function(){return this.options[t]}},a=mi("set ".concat(t));o[a]?s.set=function(l){this[a](l)}:s.set=function(l){this.options[t]=l},Object.defineProperty(o,t,s)})],e),e}(gn),Oc=function(n){wn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(Dc);const Rc=Oc,oe=window.React.createElement,Nc=window.React.PureComponent;var nn=function(n,e){return nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])},nn(n,e)};function $c(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");nn(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var st=function(){return st=Object.assign||function(e){for(var i,o=1,t=arguments.length;o<t;o++){i=arguments[o];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},st.apply(this,arguments)};function Fc(n,e,i,o){var t=arguments.length,s=t<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,i):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,i,o);else for(var l=n.length-1;l>=0;l--)(a=n[l])&&(s=(t<3?a(s):t>3?a(e,i,s):a(e,i))||s);return t>3&&s&&Object.defineProperty(e,i,s),s}var ir=Ri.map(function(n){return mi("on ".concat(n))}),Pc=function(n){$c(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}var i=e.prototype;return i.render=function(){var o=this.props.className;return oe("div",{className:"".concat(o||""," ").concat(Oi),ref:Ce(this,"containerElement")},oe("div",{className:"infinite-viewer-wrapper",ref:Ce(this,"wrapperElement")},oe("div",{className:"infinite-viewer-scroll-area",ref:Ce(this,"scrollAreaElement")}),this.props.children),oe("div",{className:"infinite-viewer-scroll-bar infinite-viewer-horizontal-scroll-bar",ref:Ce(this,"horizontalScrollElement")},oe("div",{className:"infinite-viewer-scroll-thumb"})),oe("div",{className:"infinite-viewer-scroll-bar infinite-viewer-vertical-scroll-bar",ref:Ce(this,"verticalScrollElement")},oe("div",{className:"infinite-viewer-scroll-thumb"})))},i.componentDidMount=function(){var o=this,t=this.props,s={};Sc.forEach(function(a){a in t&&typeof t[a]<"u"&&(s[a]=t[a])}),this.infiniteViewer=new Rc(this.containerElement,this.scrollAreaElement.nextElementSibling,st(st({},s),{wrapperElement:this.wrapperElement,scrollAreaElement:this.scrollAreaElement,horizontalScrollElement:this.horizontalScrollElement,verticalScrollElement:this.verticalScrollElement})),Ri.forEach(function(a,l){o.infiniteViewer.on(a,function(c){var u=o.props,h=u[ir[l]]&&u[ir[l]](c);h===!1&&c.stop()})})},i.componentDidUpdate=function(o){var t=this.props,s=this.infiniteViewer;xn.forEach(function(a){a in t&&s[a]!==t[a]&&(s[a]=t[a])})},i.componentWillUnmount=function(){this.infiniteViewer.destroy()},i.getElement=function(){return this.containerElement},Fc([sc(_c)],e.prototype,"infiniteViewer",void 0),e}(Nc);const kc=Pc,Mc=window.React.forwardRef,Ac=window.React.useImperativeHandle,or=window.React.useState,It=window.antd.Form,zc=window.antd.Input,Lc=window.antd.Modal;function Bc(n,e){const[i,o]=or(!1),[t,s]=or(),[a]=It.useForm();Ac(e,()=>({open(u,h){o(!0),s({callback:h}),a.setFieldsValue({title:u})}}));const l=()=>{o(!1)},c=()=>{a.validateFields().then(u=>{t==null||t.callback(u.title),o(!1)}).catch(u=>{console.log(u)})};return r.jsx(r.Fragment,{children:r.jsx(Lc,{title:"节点修改",open:i,onCancel:l,onOk:c,children:r.jsx(It,{form:a,style:{width:"80%",margin:"20px auto 0"},children:r.jsx(It.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入节点名称"}],children:r.jsx(zc,{placeholder:"请输入节点名称"})})})})})}const Yc=Mc(Bc),Xc="_actionBox_wlxnw_2",Vc="_menuAction_wlxnw_8",Hc="_category_wlxnw_18",Wc="_navTitle_wlxnw_24",qc="_subItem_wlxnw_27",Uc="_checked_wlxnw_37",Gc="_content_wlxnw_40",Zc="_desc_wlxnw_44",Jc="_descTitle_wlxnw_44",Kc="_descInfo_wlxnw_47",b={actionBox:Xc,menuAction:Vc,category:Hc,navTitle:Wc,subItem:qc,checked:Uc,content:Gc,desc:Zc,descTitle:Jc,descInfo:Kc},Qc=window.React.useEffect,et=window.antd.Form,eu=window.antd.Divider,tu=window.antd.Input,nu=window.antd.Switch,tt=window.antd.Radio,ru=({form:n})=>(Qc(()=>{n.setFieldsValue({jumpType:"route"})},[]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"跳转到指定页面。1. 系统内跳转会通过自身路由实现；2. 跨服务跳转主要是基于microApp的父子应用通信方式，主应用需要监听数据，并添加跳转代码；3. 超链接跳转通过window.open或location方式实现；"}),r.jsx(eu,{})]}),r.jsx(et.Item,{label:"跳转方式",name:"jumpType",children:r.jsxs(tt.Group,{buttonStyle:"solid",children:[r.jsx(tt.Button,{value:"route",children:"系统内跳转"}),r.jsx(tt.Button,{value:"micro",children:"跨服务跳转"}),r.jsx(tt.Button,{value:"link",children:"超链接跳转"})]})}),r.jsx(et.Item,{label:"页面地址",name:"url",rules:[{required:!0,message:"请输入跳转地址"}],children:r.jsx(tu.TextArea,{placeholder:"请输入页面地址",rows:4})}),r.jsx(et.Item,{noStyle:!0,shouldUpdate:!0,children:()=>n.getFieldValue("jumpType")==="link"?r.jsx(et.Item,{label:"新窗口",name:"isNewWindow",children:r.jsx(nu,{})}):null})]})),iu=window.antd.Divider,ou=()=>r.jsx(r.Fragment,{children:r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"刷新当前页面。"}),r.jsx(iu,{})]})}),su=window.antd.Form,sr=window.antd.Select,au=window.antd.Divider,ar=()=>{const{modals:n}=N(e=>{const i=[];return Object.values(e.page.elementsMap).forEach(o=>{if(o.type==="Modal"){const t=o.config.props.title;i.push({id:o.id,title:typeof t=="string"?t:t.type==="static"?t.value:"动态标题"})}}),{modals:i}});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发一个按钮、表单等事件动作后，可以通过此行为来打开一个弹框，前提是需要先创建一个弹框。"}),r.jsx(au,{})]}),r.jsx(su.Item,{label:"选择弹框",name:"target",rules:[{required:!0,message:"请选择弹框组件"}],children:r.jsx(sr,{children:n.map(e=>r.jsx(sr.Option,{value:e.id,children:`${e.title} (${e.id})`},e.id))})})]})},lu=window.antd.Divider,Ct=window.antd.Form,cu=window.antd.Input,uu=window.antd.InputNumber,Oe=window.antd.Radio,du=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"通过message组件显示反馈提示。"}),r.jsx(lu,{})]}),r.jsx(Ct.Item,{label:"提示类型",name:"type",children:r.jsxs(Oe.Group,{buttonStyle:"solid",optionType:"button",children:[r.jsx(Oe,{value:"success",children:"成功"}),r.jsx(Oe,{value:"info",children:"信息"}),r.jsx(Oe,{value:"warning",children:"警告"}),r.jsx(Oe,{value:"error",children:"错误"})]})}),r.jsx(Ct.Item,{label:"提示内容",name:"content",rules:[{required:!0,message:"请输入提示内容"}],children:r.jsx(cu,{placeholder:"输入提示内容"})}),r.jsx(Ct.Item,{label:"持续时间(秒)",name:"duration",tooltip:"单位是秒，表示几秒后，提示消息消失。",rules:[{required:!0,message:"请输入持续时间"}],children:r.jsx(uu,{placeholder:"eg: 3"})})]}),Re=window.antd.Form,se=window.antd.Select,hu=window.antd.Divider,lr=window.antd.Input,Ne=window.antd.Radio,fu=window.antd.InputNumber,pu=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"点击一个按钮，可以通过此行为来打开一个消息通知弹框，只需要配置通知内容即可。"}),r.jsx(hu,{})]}),r.jsx(Re.Item,{label:"通知类型",name:"type",rules:[{required:!0,message:"请选择弹框类型"}],children:r.jsxs(Ne.Group,{buttonStyle:"solid",optionType:"button",children:[r.jsx(Ne.Button,{value:"info",children:"信息"}),r.jsx(Ne.Button,{value:"success",children:"成功"}),r.jsx(Ne.Button,{value:"warning",children:"警告"}),r.jsx(Ne.Button,{value:"error",children:"错误"})]})}),r.jsx(Re.Item,{label:"通知标题",name:"message",rules:[{required:!0,message:"请输入标题"}],children:r.jsx(lr,{placeholder:"请输入通知标题"})}),r.jsx(Re.Item,{label:"通知内容",name:"description",rules:[{required:!0,message:"请输入内容"}],children:r.jsx(lr,{placeholder:"请输入通知内容"})}),r.jsx(Re.Item,{label:"通知位置",name:"placement",rules:[{required:!0,message:"请选择通知位置"}],children:r.jsxs(se,{placeholder:"请选择通知位置",children:[r.jsx(se.Option,{value:"top",children:"top"}),r.jsx(se.Option,{value:"topLeft",children:"topLeft"}),r.jsx(se.Option,{value:"topRight",children:"topRight"}),r.jsx(se.Option,{value:"bottom",children:"bottom"}),r.jsx(se.Option,{value:"bottomLeft",children:"bottomLeft"}),r.jsx(se.Option,{value:"bottomRight",children:"bottomRight"})]})}),r.jsx(Re.Item,{label:"持续时间(秒)",name:"duration",tooltip:"单位是秒，表示几秒后，消息通知消失。",rules:[{required:!0,message:"请输入持续时间"}],children:r.jsx(fu,{placeholder:"eg: 3"})})]}),$e=window.antd.Form,pe=window.antd.Select,gu=window.antd.Divider,nt=window.antd.Input,mu=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"点击一个按钮，可以通过此行为来打开一个确认弹框，只需要配置确认弹框内容即可。"}),r.jsx(gu,{})]}),r.jsx($e.Item,{label:"确认框类型",name:"type",rules:[{required:!0,message:"请选择弹框类型"}],children:r.jsxs(pe,{placeholder:"请选择确认框类型",children:[r.jsx(pe.Option,{value:"confirm",children:"确认框"}),r.jsx(pe.Option,{value:"info",children:"信息框"}),r.jsx(pe.Option,{value:"success",children:"成功框"}),r.jsx(pe.Option,{value:"warning",children:"警告框"}),r.jsx(pe.Option,{value:"error",children:"错误框"})]})}),r.jsx($e.Item,{label:"确认标题",name:"title",rules:[{required:!0,message:"请输入标题"}],children:r.jsx(nt,{placeholder:"请输入确认标题"})}),r.jsx($e.Item,{label:"显示内容",name:"content",rules:[{required:!0,message:"请输入内容"}],children:r.jsx(nt,{placeholder:"请输入确认内容"})}),r.jsx($e.Item,{label:"确认名称",name:"okText",rules:[{required:!0,message:"请输入确认按钮名称"}],children:r.jsx(nt,{placeholder:"请输入确认按钮名称"})}),r.jsx($e.Item,{label:"取消名称",name:"cancelText",rules:[{required:!0,message:"请输入取消按钮名称"}],children:r.jsx(nt,{placeholder:"请输入取消按钮名称"})})]}),cr=window.antd.Form,vu=window.antd.Divider,wu=window.antd.Input,ur=window.antd.Select,xu=window.React.useRef,dr=({type:n})=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"点击一个按钮，可以通过此行为来发送一个请求。"}),r.jsx(vu,{})]}),r.jsx(cr.Item,{label:"配置请求",name:"id",rules:[{required:!0,message:"请选择请求接口"}],children:r.jsx(yu,{})}),n==="download"&&r.jsx(cr.Item,{label:"文件名称",name:"filename",tooltip:"优先从请求头获取filename作为文件名称，其次获取此处的文件名称",children:r.jsx(wu,{placeholder:"eg: filename.xls"})})]}),yu=({value:n,onChange:e})=>{const i=N(s=>s.page.apis),o=xu(),t=()=>{var s;(s=o.current)==null||s.showModal(n)};return r.jsxs(r.Fragment,{children:[r.jsx(ur,{placeholder:"请选择接口",showSearch:!0,allowClear:!0,value:n,onChange:e,style:{width:"90%"},children:Object.values(i).map(s=>r.jsx(ur.Option,{value:s.id,children:s.name},s.id))}),r.jsx(Yr,{onClick:t,style:{marginLeft:10}}),r.jsx(hn,{update:s=>e(s),ref:o})]})},Fe=window.antd.Form,ju=window.antd.Divider,ge=window.antd.Radio,bu=window.antd.TreeSelect,Su=()=>{const n=N(e=>e.page.elements);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发事件动作后，可以指定目标组件显示和隐藏。"}),r.jsx(ju,{})]}),r.jsx(Fe.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:r.jsx(bu,{allowClear:!0,treeData:n,fieldNames:{label:"name",value:"id",children:"elements"},placeholder:"请选择目标组件"})}),r.jsx(Fe.Item,{label:"显示类型",name:"showType",children:r.jsxs(ge.Group,{children:[r.jsx(ge,{value:"static",children:"静态"}),r.jsx(ge,{value:"expression",children:"表达式"})]})}),r.jsx(Fe.Item,{noStyle:!0,shouldUpdate:!0,children:e=>e.getFieldValue("showType")==="static"?r.jsx(Fe.Item,{label:"显示结果",name:"showResult",children:r.jsxs(ge.Group,{children:[r.jsx(ge,{value:"show",children:"显示"}),r.jsx(ge,{value:"hidden",children:"隐藏"})]})}):r.jsx(Fe.Item,{label:"表达式",name:"expression",children:r.jsx(U,{})})})]})},Pe=window.antd.Form,_u=window.antd.Divider,me=window.antd.Radio,Eu=window.antd.TreeSelect,Tu=()=>{const n=N(e=>e.page.elements);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发事件动作后，可以指定目标组件禁用，目前主要用于表单组件和按钮组件。"}),r.jsx(_u,{})]}),r.jsx(Pe.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:r.jsx(Eu,{allowClear:!0,treeData:n,fieldNames:{label:"name",value:"id",children:"elements"},placeholder:"请选择目标组件"})}),r.jsx(Pe.Item,{label:"禁用类型",name:"disableType",children:r.jsxs(me.Group,{children:[r.jsx(me,{value:"static",children:"静态"}),r.jsx(me,{value:"expression",children:"表达式"})]})}),r.jsx(Pe.Item,{noStyle:!0,shouldUpdate:!0,children:e=>e.getFieldValue("disableType")==="static"?r.jsx(Pe.Item,{label:"禁用结果",name:"disableResult",children:r.jsxs(me.Group,{children:[r.jsx(me,{value:!1,children:"启用"}),r.jsx(me,{value:!0,children:"禁用"})]})}):r.jsx(Pe.Item,{label:"表达式",name:"expression",tooltip:"表达式需要返回布尔类型，true为禁用，false为启用",children:r.jsx(U,{readOnly:!0})})})]})},Dt=window.antd.Form,Iu=window.antd.TreeSelect,Cu=window.antd.Divider,hr=window.antd.Select,Du=window.antd.Input,Ou=window.React.useEffect,Ru=window.React.useState,Nu=({form:n})=>{const e=N(),[i,o]=Ru([]);Ou(()=>{const a=n.getFieldValue("target");if(!a)return;const l=e.page.elementsMap[a];l&&o(l.methods||[])},[n==null?void 0:n.getFieldValue("target")]);const t=a=>{const l=e.page.elementsMap[a];l&&o(l.methods||[])},s=a=>{n.setFieldValue("methodName",a)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"事件触发后，可以调用目标组件提供的方法，并自动传入参数。比如：表格的搜索、表单的提交、重置等。"}),r.jsx(Cu,{})]}),r.jsx(Dt.Item,{label:"目标组件",name:"target",rules:[{required:!0,message:"请选择目标组件"}],children:r.jsx(Iu,{allowClear:!0,placeholder:"请选择目标组件",treeDefaultExpandAll:!0,fieldNames:{label:"type",value:"id",children:"elements"},treeData:e.page.elements,onChange:t})}),r.jsx(Dt.Item,{label:"组件方法",name:"method",rules:[{required:!0,message:"请选择调用的方法"}],children:r.jsx(hr,{onChange:a=>{var l;return s((l=i.find(c=>c.name===a))==null?void 0:l.title)},placeholder:"请选择要调用的组件方法",children:i.map(a=>r.jsx(hr.Option,{value:a.name,children:a.title},a.name))})}),r.jsx(Dt.Item,{label:"方法名称",name:"methodName",hidden:!0,children:r.jsx(Du,{})})]})},ae=window.antd.Form,fr=window.antd.Select,$u=window.antd.Divider,Fu=window.antd.Input,ve=window.antd.Radio,Pu=window.React.useEffect,ku=window.React.useState,Mu=({form:n})=>{const e=N(s=>s.page.variables),[i,o]=ku("string");Pu(()=>{const s=n.getFieldValue("variableType");o(s)},[]);const t=s=>{var l;const a=(l=e.find(c=>c.name===s))==null?void 0:l.type;o(a),n.setFieldValue("variableType",a)};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"给页面全局变量动态赋值。页面中支持绑定动态变量的地方都可以使用此功能来添加动态值。"}),r.jsx($u,{})]}),r.jsx(ae.Item,{label:"赋值类型",name:"assigmentType",children:r.jsxs(ve.Group,{buttonStyle:"solid",children:[r.jsx(ve.Button,{value:"assigment",children:"变量赋值"}),r.jsx(ve.Button,{value:"reset",children:"变量重置"})]})}),r.jsx(ae.Item,{label:"选择变量",name:"name",wrapperCol:{span:16},rules:[{required:!0,message:"请选择变量"}],children:r.jsx(fr,{onChange:s=>t(s),children:e.map(s=>r.jsx(fr.Option,{value:s.name,children:s.name},s.name))})}),r.jsx(ae.Item,{label:"数据类型",name:"variableType",hidden:!0,children:r.jsx(Fu,{})}),r.jsx(ae.Item,{noStyle:!0,shouldUpdate:!0,children:s=>{if(s.getFieldValue("assigmentType")==="assigment")return r.jsx(ae.Item,{label:"赋值方式",name:"assigmentWay",wrapperCol:{span:16},tooltip:"动态赋值会默认接收上一个行为的数据作为变量值，比如上一个行为是接口请求",rules:[{required:!0,message:"请选择赋值方式"}],children:r.jsxs(ve.Group,{buttonStyle:"solid",children:[r.jsx(ve.Button,{value:"static",children:"静态赋值"}),r.jsx(ve.Button,{value:"dynamic",children:"动态赋值"})]})})}}),r.jsx(ae.Item,{noStyle:!0,shouldUpdate:!0,children:s=>{const{assigmentType:a,assigmentWay:l}=s.getFieldsValue();if(a==="assigment"&&l==="static")return r.jsxs(ae.Item,{label:"变量值",name:"value",wrapperCol:{span:16},rules:[{required:!0,message:"请输入变量值"}],children:[i==="string"||i==="number"||i==="boolean"?r.jsx(U,{}):null,(i==="array"||i==="object")&&r.jsx(Q,{height:"250px",language:"json"})]})}})]})},Au=()=>Ui.get("/robot/chat/groups"),zu=window.antd.Divider,ke=window.antd.Form,pr=window.antd.Input,Ot=window.antd.Radio,gr=window.antd.Select,Lu=window.React.useEffect,Bu=window.React.useState,Yu=()=>{const[n,e]=Bu([]);return Lu(()=>{Au().then(i=>{e(i.items)})},[]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发事件后，可以通过此功能发送飞书消息。"}),r.jsx(zu,{})]}),r.jsx(ke.Item,{label:"消息类型",name:"msg_type",rules:[{required:!0,message:"请选择消息类型"}],children:r.jsxs(Ot.Group,{buttonStyle:"solid",optionType:"button",children:[r.jsx(Ot.Button,{value:"text",children:"文本消息"}),r.jsx(Ot.Button,{value:"interactive",children:"卡片消息"})]})}),r.jsx(ke.Item,{noStyle:!0,shouldUpdate:!0,children:i=>i.getFieldValue("msg_type")==="text"?r.jsx(ke.Item,{label:"消息内容",name:"content",rules:[{required:!0,message:"请输入消息内容"}],children:r.jsx(pr,{placeholder:"请输入消息内容"})}):r.jsx(ke.Item,{label:"卡片模板",name:"template_id",tooltip:"去飞书创建卡片模板后，复制ID到此处",rules:[{required:!0,message:"请输入卡片模板ID"}],children:r.jsx(pr,{placeholder:"请输入卡片模板ID"})})}),r.jsx(ke.Item,{label:"接收群组",name:"receive_id",tooltip:"如果没有对应群组，需要先添加机器人到对应群组。当前暂不支持发送到某个用户。",rules:[{required:!0,message:"请选择消息发送的群组"}],children:r.jsx(gr,{placeholder:"请选择",children:n.map(i=>r.jsx(gr.Option,{value:i.chat_id,children:i.name},i.chat_id))})})]})},Xu=window.antd.Divider,Rt=window.antd.Form,mr=window.antd.Input,Vu=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发事件后，创建知识库副本，相当于复制。此功能可以用来创建周报。"}),r.jsx(Xu,{})]}),r.jsx(Rt.Item,{label:"空间ID",name:"space_id",tooltip:"打开知识库，点击左下角的设置就可以在地址栏中看到当前的SpaceId",rules:[{required:!0,message:"请输入空间ID"}],children:r.jsx(mr,{placeholder:"请输入空间ID"})}),r.jsx(Rt.Item,{label:"节点Token",name:"node_token",tooltip:"创建副本时，需要指定基于哪个节点进行创建，打开该知识库，地址栏末尾的即为Token",rules:[{required:!0,message:"请输入节点Token"}],children:r.jsx(mr,{placeholder:"请输入节点Token"})}),r.jsx(Rt.Item,{label:"知识库名称",name:"title",rules:[{required:!0,message:"请输入知识库名称"}],children:r.jsx(U,{placeholder:"请输入知识库名称"})})]}),Hu=window.antd.Divider,Wu=window.antd.Form,qu=window.antd.Input,Uu=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsxs("p",{className:b.descInfo,children:["复制文本内容至粘贴板，支持模板字符串。例如：https://xxx-v.marsview.cc/id?a=","${name}"]}),r.jsx(Hu,{})]}),r.jsx(Wu.Item,{label:"复制内容",name:"content",tooltip:"如果内容包含模板语法，请确保事件流的上一步操作返回了改字段。",children:r.jsx(qu.TextArea,{placeholder:"输入复制内容，支持模板字符串语法。",rows:5})})]}),Gu=window.antd.Divider,Zu=window.antd.Form,Ju=window.antd.InputNumber,Ku=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"触发动作后，会执行setTimeout做延迟。比如：延迟3秒执行下一个任务。"}),r.jsx(Gu,{})]}),r.jsx(Zu.Item,{label:"时间（秒）",name:"duration",rules:[{required:!0,message:"请输入持续时间"}],children:r.jsx(Ju,{placeholder:"eg: 3"})})]}),Qu=window.antd.Divider,ed=window.antd.Form,td=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:b.desc,children:[r.jsx("h3",{className:b.descTitle,children:"说明"}),r.jsx("p",{className:b.descInfo,children:"执行JS脚本，比如修改参数，获取变量、表单值、Store数据，以及对数据进行二次加工。"}),r.jsx(Qu,{})]}),r.jsx(ed.Item,{label:"运行脚本",name:"scripts",rules:[{required:!0,message:"请输入要执行的脚本"}],children:r.jsx(Q,{height:"260px",language:"javascript"})})]}),rt=window.antd.Form,nd=window.antd.Input,rd=window.antd.Space,id=window.antd.Button,od=()=>r.jsx(rt.Item,{label:"发送数据",children:r.jsx(rt.List,{name:["data"],children:(n,{add:e,remove:i})=>r.jsxs(r.Fragment,{children:[n.map(({name:o})=>r.jsxs(rd,{align:"baseline",style:{marginBottom:20,alignItems:"center"},children:[r.jsx(rt.Item,{name:[o,"key"],noStyle:!0,labelCol:{span:0},wrapperCol:{span:24},children:r.jsx(nd,{placeholder:"参数名"})}),r.jsx(rt.Item,{name:[o,"value"],noStyle:!0,children:r.jsx(U,{placeholder:"参数值"})}),r.jsx(G,{onClick:()=>e({key:""},o+1)}),r.jsx(fo,{onClick:()=>i(o)})]},"data"+o)),r.jsx(id,{block:!0,style:{marginBottom:10},onClick:()=>e({key:""}),children:"增加参数"})]})})}),sd=window.antd.Modal,vr=window.antd.Form,ad=window.React.forwardRef,ld=window.React.useImperativeHandle,Nt=window.React.useState,cd=(n,e)=>{var v;const[i,o]=Nt(!1),[t,s]=Nt({}),[a,l]=Nt({}),c=[{label:"页面",key:"page-nav",children:[{label:"跳转链接",key:"jumpLink",render:()=>r.jsx(ru,{form:d})},{label:"刷新页面",key:"reloadPage",render:()=>r.jsx(ou,{})}]},{label:"弹框",key:"modal-nav",children:[{label:"打开弹框",key:"openModal",render:()=>r.jsx(ar,{})},{label:"关闭弹框",key:"closeModal",render:()=>r.jsx(ar,{})},{label:"确认框",key:"showConfirm",render:()=>r.jsx(mu,{})},{label:"全局提示",key:"message",render:()=>r.jsx(du,{})},{label:"消息通知",key:"notifacation",render:()=>r.jsx(pu,{})}]},{label:"请求",key:"request-nav",children:[{label:"发送请求",key:"request",render:()=>r.jsx(dr,{type:"request"})},{label:"文件下载",key:"download",render:()=>r.jsx(dr,{type:"download"})}]},{label:"组件",key:"component-nav",children:[{label:"组件显隐",key:"visible",render:()=>r.jsx(Su,{})},{label:"组件禁用",key:"disable",render:()=>r.jsx(Tu,{})},{label:"组件方法",key:"methods",render:()=>r.jsx(Nu,{form:d})},{label:"变量赋值",key:"variable",render:()=>r.jsx(Mu,{form:d})}]},{label:"飞书",key:"feishu",children:[{label:"发送消息",key:"sendMessage",render:()=>r.jsx(Yu,{})},{label:"创建知识库副本",key:"createNode",render:()=>r.jsx(Vu,{})}]},{label:"其他",key:"other-nav",children:[{label:"复制内容",key:"copy",render:()=>r.jsx(Uu,{})},{label:"定时器",key:"setTimeout",render:()=>r.jsx(Ku,{})},{label:"脚本运行",key:"script",render:()=>r.jsx(td,{})}]}],u=async()=>{try{await d.validateFields();const f=d.getFieldsValue();if(f.assigmentType==="assigment"&&f.assigmentWay==="static"&&(f.variableType==="array"||f.variableType==="object"))try{f.value=typeof f.value=="string"?JSON.parse(f.value||""):f.value||""}catch(g){console.error(g);return}a.callback({actionType:t.key,actionName:t.label,...f}),o(!1)}catch(f){console.log(f)}},h=()=>{o(!1)},p=f=>{d.resetFields(),f.key==="variable"?d.setFieldsValue({assigmentType:"assigment",assigmentWay:"static"}):f.key==="showConfirm"?d.setFieldsValue({type:"confirm",title:"确认",content:"确定要执行此操作吗？",okText:"确认",cancelText:"取消"}):f.key==="message"?d.setFieldsValue({type:"success",content:"操作成功",duration:3}):f.key==="notifacation"?d.setFieldsValue({type:"info",message:"通知",description:"操作成功",placement:"topRight",duration:4.5}):f.key==="setTimeout"?d.setFieldsValue({duration:3}):f.key==="visible"?d.setFieldsValue({showType:"static",showResult:"show",expression:""}):f.key==="disable"?d.setFieldsValue({disableType:"static",disableResult:!0,expression:""}):f.key==="sendMessage"?d.setFieldsValue({msg_type:"text",content:"你好，我是飞书机器人"}):f.key==="script"&&d.setFieldsValue({scripts:`/**
* 触发动作后，会执行该函数
* 变量: variable
* 事件参数: eventParams
*/
function run(){
    
}
`}),s({key:f.key,label:f.label,render:f.render})};ld(e,()=>({open(f,g){var y;if(l({callback:g}),d.resetFields(),f!=null&&f.actionType)for(let w=0;w<c.length;w++){const x=(y=c[w].children.filter(j=>j.key===f.actionType))==null?void 0:y[0];if(x){s({key:x.key,label:x.label,render:x.render}),d.setFieldsValue(f);break}}else s({}),d.resetFields();o(!0)}}));const[d]=vr.useForm(),m={labelCol:{span:6},wrapperCol:{span:16}};return r.jsx(sd,{title:"事件行为配置",width:800,open:i,okText:"确认",cancelText:"取消",onOk:u,onCancel:h,children:r.jsxs("div",{className:b.actionBox,children:[r.jsx("div",{className:b.menuAction,children:r.jsx("ul",{children:c.map(f=>r.jsxs("li",{className:b.category,children:[r.jsx("span",{className:b.navTitle,children:f.label}),r.jsx("ul",{children:f.children.map(g=>r.jsx("li",{className:`${b.subItem} ${t.key===g.key?b.checked:""}`,onClick:()=>p(g),children:r.jsx("span",{children:g.label})},g.key))})]},f.key))})}),r.jsx("div",{className:b.content,children:r.jsx(vr,{form:d,...m,children:t!=null&&t.key?r.jsxs(r.Fragment,{children:[(v=t.render)==null?void 0:v.call(t),r.jsx(od,{})]}):r.jsx("div",{style:{textAlign:"center",lineHeight:"300px"},children:"请选择要执行的动作"})})})]})})},ud=ad(cd),dd=window.React.forwardRef,hd=window.React.useImperativeHandle,wr=window.React.useRef,fd=window.React.useState;function pd(n,e){const i=wr(),o=wr(),[t,s]=fd([]);hd(e,()=>({setNodeList(w){w.length===0?s([{id:"start",type:"start",title:"开始"},{id:"end",type:"end",title:"结束"}]):s(()=>[...w])},getNodeList:()=>t}));const a=()=>r.jsxs("div",{className:"start-node",children:[r.jsx("div",{className:"circle-btn",children:"开始"}),r.jsx("span",{className:"arrow-line"}),r.jsx(p,{id:"start"})]}),l=()=>r.jsx("div",{className:"end-node",children:r.jsx("div",{className:"circle-btn gray",children:"结束"})}),c=({node:w})=>r.jsxs("div",{className:"normal-node",children:[r.jsxs("div",{className:`node-info ${w.type}`,onClick:()=>g(w),children:[r.jsx("div",{className:"title",onClick:x=>f(x,w),children:w.title}),r.jsx("div",{className:"content",children:w.content}),r.jsx(rn,{className:"icon-del",onClick:x=>v(x,w.id)})]}),r.jsx("span",{className:"arrow-line"}),r.jsx(p,{id:w.id})]}),u=({children:w})=>r.jsxs("div",{className:"condition-node",children:[r.jsx("div",{className:"title",children:"分支"}),r.jsx("div",{className:"node-list",children:w}),r.jsx("span",{className:"arrow-line"})]}),h=({type:w,children:x})=>r.jsxs("div",{className:"node-item",children:[r.jsx("span",{className:"left-line "+w}),r.jsx("span",{className:"right-line "+w}),r.jsx("span",{className:"connect-line"}),r.jsx("div",{className:"normal-container",children:x})]}),p=({id:w})=>r.jsx("span",{className:"add-node-btn",children:r.jsxs("span",{className:"add-icon",children:[r.jsx(G,{style:{fontSize:16,color:"#fff"}}),r.jsxs("div",{className:"popover",children:[r.jsx("a",{onClick:()=>m("normal",w),children:"普通节点"}),r.jsx("a",{onClick:()=>m("condition",w),children:"分支节点"})]})]})}),d=(w=8)=>w===4?Math.random().toString().slice(2,6):Math.random().toString().slice(2,10),m=(w,x)=>{var S;w==="normal"?(S=i.current)==null||S.open("节点"+d(4),T=>{j(T)}):j("");function j(T){var A,z;const _=JSON.parse(JSON.stringify(t)),E=be(_,x),C={id:d(),type:w,title:T,content:"行为配置",config:{},children:[]};if(!E.parentNode)w==="normal"?_.splice(E.index+1,0,C):_.splice(E.index+1,0,{...C,children:[{id:d(),type:"success",children:[],title:"成功",content:"成功后执行此流程"},{id:d(),type:"fail",title:"失败",content:"失败后执行此流程",children:[]}]});else if(((A=E==null?void 0:E.parentNode)==null?void 0:A.type)==="condition"){if(w==="condition"){ee.error("分支节点第一个不能添加分支节点");return}E.parentNode.children[E.index].children.unshift(C)}else["normal","success","fail"].includes((z=E==null?void 0:E.parentNode)==null?void 0:z.type)&&(w==="normal"?E.parentNode.children.splice(E.index+1,0,C):E.parentNode.children.splice(E.index+1,0,{...C,children:[{...C,id:d(),type:"success",title:"成功",content:"成功后执行此流程",children:[]},{...C,id:d(),type:"fail",title:"失败",content:"失败后执行此流程",children:[]}]}));s(()=>[..._])}},v=(w,x)=>{var T,_,E;w.stopPropagation();const j=JSON.parse(JSON.stringify(t)),S=be(j,x);if(!S.parentNode)j.splice(S.index,1);else if(["success","fail","normal"].includes((T=S==null?void 0:S.parentNode)==null?void 0:T.type))S.parentNode.children.splice(S.index,1);else if(((_=S==null?void 0:S.parentNode)==null?void 0:_.type)==="condition"){const C=be(j,(E=S==null?void 0:S.parentNode)==null?void 0:E.id);C.parentNode?C.parentNode.children.splice(C.index,1):j.splice(C.index,1)}s(()=>[...j])},f=(w,x)=>{var j;w.stopPropagation(),!(x.title==="成功"||x.title==="失败")&&((j=i.current)==null||j.open(x.title,S=>{const T=JSON.parse(JSON.stringify(t)),_=be(T,x.id);_.selfNode.title=S,s(()=>[...T])}))},g=w=>{var x;(x=o.current)==null||x.open(w.config,j=>{const S=JSON.parse(JSON.stringify(t)),T=be(S,w.id);T.selfNode.content=j.actionName,T.selfNode.config=j,s(()=>[...S])})};function y(w){return w.map(x=>{switch(x.type){case"start":return r.jsx(a,{},x.id);case"end":return r.jsx(l,{},x.id);case"normal":case"success":case"fail":return r.jsx(c,{node:x},x.id);case"condition":return r.jsx(u,{title:x.title,children:x.children.map((j,S)=>r.jsxs(h,{type:S===0?"start":S==x.children.length-1?"end":"center",children:[y([j]),y(j.children)]},j.id))},x.id)}})}return r.jsxs(r.Fragment,{children:[r.jsx(kc,{className:"node-viewer",onPinch:w=>{console.log("pinch",w)},displayHorizontalScroll:!1,useMouseDrag:!0,useWheelScroll:!0,useAutoZoom:!0,zoomRange:[.5,10],useResizeObserver:!0,children:r.jsx("div",{className:"node-container",children:y(t)})}),r.jsx(Yc,{ref:i}),r.jsx(ud,{ref:o})]})}function be(n,e,i=null){for(let o=0;o<n.length;o++){if(n[o].id===e)return{index:o,parentNode:i,selfNode:n[o]};if(n[o].children){const t=be(n[o].children,e,n[o]);if(t)return t}}return null}const gd=dd(pd),xr=window.antd.Button,md=window.antd.Drawer,vd=window.antd.Space,wd=window.React.forwardRef,xd=window.React.useImperativeHandle,yd=window.React.useRef,yr=window.React.useState;function jd(n,e){const[i,o]=yr(!1),[t,s]=yr(),a=yd(null);xd(e,()=>({open(u,h){s({callback:h}),o(!0),setTimeout(()=>{var p;(p=a.current)==null||p.setNodeList(u)})}}));const l=()=>{var h;const u=(h=a.current)==null?void 0:h.getNodeList();t==null||t.callback(u),o(!1)},c=()=>{o(!1)};return r.jsx(md,{title:"事件流配置",width:"100vw",height:"100vh",placement:"top",push:!1,open:i,closeIcon:null,onClose:c,extra:r.jsx(r.Fragment,{children:r.jsxs(vd,{children:[r.jsx(xr,{type:"primary",onClick:l,children:"保存"}),r.jsx(xr,{onClick:c,children:"关闭"})]})}),children:r.jsx(gd,{ref:a})})}const bd=wd(jd),Sd="_event_7hmll_1",_d="_title_7hmll_5",Ed="_ml5_7hmll_20",Td="_addAction_7hmll_23",Id="_eventFlow_7hmll_27",we={event:Sd,title:_d,ml5:Ed,addAction:Td,eventFlow:Id},Cd=window.React.memo,Dd=window.React.useRef,$t=window.antd.Form,Od=window.antd.Dropdown,Rd=window.antd.Button,Nd=window.React.useEffect,$d=Cd(()=>{var l,c,u;const n=Dd(),e=N(),[i]=$t.useForm();Nd(()=>{var p;i.resetFields();let h=[];e.selectedElement?h=(((p=e.page.elementsMap[e.selectedElement.id])==null?void 0:p.config)||{}).events||[]:h=e.page.config.events||[],i.setFieldsValue({events:h})},[e.selectedElement]);const o=(l=e.selectedElement)!=null&&l.id?(u=(c=e.page.elementsMap[e.selectedElement.id])==null?void 0:c.events)==null?void 0:u.map(h=>({key:h.value,label:h.name})):e.page.events.map(h=>({key:h.value,label:h.name})),t=(h,p)=>{var d;(d=e.selectedElement)!=null&&d.id?e.editElement({id:e.selectedElement.id,type:"events",events:p.events||[]}):e.savePageInfo({type:"events",events:p.events||[]})},s=h=>{var p;(p=n.current)==null||p.open(i.getFieldValue(["events",h,"actions"]),d=>{i.setFieldValue(["events",h,"actions"],d),t(null,i.getFieldsValue())})},a={labelCol:{span:7},wrapperCol:{span:15}};return r.jsxs(r.Fragment,{children:[r.jsx($t,{form:i,...a,onValuesChange:t,children:r.jsx("div",{style:{marginBottom:10},children:r.jsx($t.List,{name:["events"],children:(h,{add:p,remove:d})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:we.event,children:r.jsx(Od,{menu:{items:o,onClick:({key:m})=>{var f;const v=(f=o==null?void 0:o.find(g=>(g==null?void 0:g.key)===m))==null?void 0:f.label;p({nickName:v,eventName:m,actions:[]})}},placement:"bottom",children:r.jsxs("a",{onClick:m=>m.preventDefault(),children:[r.jsx(G,{}),r.jsx("span",{className:we.ml5,children:"添加事件"})]})})}),h.map(({key:m,name:v})=>r.jsxs("div",{className:we.eventFlow,children:[r.jsxs("h2",{className:we.title,children:[r.jsx("span",{children:i.getFieldValue(["events",v,"nickName"])}),r.jsx(rn,{onClick:()=>d(v),className:we.ml5})]}),r.jsx("div",{className:we.addAction,children:r.jsx(Rd,{type:"primary",onClick:()=>s(v),children:"设置事件流"})})]},"event"+m))]})})})}),r.jsx(bd,{ref:n})]})}),Fd="_attrBox_1jquz_1",Pd="_widget_1jquz_9",kd="_text_1jquz_21",Md="_ml5_1jquz_29",xe={attrBox:Fd,widget:Pd,text:kd,ml5:Md},jr=window.antd.Form,Ad=window.antd.Tabs,zd=window.React.memo,Ld=window.React.useEffect,br=window.React.useState,Bd=window.ahooks.useDebounceFn,Yd=zd(()=>{const{pageName:n,pageProps:e,selectedElement:i,savePageInfo:o,elementsMap:t,editElement:s}=N(g=>({pageName:g.page.pageName,pageProps:g.page.config.props,selectedElement:g.selectedElement,savePageInfo:g.savePageInfo,elementsMap:g.page.elementsMap,editElement:g.editElement})),[a]=jr.useForm(),[l,c]=br(!1),[u,h]=br(null);Ld(()=>{var g,y;if(a.resetFields(),i){const w=((g=t[i.id])==null?void 0:g.remoteConfigUrl)||"";if(w)import(w).then((x={})=>{var j;h(x.default),a.setFieldsValue(((j=x.default)==null?void 0:j.config.props)||{})});else{const x=Yt[i.type+"Config"];h(x),a.setFieldsValue((y=t[i.id])==null?void 0:y.config.props)}a.setFieldValue("id",i.id)}else{const w=jo;h(w),a.setFieldsValue({pageName:n,...Qo({...e},w.config.props)})}return()=>{h(null),a.resetFields()}},[i==null?void 0:i.id,n]);const{run:p}=Bd(()=>{d(a.getFieldsValue())},{wait:300}),d=g=>{i!=null&&i.id?s({id:i.id,type:"props",props:g}):o({type:"props",props:g})},m=()=>{navigator.clipboard.writeText((i==null?void 0:i.id)||n),ee.info("复制成功"),c(!0),setTimeout(()=>{c(!1)},3e3)},v={labelCol:{span:8},wrapperCol:{span:14}},f=[{key:"props",label:"属性",children:r.jsxs(jr,{form:a,style:{paddingBottom:20},...v,layout:"horizontal",labelAlign:"right",onValuesChange:p,children:[r.jsxs("div",{className:xe.widget,children:[i!=null&&i.id?r.jsxs("span",{className:xe.text,children:["组件ID：",i==null?void 0:i.id]}):r.jsxs("span",{className:xe.text,children:["页面：",n]}),l?r.jsx(Gi,{className:xe.ml5}):r.jsx(Eo,{onClick:m,className:xe.ml5})]}),r.jsx(lo,{attrs:(u==null?void 0:u.attrs)||[],form:a})]})},{key:"style",label:"样式",children:r.jsx(pl,{})},{key:"event",label:"事件",children:r.jsx($d,{})},{key:"api",label:"数据",children:r.jsx(Pl,{})}];return r.jsx(Ad,{className:xe.attrBox,centered:!0,defaultActiveKey:"props",items:f})}),Sr=window.antd.Button,Xd=window.antd.Flex,Ft=window.antd.List,Vd=window.antd.Spin,Hd=window.antd.Tag,Wd=window.React.useEffect,qd=window.React.useRef,_r=window.React.useState,Ud=()=>{const n=qd(),[e,i]=_r(!0),[o,t]=_r([]),s=N(p=>p.page.pageId),a=Zi();Wd(()=>{l()},[]);const l=async()=>{i(!0);const p=await Xt.getPageList();i(!1),t(p.list)},c=p=>{var d;(d=n.current)==null||d.open(p)},u=async p=>{Ki.confirm({title:"确认",content:"删除后，将无法恢复，请谨慎操作？",okText:"确认",cancelText:"取消",onOk:async()=>{await Qi({id:p}),ee.success("删除成功"),l(),o.length>0&&a(`/editor/${o[0].id}/edit`)}})},h=async(p,d)=>{p.preventDefault(),a(`/editor/${d}/edit`)};return r.jsxs(r.Fragment,{children:[r.jsxs(Xd,{justify:"space-between",align:"center",style:{borderBottom:"1px solid #e8e9eb"},children:[r.jsx(Sr,{type:"link",icon:r.jsx(G,{}),onClick:()=>c(),style:{marginLeft:-15},children:"新增"}),r.jsx(Sr,{type:"link",icon:r.jsx(Xr,{}),onClick:l,children:"刷新"})]}),r.jsx(Vd,{spinning:e,children:r.jsx(Ft,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:o,renderItem:p=>r.jsx(Ft.Item,{actions:[p.id===s?r.jsx(Hd,{color:"#7D33FF",children:"当前"}):"",r.jsx(rn,{onClick:()=>u(p.id)}),r.jsx(qr,{onClick:()=>c(p)})],children:r.jsx(Ft.Item.Meta,{title:r.jsx("a",{onClick:d=>h(d,p.id),children:p.name}),description:p.remark})})})}),r.jsx(Ji,{createRef:n,update:()=>l()})]})},Gd="_menuItem_75km7_1",Zd="_menuItemLib_75km7_2",Jd="_leftTool_75km7_13",yn={menuItem:Gd,menuItemLib:Zd,leftTool:Jd},Kd=window.React.useState,Qd=n=>{const[e,i]=Kd(Me(n.type)),{selectedElement:o,addElement:t,addChildElements:s}=N(h=>({addElement:h.addElement,addChildElements:h.addChildElements,selectedElement:h.selectedElement})),[{isDragging:a},l]=bo(()=>({type:"MENU_ITEM",item:{id:e,type:n.type,name:n.name},end:()=>{i(Me(n.type))},collect:h=>({isDragging:h.isDragging()})}),[e]),c=h=>{const{config:p,events:d,methods:m=[],elements:v=[]}=Yt[h.type+"Config"]||{},f=Me(h.type);if(!eo(h.type,o==null?void 0:o.type)){ee.warning(`${h.name}组件不支持添加到${(o==null?void 0:o.type)||"页面"}中`);return}const g=v.map(y=>{const{config:w,events:x,methods:j=[]}=Yt[y.type+"Config"]||{};return{id:y.id||Me(y.type),name:y.name,type:y.type,parentId:f,config:w,events:x,methods:j}})||[];o?s({type:h.type,name:h.name,elements:g,parentId:o.id,id:f,config:p,events:d,methods:m}):t({type:h.type,name:h.name,id:f,elements:g,config:p,events:d,methods:m})},u={color:"#7d33ff",borderColor:"#7d33ff"};return r.jsx("div",{className:yn.menuItem,style:a?u:{},ref:l,onClick:()=>c(n),children:n.name})},eh=window.React.forwardRef,th=window.React.useEffect,nh=window.React.useImperativeHandle,Er=window.React.useState,rh=window.antd.Flex,ih=window.antd.Spin;function oh(n,e){const[i,o]=Er(!1),[t,s]=Er([]),{selectedElement:a,addElement:l,addChildElements:c}=N(d=>({addElement:d.addElement,addChildElements:d.addChildElements,selectedElement:d.selectedElement}));nh(e,()=>({reload(){u()}}));const u=async()=>{o(!0);const d=await to();s(d),o(!1)};th(()=>{u()},[]);const h=async d=>{try{return(await import(d)).default||{}}catch(m){return console.error("模块加载失败:",m),{}}},p=async d=>{const{config:m,events:v,methods:f=[]}=await h(d.config_url),g=Me(d.tag);a?c({remoteUrl:d.react_url,remoteConfigUrl:d.config_url,remoteCssUrl:d.css_url,type:d.tag,name:d.name,elements:[],parentId:a.id,id:g,config:m,events:v,methods:f}):l({remoteUrl:d.react_url,remoteConfigUrl:d.config_url,remoteCssUrl:d.css_url,type:d.tag,name:d.name,id:g,config:m,events:v,methods:f,elements:[]})};return r.jsx(ih,{spinning:i,children:r.jsx(rh,{wrap:"wrap",gap:5,justify:"space-between",style:{marginTop:10},children:t.map(d=>r.jsx("div",{style:{width:"45%"},children:r.jsx("div",{className:yn.menuItemLib,onClick:()=>p(d),children:d.name})},d.id))})})}const sh=eh(oh),ah=window.React.useEffect,lh=window.React.useMemo,ch=window.React.useRef,it=window.React.useState,uh=window.antd.Row,dh=window.antd.Col,hh=window.antd.Tabs,fh=window.antd.Collapse,ph=window.antd.Input,gh=window.antd.Divider,Tr=window.antd.Empty,mh=window.ahooks.useDebounceFn,vh=()=>{const n=ch(),[e,i]=it(""),[o,t]=it([]),[s,a]=it("system"),[l,c]=it([]);ah(()=>{const v=(e?u(En,e):En).map(f=>({key:f.type,label:f.title,children:r.jsx(uh,{gutter:[10,10],children:f.data.map(g=>r.jsx(dh,{span:12,children:r.jsx(Qd,{...g})},g.type))})}));t(v.map(f=>f.key)),c(v)},[e]);function u(v,f){const g=[];function y(w,x){for(const j of w)if(Array.isArray(j.data))y(j.data,{...j,data:[]});else if(j.name.includes(f)){if(x.data.push(j),g.filter(S=>S.type===x.type).length>0)return;g.push({...x})}}return f?(y(v,null),g):v}const h=v=>{t(typeof v=="string"?[v]:v)},p=lh(()=>[{key:"system",label:"系统组件",children:r.jsxs(r.Fragment,{children:[r.jsx(fh,{style:{height:l.length>0?"calc(100vh - 210px)":"",overflowY:"auto"},items:l,ghost:!0,expandIconPosition:"end",size:"small",activeKey:o,onChange:h,expandIcon:({isActive:v})=>r.jsx(po,{rotate:v?0:-180})}),l.length===0&&r.jsx(Tr,{image:Tr.PRESENTED_IMAGE_SIMPLE})]})},{key:"custom",label:"自定义组件",children:r.jsx(sh,{ref:n})}],[l,o]),d=v=>{var f;a(v),v==="custom"&&((f=n.current)==null||f.reload())},{run:m}=mh(v=>{const f=v.target.value;i(f)},{wait:500});return r.jsx(hh,{size:"small",defaultActiveKey:p[0].key,tabPosition:"top",onChange:d,items:p.map(v=>({key:v.key,label:v.label,children:r.jsxs(r.Fragment,{children:[s==="system"&&r.jsxs(r.Fragment,{children:[r.jsx(ph,{placeholder:"输入关键字查询组件",suffix:r.jsx(go,{}),onChange:m}),r.jsx(gh,{style:{margin:"12px 0 0 0"}})]}),v.children]})}))})},wh=window.antd.Tree,xh=window.antd.Row,yh=window.React.useState,jh=()=>{const{pageName:n,elements:e,setSelectedElement:i}=N(l=>({pageName:l.page.pageName,elements:l.page.elements,setSelectedElement:l.setSelectedElement})),[o,t]=yh([]),s=[{type:`页面【${n}】`,id:"page",elements:e}],a=(l,{node:c})=>{t(l),l.length>0?i({id:c.id,type:c.type}):i(void 0)};return r.jsx(xh,{style:{paddingRight:"24px",height:"calc(100vh - 110px)",overflowY:"auto"},children:r.jsx(wh,{showLine:!0,defaultExpandAll:!0,switcherIcon:r.jsx(no,{}),fieldNames:{title:"type",key:"id",children:"elements"},treeData:s,selectedKeys:o,onSelect:a})})},bh=window.antd.Button,Sh=window.antd.Row,_h=window.React.useRef,Eh=window.React.useEffect,Th=window.React.useState,Ih=()=>{const n=_h(null),[e,i]=Th(!1),{userInfo:o,page:t,savePageInfo:s}=N(c=>({userInfo:c.userInfo,page:c.page,savePageInfo:c.savePageInfo}));Vr.config({paths:{vs:"https://marsview.cdn.bcebos.com/static/monaco-editor/vs"}});function a(c){var u;n.current=c,(u=n.current)==null||u.setValue(JSON.stringify({userInfo:o,page:t},null,2))}Eh(()=>{var c;(c=n.current)==null||c.setValue(JSON.stringify({userInfo:o,page:t},null,2))},[t]);const l=async c=>{var f;c.stopPropagation();let u;try{u=JSON.parse((f=n.current)==null?void 0:f.getValue())||{}}catch{u={},ee.error("页面数据格式异常，请检查重试");return}const{pageName:h,remark:p,is_public:d,...m}=u.page,v={id:t.pageId,name:h,remark:p,is_public:d,page_data:JSON.stringify({...m,pageId:void 0,stg_state:void 0,pre_state:void 0,prd_state:void 0,preview_img:void 0,variableData:{},formData:{},stg_publish_id:void 0,pre_publish_id:void 0,prd_publish_id:void 0,user_id:void 0})};i(!0);try{await ro(v)}catch(g){console.error(g)}i(!1),s({...JSON.parse(v.page_data),pageId:t.pageId,pageName:h,remark:p,is_public:d,preview_img:t.preview_img,stg_publish_id:t.stg_publish_id,pre_publish_id:t.pre_publish_id,prd_publish_id:t.prd_publish_id,stg_state:t.stg_state,pre_state:t.pre_state,prd_state:t.prd_state,user_id:t.user_id,variableData:t.variableData,formData:t.formData}),ee.success("保存成功")};return r.jsxs(Sh,{style:{marginLeft:"-14px",marginRight:1},children:[r.jsx(Hr,{height:"calc(100vh - 170px)",language:"json",theme:"vs-light",options:{lineNumbers:"on",minimap:{enabled:!1}},onMount:a}),r.jsx(bh,{block:!0,type:"primary",loading:e,style:{margin:15},onClick:c=>l(c),children:"保存"})]})},J=window.antd.Form,Ir=window.antd.Input,Ch=window.antd.Space,Dh=window.antd.InputNumber,Oh=function(){return r.jsxs(r.Fragment,{children:[r.jsx(J.Item,{label:"请求头",children:r.jsx(J.List,{name:"headers",children:(n,{add:e,remove:i})=>r.jsx(r.Fragment,{children:n.map(({name:o},t)=>r.jsxs(Ch,{align:"center",style:{marginBottom:n.length===t+1?0:10},children:[r.jsx(J.Item,{name:[o,"key"],noStyle:!0,children:r.jsx(Ir,{placeholder:"请输入Key"})}),r.jsx(J.Item,{name:[o,"value"],noStyle:!0,children:r.jsx(U,{placeholder:"请输入Value"})}),r.jsx(G,{onClick:()=>e({key:"",value:""})}),t>0&&r.jsx(Lr,{onClick:()=>{i(o)}})]},`header-${t}`))})})}),r.jsx(J.Item,{label:"超时时间",name:"timeout",children:r.jsx(Dh,{addonAfter:"秒"})}),r.jsx(J.Item,{label:"超时提示",name:"timeoutErrorMessage",children:r.jsx(Ir,{placeholder:"请输入超时提示"})}),r.jsx(J.Item,{label:"请求适配",name:"requestIntercetpor",children:r.jsx(Q,{})}),r.jsx(J.Item,{label:"返回适配",name:"responseIntercetpor",children:r.jsx(Q,{})})]})},Rh=window.React.forwardRef,Nh=window.React.useImperativeHandle,$h=window.React.useState,Cr=window.antd.Form,Fh=window.antd.Modal,Ph=({update:n},e)=>{const{interceptor:i,setInterceptor:o}=N(h=>({interceptor:h.page.interceptor,setInterceptor:h.setInterceptor})),[t]=Cr.useForm(),[s,a]=$h(!1),l={headers:[{key:"",value:""}],timeout:8,timeoutErrorMessage:"请求超时，请稍后重试",requestIntercetpor:`/**
 * config: 请求完整配置，请严格按照以下格式使用和返回
 * config.url: 请求地址,eg: config.url = 'https://xxx.marsview.cc/api/xxx'
 * config.params: Get请求对应参数,eg: config.params = {name:'xxx'}
 * config.data: Post请求对应数据,eg: config.data = {name:'xxx'}
 * config.timeout: 超时时间（秒）,eg: config.timeout = 5
 * config.headers: 请求头,eg: config.headers.token = 'xxx'
 */
function request(config){
    return config;
}`,responseIntercetpor:`/**
* response: 返回值完整结构
* response.config: 请求完整配置。
* response.data: 请求返回数据
* response.headers: 请求头
* response.status: 请求状态码
*/
function response(response){
    return response;
}`};Nh(e,()=>({showModal:()=>{t.setFieldsValue({...l,...i}),a(!0)}}));async function c(){await t.validateFields()&&(o(t.getFieldsValue()),u())}function u(){a(!1),t.resetFields()}return r.jsx(Fh,{width:"800px",okText:"确认",cancelText:"取消",title:"高级设置",open:s,onOk:c,onCancel:u,children:r.jsx(Cr,{form:t,labelCol:{span:4},wrapperCol:{span:19},style:{maxWidth:800},autoComplete:"off",children:r.jsx(Oh,{})})})},kh=Rh(Ph),Dr=window.React.useRef,Or=window.antd.Button,Mh=window.antd.Flex,Pt=window.antd.List,Ah=()=>{const n=Dr(),e=Dr(),{apis:i,removeApi:o}=N(c=>({apis:c.page.apis,removeApi:c.removeApi})),t=()=>{var c;(c=n.current)==null||c.showModal()},s=(c,u)=>{var h;c.preventDefault(),(h=n.current)==null||h.showModal(u.id)},a=(c,u)=>{c.preventDefault(),o(u)},l=()=>{var c;(c=e.current)==null||c.showModal()};return r.jsxs(r.Fragment,{children:[r.jsxs(Mh,{justify:"space-between",align:"center",style:{borderBottom:"1px solid #e8e9eb"},children:[r.jsx(Or,{type:"link",icon:r.jsx(G,{}),onClick:()=>t(),children:"新增"}),r.jsx(Or,{type:"link",icon:r.jsx(Yr,{}),onClick:()=>l(),children:"全局拦截器"})]}),r.jsx(Pt,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:Object.values(i),renderItem:c=>r.jsx(Pt.Item,{actions:[r.jsx("a",{onClick:u=>s(u,c),children:"修改"}),r.jsx("a",{onClick:u=>a(u,c.id),children:"删除"})],children:r.jsx(Pt.Item.Meta,{title:`${c.method} ${c.name}`,description:c.url})})}),r.jsx(hn,{ref:n}),r.jsx(kh,{ref:e})]})},zh=window.React.useEffect,Lh=window.React.useRef,Rr=window.React.useState,kt=window.antd.Button,Bh=window.antd.Flex,Mt=window.antd.List,Yh=window.antd.Spin,Xh=()=>{const[n,e]=Rr(!1),[i,o]=Rr([]),t=Lh(),{id:s}=io();zh(()=>{a()},[]);const a=async()=>{if(!s)return ee.error("当前页面不存在");e(!0);const u=await Xt.getMemberList({page_id:parseInt(s)});o(u.list),e(!1)},l=()=>{var u;(u=t.current)==null||u.open(2)},c=async u=>{await Xt.deletePageMember({id:u}),o(i.filter(h=>h.id!=u))};return r.jsxs(r.Fragment,{children:[r.jsxs(Bh,{justify:"space-between",align:"center",style:{borderBottom:"1px solid #e8e9eb"},children:[r.jsx(kt,{type:"link",icon:r.jsx(G,{}),onClick:()=>l(),children:"新增"}),r.jsx(kt,{type:"link",icon:r.jsx(Xr,{}),onClick:a,children:"刷新"})]}),r.jsx(Yh,{spinning:n,children:r.jsx(Mt,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:i,renderItem:u=>r.jsx(Mt.Item,{actions:[r.jsx(kt,{type:"link",onClick:()=>c(u.id),children:"删除"})],children:r.jsx(Mt.Item.Meta,{avatar:r.jsx(Io,{}),title:r.jsx("span",{children:u.user_name}),description:u.role==1?"开发者":"体验者"})})})}),r.jsx(To,{ref:t,update:a})]})},Vh=window.antd.Modal,ye=window.antd.Form,At=window.antd.Input,je=window.antd.Radio,Hh=window.antd.InputNumber,Wh=window.antd.Switch,qh=window.React.useImperativeHandle,zt=window.React.useState,Uh=window.React.forwardRef,Gh=window.React.useRef,Zh=(n,e)=>{const[i,o]=zt(!1),[t,s]=zt("add"),[a,l]=zt("string"),c=Gh(null),[u]=ye.useForm(),{addVariable:h,editVariable:p}=N(f=>({variables:f.page.variables,addVariable:f.addVariable,editVariable:f.editVariable}));Vr.config({paths:{vs:"https://marsview.cdn.bcebos.com/static/monaco-editor/vs"}}),qh(e,()=>({open(f,g){f==="edit"&&(g.type==="array"||g.type==="object"?u.setFieldsValue({...g,defaultValue:JSON.stringify(g.defaultValue,null,4)}):u.setFieldsValue(g),l(g.type)),s(f),o(!0)}}));const d=f=>{l(f)},m=()=>{u.validateFields().then(()=>{var g;const f=u.getFieldsValue();if(a==="array"||a==="object"){const y=(g=c.current)==null?void 0:g.getValue();if(y)try{f.defaultValue=JSON.parse(y)}catch{ee.error("请输入正确的json数据");return}}t==="add"?h(f):p(f),v()})},v=()=>{u.resetFields(),o(!1),l("string")};return r.jsx(Vh,{title:"添加变量",open:i,width:650,onOk:m,onCancel:v,okText:"提交",cancelText:"取消",children:r.jsxs(ye,{form:u,labelCol:{span:6},wrapperCol:{span:16},initialValues:{type:"string"},children:[r.jsx(ye.Item,{label:"变量名称",name:"name",rules:[{required:!0,message:"请输入变量名称"},{pattern:/^[a-zA-Z]\w{0,19}$/,message:"请输入正确的变量名称"}],children:r.jsx(At,{placeholder:"请输入变量名称，以字母开头，支持大小写、下划线"})}),r.jsx(ye.Item,{label:"变量类型",name:"type",rules:[{required:!0,message:"请选择变量类型"}],children:r.jsxs(je.Group,{buttonStyle:"solid",onChange:f=>d(f.target.value),children:[r.jsx(je.Button,{value:"string",children:"字符串"}),r.jsx(je.Button,{value:"number",children:"数字"}),r.jsx(je.Button,{value:"boolean",children:"布尔"}),r.jsx(je.Button,{value:"array",children:"数组"}),r.jsx(je.Button,{value:"object",children:"对象"})]})}),r.jsxs(ye.Item,{label:"变量默认值",name:"defaultValue",rules:[{required:!0,message:"请输入变量值"}],children:[a==="string"&&r.jsx(At,{placeholder:"请输入变量值"}),a==="number"&&r.jsx(Hh,{placeholder:"请输入变量值",style:{width:"100%"}}),a==="boolean"&&r.jsx(Wh,{}),(a==="array"||a==="object")&&r.jsx(Hr,{height:"250px",language:"json",options:{lineNumbers:"on",minimap:{enabled:!1}},onMount:f=>c.current=f})]}),r.jsx(ye.Item,{label:"变量说明",name:"remark",children:r.jsx(At,{placeholder:"请输入变量说明"})})]})})},Jh=Uh(Zh),Kh=window.React.useRef,Qh=window.antd.Button,ef=window.antd.Flex,Lt=window.antd.List,tf=()=>{const n=Kh(),{variables:e,removeVariable:i}=N(a=>({variables:a.page.variables,removeVariable:a.removeVariable})),o=()=>{var a;(a=n.current)==null||a.open("add")},t=(a,l)=>{var c;a.preventDefault(),(c=n.current)==null||c.open("edit",l)},s=(a,l)=>{a.preventDefault(),i(l)};return r.jsxs(r.Fragment,{children:[r.jsx(ef,{justify:"space-between",align:"center",style:{borderBottom:"1px solid #e8e9eb"},children:r.jsx(Qh,{type:"link",icon:r.jsx(G,{}),onClick:()=>o(),children:"新增"})}),r.jsx(Lt,{style:{height:"calc(100vh - 150px)",overflowY:"auto"},itemLayout:"horizontal",dataSource:e,renderItem:a=>r.jsx(Lt.Item,{actions:[r.jsx("a",{onClick:l=>t(l,a),children:"修改"}),r.jsx("a",{onClick:l=>s(l,a.name),children:"删除"})],children:r.jsx(Lt.Item.Meta,{title:`${a.name}`,description:a.remark})})}),r.jsx(Jh,{ref:n})]})},nf=window.antd.Col,rf=window.antd.Row,of=window.antd.Tabs,Nr=window.antd.Tooltip,$r=[{key:"ComponentPanel",icon:r.jsx(oo,{}),title:"组件物料",component:()=>r.jsx(vh,{})},{key:"home",icon:r.jsx(so,{}),title:"页面列表",component:()=>r.jsx(Ud,{})},{key:"OutlinePanel",icon:r.jsx(vo,{}),title:"页面大纲",component:()=>r.jsx(jh,{})},{key:"CodingPanel",icon:r.jsx(Co,{}),title:"页面JSON",component:()=>r.jsx(Ih,{})},{key:"ApiList",icon:r.jsx(wo,{}),title:"页面接口",component:()=>r.jsx(Ah,{})},{key:"Variable",icon:r.jsx(_o,{}),title:"页面变量",component:()=>r.jsx(tf,{})},{key:"Member",icon:r.jsx(xo,{}),title:"页面成员",component:()=>r.jsx(Xh,{})}],sf=n=>r.jsx(r.Fragment,{children:r.jsx(of,{size:"small",defaultActiveKey:$r[0].key,tabPosition:"left",tabBarStyle:{width:"50px",height:"calc(100vh - 64px)"},className:yn.leftTool,centered:!0,onTabClick:()=>n.toggleOpen(!0),items:$r.map(e=>{var i;return{key:e.key,label:r.jsx(Nr,{placement:"right",title:e.title,children:e.icon}),children:n.isOpen&&r.jsxs("div",{style:{marginLeft:-10,marginRight:10},children:[r.jsxs(rf,{style:{height:46,paddingRight:14},align:"middle",justify:"space-between",children:[r.jsx(nf,{children:r.jsx("span",{style:{fontWeight:"bold"},children:e.title})}),r.jsx(Nr,{placement:"right",title:"关闭菜单",children:r.jsx(mo,{onClick:()=>n.toggleOpen()})})]}),(i=e.component)==null?void 0:i.call(e)]})}})})}),af=window.React.useState,Ef=()=>{const[n,e]=af(!0),{mode:i,updateToolbar:o}=N(s=>({mode:s.mode,updateToolbar:s.updateToolbar})),t=s=>{s!==n&&e(!n)};return r.jsx(va,{backend:$a,children:r.jsx("div",{style:{height:"calc(100vh - 64px)"},children:r.jsxs(Xe,{onChange:o,children:[i==="edit"&&r.jsx(Xe.Pane,{preferredSize:320,minSize:n?320:49,maxSize:n?800:49,children:r.jsx(sf,{toggleOpen:t,isOpen:n})}),r.jsx(Xe.Pane,{children:r.jsx(ao,{})}),i==="edit"&&r.jsx(Xe.Pane,{preferredSize:300,minSize:300,maxSize:800,children:r.jsx(Yd,{})})]})})})};export{Ef as default};
