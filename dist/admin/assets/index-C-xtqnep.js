import{j as d}from"./index-BMoS0DUA.js";import{i as xe}from"./index-eHDmF8kl.js";import{o as K,p as N,q as Zr,s as be,t as G,v as J,w as Pe,x as C,y as H,L as ir,z as Y,A as Vr,B as j,S as br,C as or,D as Q,E as kr,F as Se,G as re,H as me,u as Oe,h as $e,b as Pr,f as Sr,k as mr,l as Or,M as Re}from"./index-TNyY8g-O.js";import{A as $r}from"./AuthButton-nrEfPNOM.js";import"./PlusOutlined-CrNRbnjj.js";import"./objectSpread2-C4CkhkJ7.js";import"./_commonjsHelpers-BosuxZz1.js";import"./PlusOutlined-B9smaIDR.js";import"./react-is.production.min-CusjrdBo.js";import"./UploadOutlined-Bwd-S4oa.js";import"./UploadOutlined-B7yj2_9n.js";import"./LockOutlined-BVydvXBH.js";import"./MinusOutlined-BwcU5aKC.js";import"./MinusOutlined-BZaTcxGD.js";import"./UserOutlined-D3qSKySR.js";import"./immer-DZPz5TFl.js";function Ee(r){return r}var er=K(N,"WeakMap"),Rr=function(){try{var r=K(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Ie=9007199254740991,Le=/^(?:0|[1-9]\d*)$/;function ur(r,e){var t=typeof r;return e=e??Ie,!!e&&(t=="number"||t!="symbol"&&Le.test(r))&&r>-1&&r%1==0&&r<e}function Me(r,e,t){e=="__proto__"&&Rr?Rr(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Ce=Object.prototype,Ne=Ce.hasOwnProperty;function je(r,e,t){var n=r[e];(!(Ne.call(r,e)&&Zr(n,t))||t===void 0&&!(e in r))&&Me(r,e,t)}var De=9007199254740991;function lr(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=De}function ee(r){return r!=null&&lr(r.length)&&!be(r)}var Fe=Object.prototype;function te(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Fe;return r===t}function Be(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var Ge="[object Arguments]";function Er(r){return G(r)&&J(r)==Ge}var ne=Object.prototype,Ke=ne.hasOwnProperty,Ue=ne.propertyIsEnumerable,ae=Er(function(){return arguments}())?Er:function(r){return G(r)&&Ke.call(r,"callee")&&!Ue.call(r,"callee")};function ze(){return!1}var se=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ir=se&&typeof module=="object"&&module&&!module.nodeType&&module,He=Ir&&Ir.exports===se,Lr=He?N.Buffer:void 0,Ye=Lr?Lr.isBuffer:void 0,tr=Ye||ze,qe="[object Arguments]",Je="[object Array]",Qe="[object Boolean]",We="[object Date]",Xe="[object Error]",Ze="[object Function]",Ve="[object Map]",ke="[object Number]",rt="[object Object]",et="[object RegExp]",tt="[object Set]",nt="[object String]",at="[object WeakMap]",st="[object ArrayBuffer]",it="[object DataView]",ot="[object Float32Array]",ut="[object Float64Array]",lt="[object Int8Array]",pt="[object Int16Array]",ft="[object Int32Array]",ct="[object Uint8Array]",dt="[object Uint8ClampedArray]",gt="[object Uint16Array]",yt="[object Uint32Array]",g={};g[ot]=g[ut]=g[lt]=g[pt]=g[ft]=g[ct]=g[dt]=g[gt]=g[yt]=!0;g[qe]=g[Je]=g[st]=g[Qe]=g[it]=g[We]=g[Xe]=g[Ze]=g[Ve]=g[ke]=g[rt]=g[et]=g[tt]=g[nt]=g[at]=!1;function vt(r){return G(r)&&lr(r.length)&&!!g[J(r)]}function ht(r){return function(e){return r(e)}}var ie=typeof exports=="object"&&exports&&!exports.nodeType&&exports,B=ie&&typeof module=="object"&&module&&!module.nodeType&&module,wt=B&&B.exports===ie,X=wt&&Pe.process,Mr=function(){try{var r=B&&B.require&&B.require("util").types;return r||X&&X.binding&&X.binding("util")}catch{}}(),Cr=Mr&&Mr.isTypedArray,oe=Cr?ht(Cr):vt,_t=Object.prototype,At=_t.hasOwnProperty;function ue(r,e){var t=C(r),n=!t&&ae(r),i=!t&&!n&&tr(r),s=!t&&!n&&!i&&oe(r),o=t||n||i||s,u=o?Be(r.length,String):[],f=u.length;for(var p in r)(e||At.call(r,p))&&!(o&&(p=="length"||i&&(p=="offset"||p=="parent")||s&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||ur(p,f)))&&u.push(p);return u}function le(r,e){return function(t){return r(e(t))}}var Tt=le(Object.keys,Object),xt=Object.prototype,bt=xt.hasOwnProperty;function Pt(r){if(!te(r))return Tt(r);var e=[];for(var t in Object(r))bt.call(r,t)&&t!="constructor"&&e.push(t);return e}function pe(r){return ee(r)?ue(r):Pt(r)}function St(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var mt=Object.prototype,Ot=mt.hasOwnProperty;function $t(r){if(!H(r))return St(r);var e=te(r),t=[];for(var n in r)n=="constructor"&&(e||!Ot.call(r,n))||t.push(n);return t}function Rt(r){return ee(r)?ue(r,!0):$t(r)}function fe(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var Et=le(Object.getPrototypeOf,Object);function It(){this.__data__=new ir,this.size=0}function Lt(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function Mt(r){return this.__data__.get(r)}function Ct(r){return this.__data__.has(r)}var Nt=200;function jt(r,e){var t=this.__data__;if(t instanceof ir){var n=t.__data__;if(!Y||n.length<Nt-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Vr(n)}return t.set(r,e),this.size=t.size,this}function R(r){var e=this.__data__=new ir(r);this.size=e.size}R.prototype.clear=It;R.prototype.delete=Lt;R.prototype.get=Mt;R.prototype.has=Ct;R.prototype.set=jt;function Dt(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var o=r[t];e(o,t,r)&&(s[i++]=o)}return s}function ce(){return[]}var Ft=Object.prototype,Bt=Ft.propertyIsEnumerable,Nr=Object.getOwnPropertySymbols,de=Nr?function(r){return r==null?[]:(r=Object(r),Dt(Nr(r),function(e){return Bt.call(r,e)}))}:ce,Gt=Object.getOwnPropertySymbols,Kt=Gt?function(r){for(var e=[];r;)fe(e,de(r)),r=Et(r);return e}:ce;const Ut=Kt;function ge(r,e,t){var n=e(r);return C(r)?n:fe(n,t(r))}function jr(r){return ge(r,pe,de)}function zt(r){return ge(r,Rt,Ut)}var nr=K(N,"DataView"),ar=K(N,"Promise"),sr=K(N,"Set"),Dr="[object Map]",Ht="[object Object]",Fr="[object Promise]",Br="[object Set]",Gr="[object WeakMap]",Kr="[object DataView]",Yt=j(nr),qt=j(Y),Jt=j(ar),Qt=j(sr),Wt=j(er),I=J;(nr&&I(new nr(new ArrayBuffer(1)))!=Kr||Y&&I(new Y)!=Dr||ar&&I(ar.resolve())!=Fr||sr&&I(new sr)!=Br||er&&I(new er)!=Gr)&&(I=function(r){var e=J(r),t=e==Ht?r.constructor:void 0,n=t?j(t):"";if(n)switch(n){case Yt:return Kr;case qt:return Dr;case Jt:return Fr;case Qt:return Br;case Wt:return Gr}return e});const Ur=I;var Xt=N.Uint8Array;const zr=Xt;var Zt="__lodash_hash_undefined__";function Vt(r){return this.__data__.set(r,Zt),this}function kt(r){return this.__data__.has(r)}function q(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new Vr;++e<t;)this.add(r[e])}q.prototype.add=q.prototype.push=Vt;q.prototype.has=kt;function rn(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}function en(r,e){return r.has(e)}var tn=1,nn=2;function ye(r,e,t,n,i,s){var o=t&tn,u=r.length,f=e.length;if(u!=f&&!(o&&f>u))return!1;var p=s.get(r),w=s.get(e);if(p&&w)return p==e&&w==r;var h=-1,y=!0,x=t&nn?new q:void 0;for(s.set(r,e),s.set(e,r);++h<u;){var _=r[h],T=e[h];if(n)var P=o?n(T,_,h,e,r,s):n(_,T,h,r,e,s);if(P!==void 0){if(P)continue;y=!1;break}if(x){if(!rn(e,function(S,m){if(!en(x,m)&&(_===S||i(_,S,t,n,s)))return x.push(m)})){y=!1;break}}else if(!(_===T||i(_,T,t,n,s))){y=!1;break}}return s.delete(r),s.delete(e),y}function an(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}function sn(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var on=1,un=2,ln="[object Boolean]",pn="[object Date]",fn="[object Error]",cn="[object Map]",dn="[object Number]",gn="[object RegExp]",yn="[object Set]",vn="[object String]",hn="[object Symbol]",wn="[object ArrayBuffer]",_n="[object DataView]",Hr=br?br.prototype:void 0,Z=Hr?Hr.valueOf:void 0;function An(r,e,t,n,i,s,o){switch(t){case _n:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case wn:return!(r.byteLength!=e.byteLength||!s(new zr(r),new zr(e)));case ln:case pn:case dn:return Zr(+r,+e);case fn:return r.name==e.name&&r.message==e.message;case gn:case vn:return r==e+"";case cn:var u=an;case yn:var f=n&on;if(u||(u=sn),r.size!=e.size&&!f)return!1;var p=o.get(r);if(p)return p==e;n|=un,o.set(r,e);var w=ye(u(r),u(e),n,i,s,o);return o.delete(r),w;case hn:if(Z)return Z.call(r)==Z.call(e)}return!1}var Tn=1,xn=Object.prototype,bn=xn.hasOwnProperty;function Pn(r,e,t,n,i,s){var o=t&Tn,u=jr(r),f=u.length,p=jr(e),w=p.length;if(f!=w&&!o)return!1;for(var h=f;h--;){var y=u[h];if(!(o?y in e:bn.call(e,y)))return!1}var x=s.get(r),_=s.get(e);if(x&&_)return x==e&&_==r;var T=!0;s.set(r,e),s.set(e,r);for(var P=o;++h<f;){y=u[h];var S=r[y],m=e[y];if(n)var D=o?n(m,S,y,e,r,s):n(S,m,y,r,e,s);if(!(D===void 0?S===m||i(S,m,t,n,s):D)){T=!1;break}P||(P=y=="constructor")}if(T&&!P){var L=r.constructor,O=e.constructor;L!=O&&"constructor"in r&&"constructor"in e&&!(typeof L=="function"&&L instanceof L&&typeof O=="function"&&O instanceof O)&&(T=!1)}return s.delete(r),s.delete(e),T}var Sn=1,Yr="[object Arguments]",qr="[object Array]",U="[object Object]",mn=Object.prototype,Jr=mn.hasOwnProperty;function On(r,e,t,n,i,s){var o=C(r),u=C(e),f=o?qr:Ur(r),p=u?qr:Ur(e);f=f==Yr?U:f,p=p==Yr?U:p;var w=f==U,h=p==U,y=f==p;if(y&&tr(r)){if(!tr(e))return!1;o=!0,w=!1}if(y&&!w)return s||(s=new R),o||oe(r)?ye(r,e,t,n,i,s):An(r,e,f,t,n,i,s);if(!(t&Sn)){var x=w&&Jr.call(r,"__wrapped__"),_=h&&Jr.call(e,"__wrapped__");if(x||_){var T=x?r.value():r,P=_?e.value():e;return s||(s=new R),i(T,P,t,n,s)}}return y?(s||(s=new R),Pn(r,e,t,n,i,s)):!1}function pr(r,e,t,n,i){return r===e?!0:r==null||e==null||!G(r)&&!G(e)?r!==r&&e!==e:On(r,e,t,n,pr,i)}var $n=1,Rn=2;function En(r,e,t,n){var i=t.length,s=i,o=!n;if(r==null)return!s;for(r=Object(r);i--;){var u=t[i];if(o&&u[2]?u[1]!==r[u[0]]:!(u[0]in r))return!1}for(;++i<s;){u=t[i];var f=u[0],p=r[f],w=u[1];if(o&&u[2]){if(p===void 0&&!(f in r))return!1}else{var h=new R;if(n)var y=n(p,w,f,r,e,h);if(!(y===void 0?pr(w,p,$n|Rn,n,h):y))return!1}}return!0}function ve(r){return r===r&&!H(r)}function In(r){for(var e=pe(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,ve(i)]}return e}function he(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function Ln(r){var e=In(r);return e.length==1&&e[0][2]?he(e[0][0],e[0][1]):function(t){return t===r||En(t,r,e)}}function Mn(r,e){return r!=null&&e in Object(r)}function Cn(r,e,t){e=or(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Q(e[n]);if(!(s=r!=null&&t(r,o)))break;r=r[o]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&lr(i)&&ur(o,i)&&(C(r)||ae(r)))}function Nn(r,e){return r!=null&&Cn(r,e,Mn)}var jn=1,Dn=2;function Fn(r,e){return kr(r)&&ve(e)?he(Q(r),e):function(t){var n=Se(t,r);return n===void 0&&n===e?Nn(t,r):pr(e,n,jn|Dn)}}function Bn(r){return function(e){return e==null?void 0:e[r]}}function Gn(r){return function(e){return re(e,r)}}function Kn(r){return kr(r)?Bn(Q(r)):Gn(r)}function Un(r){return typeof r=="function"?r:r==null?Ee:typeof r=="object"?C(r)?Fn(r[0],r[1]):Ln(r):Kn(r)}function zn(r,e,t,n){if(!H(r))return r;e=or(e,r);for(var i=-1,s=e.length,o=s-1,u=r;u!=null&&++i<s;){var f=Q(e[i]),p=t;if(f==="__proto__"||f==="constructor"||f==="prototype")return r;if(i!=o){var w=u[f];p=n?n(w,f,u):void 0,p===void 0&&(p=H(w)?w:ur(e[i+1])?[]:{})}je(u,f,p),u=u[f]}return r}function Hn(r,e,t){for(var n=-1,i=e.length,s={};++n<i;){var o=e[n],u=re(r,o);t(u,o)&&zn(s,or(o,r),u)}return s}function Yn(r,e){if(r==null)return{};var t=me(zt(r),function(n){return[n]});return e=Un(e),Hn(r,t,function(n,i){return e(n,i[0])})}const qn="_toolbar_kdmkt_1",Jn="_title_kdmkt_7",Qn="_action_kdmkt_11",Wn="_actionList_kdmkt_17",z={toolbar:qn,title:Jn,action:Qn,actionList:Wn},Xn=window.React,Zn=window.React.forwardRef,Vn=window.React.memo,kn=window.React.useEffect,ra=window.React.useImperativeHandle,E=window.React.useState,Qr=window.antd.Button,ea=window.antd.Table,V=window.antd.Image,k=window.antd.Tag,Wr=window.antd.Tooltip,Xr=window.antd.Typography,rr=window.antd.Badge,ta=({config:r,elements:e,onCheckedChange:t},n)=>{var dr,gr,yr,vr,hr,wr,_r;const[i,s]=E({}),[o,u]=E({[r.props.field.pageNum]:1,[r.props.field.pageSize]:r.props.pagination.pageSize}),[f,p]=E([]),[w,h]=E(!1),[y,x]=E(0),[_,T]=E([]),[P,S]=E([]),[m,D]=E(!0),L=Oe(a=>a.page.variableData);kn(()=>{s(()=>{const a={[r.props.field.pageNum]:1,[r.props.field.pageSize]:r.props.pagination.pageSize};return O(r.props.hidePager?{}:a),a})},[((dr=r.api)==null?void 0:dr.sourceType)=="variable"?L:""]);const O=a=>{h(!0),$e(r.api,a).then(v=>{h(!1),(v==null?void 0:v.ret)===0&&(Array.isArray(v.data)&&p(v.data),r.props.field.total&&x(v.originData[r.props.field.total]||0))}).catch(()=>{h(!1)})};ra(n,()=>({startLoading:()=>{h(!0)},stopLoading:()=>{h(!1)},show(){D(!0)},hide(){D(!1)},search:a=>{const v=Yn(a,A=>Pr(A));u({...o,[r.props.field.pageNum]:1}),s(v),O({...o,[r.props.field.pageNum]:1,...v})},reload:()=>{O({...o,...i})},clearData:()=>{p([])},checkSelectedRow:()=>_.length!==0,setSelectedRowKeys:a=>{T(a)},getSelectedRowKeys:()=>_||[],getSelectedRow:()=>P}));let fr=null;r.props.selectionType&&(fr={type:r.props.selectionType,selectedRowKeys:_,onChange(a,v){t==null||t(a),T(a),S(v)}});const we={rowSelection:fr,rowKey:r.props.rowKey||"id",bordered:r.props.bordered,size:r.props.size,columns:r.props.columns.map((a,v)=>({...a,key:a.dataIndex||v,onCell(A,$){if(a.onCell)try{return new Function("record","index",`return (${a.onCell})(record,index);`)(A,$)}catch(F){console.error(`列[${a.title}]渲染失败`,F)}return{}},render(A,$,F){var Ar;let l=A;if(Pr(l)?a.type==="money"?l=Sr(A,"currency"):a.type==="number"?l=Sr(A):a.type==="date1"?l=mr(A,"YYYY-MM-DD"):a.type==="date2"&&(l=mr(A)):typeof a.empty>"u"?l="-":a.empty&&(l=a.empty),a.render)try{l=new Function("text","record","index",`return (${a.render})(text,record,index);`)(l,$,F)}catch(c){console.error(`列[${a.title}]渲染失败`,c),l="解析异常"}if(a.type==="text"){const c=d.jsx(Qr,{type:"link",onClick:()=>W(a.eventName,$),children:l.toString()});return a.ellipsis&&a.copyable?d.jsx(Wr,{title:l,children:d.jsx(Xr.Paragraph,{copyable:!0,style:{marginBottom:0},children:a.clickable?c:l.toString()})}):a.ellipsis?d.jsx(Wr,{title:l,children:a.clickable?c:l.toString()}):a.copyable?d.jsx(Xr.Paragraph,{copyable:!0,children:a.clickable?c:l.toString()}):a.clickable?d.jsx(Qr,{type:"link",onClick:()=>W(a.eventName,$),children:l.toString()}):l.toString()}return a.type==="multiline"?Array.isArray(l)?l.map((c,b)=>d.jsxs("div",{children:[d.jsx("span",{children:c.label}),d.jsx("span",{children:c.value})]},b)):l.toString():a.type==="status"?Array.isArray(l)?l.map((c,b)=>d.jsx(rr,{status:c.status,text:c.text},b)):typeof l=="object"?d.jsx(rr,{status:l.status,text:l.text}):d.jsx(rr,{status:"success",text:l.toString()}):a.type==="image"?Array.isArray(l)?d.jsx(V.PreviewGroup,{items:l,children:d.jsx(V,{width:30,src:l[0]})}):d.jsx(V,{src:l,width:30}):a.type==="tag"?Array.isArray(l)?l.map((c,b)=>typeof c=="object"?d.jsx(k,{color:c.color,children:c.label},b):d.jsx(k,{color:"green",children:c},c)):typeof l=="string"||typeof l=="number"?d.jsx(k,{color:"green",children:l}):l==null?void 0:l.toString():a.type==="action"?d.jsx("div",{className:z.action,children:(Ar=a.list)==null?void 0:Ar.map(c=>{var Tr;let b="";if(typeof c.text=="string")b=c.text;else if(((Tr=c.text)==null?void 0:Tr.type)==="static")b=c.text.value;else try{b=new Function("text","record","index",`return (${c.text.value})(text,record,index);`)("",$,F)}catch(xr){console.error(`列[${c.title}]渲染失败`,xr),b="解析异常"}return d.jsx($r,{type:"link",size:"small",danger:c.danger,onClick:()=>W(c.eventName,$),authCode:c.authCode,authScript:c.authScript,children:b},c.eventName)})}):l}})),dataSource:f,loading:w},_e={total:y,current:o[r.props.field.pageNum]||1,pageSize:o[r.props.field.pageSize]||10,showSizeChanger:(gr=r.props.pagination)==null?void 0:gr.showSizeChanger,showQuickJumper:(yr=r.props.pagination)==null?void 0:yr.showQuickJumper,showTotal:(vr=r.props.pagination)!=null&&vr.showTotal?a=>`共 ${a} 条数据`:void 0,position:(hr=r.props.pagination)==null?void 0:hr.position,onChange:(a,v)=>{u({[r.props.field.pageNum]:a,[r.props.field.pageSize]:v}),O({[r.props.field.pageNum]:a,[r.props.field.pageSize]:v})}},Ae=a=>{const v=r.events.find(A=>A.eventName===a);Or(v==null?void 0:v.actions,i)},W=(a,v)=>{const A=r.events.find($=>$.eventName===a);Or(A==null?void 0:A.actions,v)},cr=r.props.leftTitle,M=r.props.bulkActionList||[],Te=xe;return m&&d.jsxs("div",{style:r.style,children:[cr||e!=null&&e.length||M!=null&&M.length?d.jsxs("div",{className:z.toolbar,children:[cr&&d.jsx("div",{className:z.title,children:r.props.leftTitle}),d.jsxs("div",{className:z.action,children:[e!=null&&e.length?d.jsx(Re,{elements:e}):null,M==null?void 0:M.map(a=>d.jsx($r,{type:a.type,danger:a.danger,icon:a.icon?Xn.createElement(Te[a.icon]):null,onClick:()=>Ae(a.eventName),authCode:a.authCode,authScript:a.authScript,children:a.text},a.eventName))]})]}):null,d.jsx(ea,{...we,scroll:{x:(wr=r.props.scroll)==null?void 0:wr.x,y:(_r=r.props.scroll)==null?void 0:_r.y},pagination:r.props.hidePager?!1:_e})]})},_a=Vn(Zn(ta));export{_a as MarsTable};
