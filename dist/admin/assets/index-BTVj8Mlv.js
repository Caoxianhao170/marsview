import{j as s}from"./index-BvzOCTvp.js";import{i as D}from"./index-eHDmF8kl.js";import{u as I,h as S,f as u,k as w,l as b}from"./index-BpWof7b7.js";import"./PlusOutlined-CrNRbnjj.js";import"./objectSpread2-C4CkhkJ7.js";import"./_commonjsHelpers-BosuxZz1.js";import"./PlusOutlined-B9smaIDR.js";import"./react-is.production.min-CusjrdBo.js";import"./UploadOutlined-Bwd-S4oa.js";import"./UploadOutlined-B7yj2_9n.js";import"./LockOutlined-BVydvXBH.js";import"./MinusOutlined-BwcU5aKC.js";import"./MinusOutlined-BZaTcxGD.js";import"./UserOutlined-D3qSKySR.js";import"./immer-DZPz5TFl.js";const M=window.React,N=window.React.forwardRef,Y=window.React.useEffect,k=window.React.useImperativeHandle,h=window.React.useState,E=window.antd.Avatar,T=window.antd.Button,p=window.antd.List,x=window.antd.Tag,z=({config:e},y)=>{var c;const[v,i]=h([]),[j,d]=h(!0),A=I(r=>r.page.variableData);Y(()=>{l({})},[e.api,((c=e.api)==null?void 0:c.sourceType)=="variable"?A:""]);const l=r=>{S(e.api,r).then(t=>{(t==null?void 0:t.ret)===0&&(Array.isArray(t.data)?i(t.data):(console.error("[List]","data数据格式错误，请检查"),i([])))})};k(y,()=>({show(){d(!0)},hide(){d(!1)},update:r=>{l(r)}}));const L=r=>{var n;const t=r[(n=e.props.content)==null?void 0:n.name],a=e.props.content.type;if(!t||!a||a==="text")return t;if(a==="money")return u(t,"currency");if(a==="number")return u(t);if(a==="date1")return w(t,"YYYY-MM-DD");if(a==="date2")return w(t);if(a==="tag")return Array.isArray(t)?t.map((o,m)=>s.jsx(x,{children:o},m)):typeof t=="string"||typeof t=="number"?s.jsx(x,{children:t}):t==null?void 0:t.toString()},R=(r,t={})=>{const a=e.events.find(n=>n.eventName===r);b(a==null?void 0:a.actions,t)},f=D;return j&&s.jsx(p,{style:e.style,bordered:e.props.bordered,size:e.props.size,split:e.props.split,header:s.jsx("div",{children:e.props.header}),footer:s.jsx("div",{children:e.props.footer}),dataSource:v,renderItem:r=>{var t,a,n;return s.jsxs(p.Item,{actions:((t=e.props.bulkActionList)==null?void 0:t.map((o,m)=>s.jsx(T,{type:o.type,danger:o.danger,icon:o.icon?M.createElement(f[o.icon]):null,onClick:()=>R(o.eventName,r),children:o.text},o.eventName)))||[],children:[s.jsx(p.Item.Meta,{avatar:e.props.avatar?s.jsx(E,{src:r[e.props.avatar]}):null,title:(a=e.props.title)!=null&&a.name?s.jsx("span",{style:{color:e.props.title.color},children:r[e.props.title.name]}):null,description:e.props.desc.name?s.jsx("span",{style:{color:e.props.desc.color},children:r[e.props.desc.name]}):null}),(n=e.props.content)!=null&&n.name?s.jsx("div",{style:{color:e.props.content.color},children:L(r)}):null]})}})},X=N(z);export{X as List};
