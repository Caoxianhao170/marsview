import{j as n}from"./index-BMoS0DUA.js";import{u as R,a as x,d as i,M as j}from"./index-TNyY8g-O.js";import{F as b}from"./context-V_gTMpak.js";import"./_commonjsHelpers-BosuxZz1.js";import"./immer-DZPz5TFl.js";const f=window.antd.Form,h=window.React.forwardRef,S=window.React.memo,y=window.React.useImperativeHandle,M=window.React.useState,V=({id:a,config:u,elements:o,onFinish:s,onChange:m},F)=>{const[r]=f.useForm(),{formData:c,setFormData:l}=R(x(t=>({formData:t.page.formData,setFormData:t.setFormData}))),[p,d]=M(!0),v=t=>{s==null||s(i(o,t))},D=(t,e)=>{const w=i(o,e);m==null||m(w),l({name:a,value:w})};return y(F,()=>({show(){d(!0)},hide(){d(!1)},reset(){r.resetFields()},submit(){r.submit()},async validate(){try{return await r.validateFields(),!0}catch(t){return console.error(t),!1}},init(t={}){const e=i(o,t);r.setFieldsValue(e),l({name:a,value:e})},getFormData(t){var e;return t&&typeof t=="string"?(e=c[a])==null?void 0:e[t]:c[a]}})),p&&n.jsx(b.Provider,{value:r,children:n.jsx(f,{form:r,style:u.style,...u.props,onFinish:v,onValuesChange:D,children:n.jsx(j,{elements:o})})})},_=S(h(V));export{_ as Form};
