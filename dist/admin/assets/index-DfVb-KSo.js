import{j as c}from"./index-BvzOCTvp.js";import{u as F,i as j,h as E,b as v}from"./index-BpWof7b7.js";import{F as V}from"./context-V_gTMpak.js";import"./_commonjsHelpers-BosuxZz1.js";import"./immer-DZPz5TFl.js";const A=window.antd.Form,S=window.antd.Radio,W=window.React.forwardRef,H=window.React.useContext,d=window.React.useEffect,N=window.React.useImperativeHandle,i=window.React.useState,C=({config:a,onChange:l},R)=>{var b;const[x,u]=i([]),r=H(V),[y,n]=i(!0),[I,p]=i(!1),h=F(e=>e.page.variableData);d(()=>{var s;const e=(s=a.props.formItem)==null?void 0:s.name,t=a.props.defaultValue;e&&!j(t)&&(r==null||r.setFieldValue(e,t))},[a.props.defaultValue]),d(()=>{p(a.props.formWrap.disabled||!1)},[a.props.formWrap.disabled]),d(()=>{m({})},[a.api,((b=a.api)==null?void 0:b.sourceType)=="variable"?h:""]);const m=e=>{E(a.api,e).then(t=>{if((t==null?void 0:t.ret)===0)if(!Array.isArray(t.data))console.error("[radio]","data数据格式错误，请检查"),u([]);else{let s=[];a.props.field.label==="label"&&a.props.field.value==="value"?(s=t.data,(typeof t.data[0]=="string"||typeof t.data[0]=="number")&&(s=t.data.map(o=>({label:o,value:o})))):s=t.data.map(o=>{const f=o[a.props.field.label||"label"],w=o[a.props.field.value||"value"];return{label:v(f)?f:"-",value:v(w)?w:""}}),u(s)}})};N(R,()=>({show(){n(!0)},hide(){n(!1)},enable(){p(!1)},disable(){p(!0)},update:e=>{m(e)}}));const D=e=>{l==null||l({[a.props.formItem.name]:e})};return y&&c.jsx(A.Item,{...a.props.formItem,children:c.jsx(S.Group,{...a.props.formWrap,disabled:I,options:x,style:a.style,onChange:e=>D(e.target.value)})})},$=W(C);export{$ as Radio};
